!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.RPlayer=t()}(this,function(){var e={handlers:{}},t=document,n=1;function r(e){return"[object Function]"===Object.prototype.toString.call(e)}e.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp(t).test(e.className)},e.addClass=function(e,t){return this.hasClass(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t),this},e.removeClass=function(e,t){var n=new RegExp("\\s*"+t+"\\s*");return this.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(n," ").trim()),this},e.replaceClass=function(e,t){return e.className=t,this},e.fullScreen=function(e,n){var r=this.fsApi;return r?n?e[r.requestFullscreen()]():t[r.exit]():this.fullPage(e,!1),this},e.fullPage=function(t,n){n?e.removeClass(t,"fixed"):e.addClass(t,"fixed")},e.selectElement=function(e){var n;return e&&(e.nodeName?n=e:"string"==typeof e&&(/^#[^>~+\[\]\s]+$/.test(e)?(n=t.getElementById(e.substring(1)),console.log(e,n)):n=t.querySelector(e))),n},e._on=function(e,t,r){var s,l=e.guid;l||(l=n++,Object.defineProperty(e,"guid",{value:l})),(s=this.handlers[l])?s[t]||(s[t]=[]):(s=this.handlers[l]={})[t]=[],s[t].push(r),e.addEventListener(t,r)},e.on=function(e,t,n,s){var l=this.selectElement(e);return l&&r(n)?s?this._off(l,t,n):this._on(l,t,n):l&&!r(n)&&this._off(l,t),this},e._off=function(t,n,r){var s,l=t.guid,i=e.handlers[l],o=0;if(i&&(i=i[n]))if(s=i.length,r){for(;o<s;o++)if(i[o]===r){i.splice(o,1),t.removeEventListener(n,r);break}}else i.forEach(function(e){t.removeEventListener(n,e)}),e.handlers[n]=[]},e.off=function(e,t,n){return this.on(e,t,n,!0)},e.once=function(e,t,n){var s,l=this;r(n)&&(s=function(){var r=Array.prototype.slice.call(arguments);n.apply(this,r),l.off(e,t,s)},this.on(e,t,s))};e.fsApi=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=null,s=n[0],l=0,i=n.length;l<i;l++)if((e=n[l])[1]in document){t=!0;break}return t&&(r={},e.forEach(function(e,t){r[s[t]]=e})),r}();var s={autoPlay:!1,defaultVolume:50,loop:!1,poster:"",preload:"metadata",source:"",msg:""};function l(e,n){return(n=n||t).querySelector(e)}function i(t,n){var r=e.selectElement(t);l=n,"[object Object]"===Object.prototype.toString.call(l)?this.config={autoPlay:!!n.autoPlay,defaultVolume:Math.abs(parseInt(n.defaultVolume))||s.defaultVolume,loop:!!n.loop,poster:n.poster||s.poster,source:n.source,msg:n.msg||s.msg}:this.config=s;var l;if(this.config.source,!r)throw new Error("未选中任何元素");this.target=r,this.playing=!1,this.volume=this.config.defaultVolume,this.muted=!1,this.isFullScreen=!1}var o=i.prototype;return o.slide=function(e,t,n,r,s,l){n=n<0?0:n>l?l:n,e.style[s]=n+"px",t.style[r]=n+"px"},o.initFullScreenEvent=function(){var t=this,n=e.fsApi;n&&e.on(e.doc,n.fullscreenchange,function(){}),e.on(".rplayer-fullscreen-btn","click",function(){t.isFullScreen||e.fullScreen(t.container).addClass(this,"fullscreen").addClass(t.container,"fullscreen")})},o.initVolumeEvent=function(){var n=this,r=this.container;return e.on(".rplayer-audio-btn","click",function(t){var n=l(".rplayer-volume-popup",r),s="rplayer-hide";e.hasClass(n)&&e.addClass(n,s),e.hasClass(n,s)?e.removeClass(n,s):e.addClass(n,s),t.stopPropagation()}).on(".rplayer-volume-slider","mousedown",function(s){var i=this,o=this.offsetTop,a=s.clientY,c=l(".rplayer-volume-value",r),u=parseInt(getComputedStyle(c.parentNode).height)-12;move=function(e){var t=e.clientY,r=u-(t-a+o);console.log(r),n.slide(c,i,r,"bottom","height",u)},e.on(n.container,"mousemove",move).on(t,"mouseup",function(){e.off(n.container,"mousemove").off(t,"mouseup")})}),this},o.initPlayEvent=function(){var n=this,r=this.container;return e.on(".rplayer-play-btn","click",function(t){(n.playing=!n.playing)?e.addClass(this,"paused"):e.removeClass(this,"paused")}).on(".rplayer-video-track","click",function(e){l(".rplayer-video-slider",r),e.offsetX}).on(".rplayer-video-slider","mousedown",function(s){var i=this,o=this.offsetLeft,a=s.clientX,c=l(".rplayer-video-progress",r),u=parseInt(getComputedStyle(c.parentNode).width)-12;move=function(e){var t=e.clientX-a+o;console.log(t),n.slide(c,i,t,"left","width",u)},e.on(n.container,"mousemove",move).on(t,"mouseup",function(){e.off(n.container,"mousemove").off(t,"mouseup")})}),this},o.initEvent=function(){var n=l(".rplayer-volume-popup",this.container);e.on(t,"click",function(t){var r=t.target;n===r||n.contains(r)||e.addClass(n,"rplayer-hide")}),this.initPlayEvent().initVolumeEvent()},o.destroy=function(){return this.container&&(this.target.removeChild(this.container),this.container=null),this},o.initSource=function(e){var n=this.config.source;"string"==typeof n?e.src=n:Array.isArray(n)&&n.forEach(function(n){var r=t.createElement("source");r.src=n,e.appendChild(r)})},o.initialize=function(){return this.destroy(),this.container=t.createElement("div"),this.initSource(this.videoEl=t.createElement("video")),this.videoEl.appendChild(t.createTextNode(this.config.msg)),e.addClass(this.container,"rplayer-container").addClass(this.videoEl,"rplayer-video"),this.container.innerHTML='<div class="rplayer-loading rplayer-hide"></div>    <div class="rplayer-controls">        <div class="rplayer-progress-panel">            <div class="rplayer-progress rplayer-video-track">                <div class="rplayer-bufferd-bar"></div>                <div class="rplayer-bar rplayer-video-progress"></div>                <div class="rplayer-slider rplayer-video-slider"></div>            </div>        </div>        <div class="rplayer-play-control rplayer-lf">            <button type="button" class="rplayer-play-btn"></button>            <span class="rplayer-time-info">                        <span class="rplayer-current-time">dsfsdfs</span> /                         <span class="rplayer-total-time">sdsdf</span>                    </span>        </div>\n        <div class="rplayer-settings rplayer-rt">\n            <button type="button" class="rplayer-fullscreen-btn rplayer-rt"></button>\n            <div class="rplayer-audio-control rplayer-rt">\n                <button type="button" class="rplayer-audio-btn volume-1"></button>\n                <div class="rplayer-volume-popup rplayer-hide">\n                    <div class="rplayer-progress">\n                        <div class="rplayer-bar rplayer-volume-value"></div>\n                        <div class="rplayer-slider rplayer-volume-slider"></div>\n                    </div>\n                    <button class="rplayer-mute volume-1"></button>\n                </div>\n            </div>\n        </div>\n    </div>',this.container.appendChild(this.videoEl),this.target.appendChild(this.container),this.initEvent(),this},i.init=function(e,t){return new i(e,t).initialize()},i});