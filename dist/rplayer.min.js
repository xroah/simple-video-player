!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.RPlayer=t()}(this,function(){var e={handlers:{}},t=document,r=1;function s(e){return"[object Function]"===Object.prototype.toString.call(e)}e.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp(t).test(e.className)},e.addClass=function(e,t){return this.hasClass(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t),this},e.removeClass=function(e,t){var r=new RegExp("\\s*"+t+"\\s*");return this.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(r," ").trim()),this},e.replaceClass=function(e,t){return e.className=t,this},e.fullScreen=function(e,r){var s=this.fsApi;return s?r?e[s.requestFullscreen()]():t[s.exit]():this.fullPage(e,!1),this},e.fullPage=function(t,r){r?e.removeClass(t,"fixed"):e.addClass(t,"fixed")},e.selectElement=function(e){var r;return e&&(e.nodeName?r=e:"string"==typeof e&&(/^#[^>~+\[\]\s]+$/.test(e)?(r=t.getElementById(e.substring(1)),console.log(e,r)):r=t.querySelector(e))),r},e._on=function(e,t,s){var n,i=e.guid;i||(i=r++,Object.defineProperty(e,"guid",{value:i})),(n=this.handlers[i])?n[t]||(n[t]=[]):(n=this.handlers[i]={})[t]=[],n[t].push(s),e.addEventListener(t,s)},e.on=function(e,t,r,n){var i=this.selectElement(e);return i&&s(r)?n?this._off(i,t,r):this._on(i,t,r):i&&!s(r)&&this._off(i,t),this},e._off=function(t,r,s){var n,i=t.guid,l=e.handlers[i],o=0;if(l&&(l=l[r]))if(n=l.length,s){for(;o<n;o++)if(l[o]===s){l.splice(o,1),t.removeEventListener(r,s);break}}else l.forEach(function(e){t.removeEventListener(r,e)}),e.handlers[r]=[]},e.off=function(e,t,r){return this.on(e,t,r,!0)},e.once=function(e,t,r){var n,i=this;s(r)&&(n=function(){var s=Array.prototype.slice.call(arguments);r.apply(this,s),i.off(e,t,n)},this.on(e,t,n))};e.fsApi=function(){for(var e,t,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=null,n=r[0],i=0,l=r.length;i<l;i++)if((e=r[i])[1]in document){t=!0;break}return t&&(s={},e.forEach(function(e,t){s[n[t]]=e})),s}();var n={autoPlay:!1,defaultVolume:50,loop:!1,poster:"",preload:"metadata",source:"",msg:""};function i(e,r){return(r=r||t).querySelector(e)}function l(t,r){var s=e.selectElement(t);i=r,"[object Object]"===Object.prototype.toString.call(i)?this.config={autoPlay:!!r.autoPlay,defaultVolume:Math.abs(parseInt(r.defaultVolume))||n.defaultVolume,loop:!!r.loop,poster:r.poster||n.poster,source:r.source,msg:r.msg||n.msg}:this.config=n;var i;if(this.config.source,!s)throw new Error("未选中任何元素");this.target=s,this.playing=!1,this.volume=this.config.defaultVolume,this.muted=!1,this.isFullScreen=!1}var o=l.prototype;return o.initFullScreenEvent=function(){var t=this,r=e.fsApi;r&&e.on(e.doc,r.fullscreenchange,function(){}),e.on(".rplayer-fullscreen-btn","click",function(){t.isFullScreen||e.fullScreen(t.container).addClass(this,"fullscreen").addClass(t.container,"fullscreen")})},o.initVolumeEvent=function(){var r=this,s=this.container;return e.on(".rplayer-audio-btn","click",function(t){var r=i(".rplayer-volume-popup",s),n="rplayer-hide";e.hasClass(r)&&e.addClass(r,n),e.hasClass(r,n)?e.removeClass(r,n):e.addClass(r,n),t.stopPropagation()}).on(".rplayer-volume-slider","mousedown",function(n){var l=this,o=this.offsetTop+12,a=n.clientY,c=i(".rplayer-volume-value",s),u=c.parentNode.offsetHeight;move=function(e){var t=e.clientY,r=u-(t-a+o);r=(r=r<0?0:r>u?u:r)/u*100,c.style.height=l.style.bottom=r+"%"},e.on(r.container,"mousemove",move).on(t,"mouseup",function(){e.off(r.container,"mousemove").off(t,"mouseup")})}),this},o.initPlayEvent=function(){var r=this,s=this.container;return e.on(".rplayer-play-btn","click",function(t){(r.playing=!r.playing)?e.addClass(this,"paused"):e.removeClass(this,"paused")}).on(".rplayer-video-track","click",function(e){i(".rplayer-video-slider",s),e.offsetX}).on(".rplayer-video-slider","mousedown",function(n){var l=this,o=this.offsetLeft,a=n.clientX,c=i(".rplayer-video-progress",s),u=c.parentNode.offsetWidth;move=function(e){var t=e.clientX-a+o;t=(t=t<0?0:t>u?u:t)/u*100,c.style.width=l.style.left=t+"%"},e.on(r.container,"mousemove",move).on(t,"mouseup",function(){e.off(r.container,"mousemove").off(t,"mouseup")})}),this},o.initEvent=function(){var r=i(".rplayer-volume-popup",this.container);e.on(t,"click",function(t){var s=t.target;r===s||r.contains(s)||e.addClass(r,"rplayer-hide")}),this.initPlayEvent().initVolumeEvent()},o.destroy=function(){return this.container&&(this.target.removeChild(this.container),this.container=null),this},o.initSource=function(e){var r=this.config.source;"string"==typeof r?e.src=r:Array.isArray(r)&&r.forEach(function(r){var s=t.createElement("source");s.src=r,e.appendChild(s)})},o.initialize=function(){return this.destroy(),this.container=t.createElement("div"),this.initSource(this.videoEl=t.createElement("video")),this.videoEl.appendChild(t.createTextNode(this.config.msg)),e.addClass(this.container,"rplayer-container").addClass(this.videoEl,"rplayer-video"),this.container.innerHTML='<div class="rplayer-container">    <video class="rplayer-video"></video>    <div class="rplayer-loading rplayer-hide"></div>    <div class="rplayer-controls">        <div class="rplayer-progress-panel">            <div class="rplayer-progress rplayer-video-track">                <div class="rplayer-bufferd-bar"></div>                <div class="rplayer-progress-track">                    <div class="rplayer-bar rplayer-video-progress"></div>                    <div class="rplayer-slider rplayer-video-slider"></div>                </div>            </div>        </div>        <div class="rplayer-play-control rplayer-lf">            <button type="button" class="rplayer-play-btn"></button>            <span class="rplayer-time-info">                        <span>dsfsdfs</span> /                         <span>sdsdf</span>                    </span>        </div>        <div class="rplayer-settings rplayer-rt">            <button type="button" class="rplayer-fullscreen-btn rplayer-rt"></button>            <div class="rplayer-audio-control rplayer-rt">                <button type="button" class="rplayer-audio-btn volume-1"></button>                <div class="rplayer-volume-popup rplayer-hide">                    <div class="rplayer-progress">                        <div class="rplayer-audio-track">                            <div class="rplayer-bar rplayer-volume-value"></div>                            <div class="rplayer-slider rplayer-volume-slider"></div>                        </div>                    </div>                    <button class="rplayer-mute volume-1"></button>                </div>            </div>        </div>    </div></div>',this.container.appendChild(this.videoEl),this.target.appendChild(this.container),this.initEvent(),this},l.init=function(e,t){return new l(e,t).initialize()},l});