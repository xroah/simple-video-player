{"version":3,"file":"rplayer.js","sources":["../src/global.js","../src/dom.js","../src/subscriber.js","../src/slider.js","../src/template.js","../src/video_control.js","../src/index.js"],"sourcesContent":["\"use strict\";\nconst DEFAULT_OPTIONS = {\n        autoPlay: false,\n        defaultVolume: 50,\n        loop: false,\n        poster: \"\",\n        preload: \"metadata\",\n        source: \"\",\n        msg: \"\"\n    },\n    ERROR_TYPE = { //视频播放错误类型\n        \"1\": \"MEDIA_ERR_ABORTED\",\n        \"2\": \"MEDIA_ERR_NETWORK\",\n        \"3\": \"MEDIA_ERR_DECODE\",\n        \"4\": \"MEDIA_ERR_SRC_NOT_SUPPORTED\"\n    },\n    TYPE = {\n        function: \"[object Function]\",\n        object: \"[object Object]\",\n        string: \"[object String]\",\n        undef: \"[object Undefined]\"\n    },\n    VOLUME_STEP = 5,\n    VIDEO_STEP = 10,\n    KEY_MAP = {\n        \"up\": VOLUME_STEP, //IE\n        \"arrowup\": VOLUME_STEP,\n        \"down\": -VOLUME_STEP, //IE\n        \"arrowdown\": -VOLUME_STEP,\n        \"left\": -VIDEO_STEP, //IE\n        \"arrowleft\": -VIDEO_STEP,\n        \"right\": VIDEO_STEP, //IE\n        \"arrowright\": VIDEO_STEP,\n        \"esc\": \"esc\", //IE\n        \"escape\": \"escape\",\n        \" \": \"space\",\n        \"spacebar\": \"space\", //IE\n        \"enter\": \"enter\"\n    };\nlet doc = document,\n    isType = type => obj => Object.prototype.toString.call(obj) === TYPE[type],\n    isFunction = isType(\"function\"),\n    isObject = isType(\"object\"),\n    isString = isType(\"string\"),\n    isUndefined = isType(\"undef\"),\n    isWindow = obj => obj && obj.window === obj;\n\nexport {\n    doc,\n    DEFAULT_OPTIONS,\n    ERROR_TYPE,\n    KEY_MAP,\n    isFunction,\n    isObject,\n    isString,\n    isUndefined,\n    isWindow\n};","import {doc, isFunction, isObject, isUndefined, isString, isWindow} from \"./global.js\";\nlet dom = {\n        handlers: {}\n    },\n    guid = 1;\n\ndom.hasClass = function (el, cls) {\n    if (!el) return false;\n    if (el.classList) {\n        return el.classList.contains(cls);\n    }\n    //如果className为XXX-active, cls为active,\n    //如果不加空格判断则获取的结果不准确\n    return (\" \" + el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n};\n\ndom.addClass = function (el, cls) {\n    if (el && !this.hasClass(el, cls)) {\n        if (el.classList) {\n            el.classList.add(cls);\n        } else {\n            el.className += \" \" + cls;\n        }\n    }\n    return this;\n};\n\ndom.removeClass = function (el, cls) {\n    let reg = new RegExp(\"\\\\s+\" + cls + \"\\\\s+\"),\n        className;\n    if (el && this.hasClass(el, cls)) {\n        className = \" \" + el.className + \" \";\n        if (el.classList) {\n            el.classList.remove(cls);\n        } else {\n            el.className = className.replace(reg, \" \").trim();\n        }\n    }\n    return this;\n};\n\ndom.toggleClass = function (el, cls) {\n    let reg = new RegExp(\"\\\\s+\" + cls + \"\\\\s+\"),\n        className;\n    if (el) {\n        if (el.classList) {\n            el.classList.toggle(cls);\n        } else {\n            className = \" \" + el.className + \" \";\n            cls = \" \" + cls + \" \";\n            if (className.indexOf(cls) > -1) {\n                el.className = className.replace(reg, \" \").trim();\n            } else {\n                el.className += \" \" + cls;\n            }\n        }\n    }\n    return this;\n};\n\ndom.css = function (el, prop, val) {\n    let css = \"\";\n    if (!isUndefined(val)) {\n        el.style[prop] = val;\n    } else {\n        if (isObject(prop)) {\n            for (val in prop) {\n                css += val + \":\" + prop[val] + \";\";\n            }\n            el.style.cssText += css;\n        } else if (isString(prop)) {\n            return getComputedStyle(el).getPropertyValue(prop);\n        }\n    }\n    return this;\n};\n\ndom.fullScreen = function (el, exit) {\n    let fsApi = this.fsApi;\n    if (fsApi) {\n        exit ? doc[fsApi.exitFullscreen]() : el[fsApi.requestFullscreen]();\n    } else {\n        this.fullPage(el, exit);\n    }\n    return this;\n};\n\n//不支持全屏的浏览器，在网页内铺满窗口\ndom.fullPage = function (el, exit) {\n    if (exit) {\n        dom.removeClass(el, \"rplayer-fixed\");\n    } else {\n        dom.addClass(el, \"rplayer-fixed\");\n    }\n};\n\n//选择元素， 只选中一个\ndom.selectElement = function (selector, context) {\n    let ret,\n        reg = /^#[^>~+\\[\\]\\s:]+$/; //匹配id选择器\n    context = context || doc;\n    if (selector) {\n        if (selector.nodeName || isWindow(selector)) {\n            ret = selector;\n        } else if (typeof selector === \"string\") {\n            if (reg.test(selector)) {\n                ret = doc.getElementById(selector.substring(1));\n            } else {\n                ret = context.querySelector(selector);\n            }\n        }\n    }\n    return ret;\n};\n\n//创建元素\ndom.createElement = function (name, attrs) {\n    let el = doc.createElement(name),\n        key;\n    if (isObject(attrs)) {\n        for (key in attrs) {\n            el.setAttribute(key, attrs[key]);\n        }\n    }\n    return el;\n};\n\n//添加元素事件\ndom._on = function (el, type, callback) {\n    let id = el.guid,\n        handler;\n    if (!id) {\n        id = guid++;\n        Object.defineProperty(el, \"guid\", {\n            value: id\n        });\n    }\n    handler = this.handlers[id];\n    if (!handler) {\n        handler = this.handlers[id] = {};\n        handler[type] = [];\n    } else if (!handler[type]) {\n        handler[type] = [];\n    }\n    handler[type].push(callback);\n    el.addEventListener(type, callback);\n};\n\ndom.on = function (selector, type, callback, off) {\n    let el = this.selectElement(selector),\n        i;\n    if (el) {\n        if (type) {\n            //添加多个事件，以空格分开\n            type = type.split(\" \");\n            i = type.length;\n            if (isFunction(callback)) {\n                for (; i--;) {\n                    let t = type[i];\n                    off ? this._off(el, t, callback) :\n                        this._on(el, t, callback);\n                }\n            } else if(off){\n                for (; i--;) {\n                    this._off(el, type[i]);\n                }\n            }\n        } else if(off) {\n            this._off(el);\n        }\n\n    }\n    return this;\n};\n\n//移除元素的事件\ndom._off = function (el, type, callback) {\n    let handlers = this.handlers[el.guid];\n    if (handlers) {\n        if (type && (handlers = handlers[type])) {\n            if (callback) {\n                for (let i = 0, len = handlers.length; i < len; i++ ) {\n                    if (handlers[i] === callback) {\n                        handlers.splice(i, 1);\n                        el.removeEventListener(type, callback);\n                        break;\n                    }\n                }\n            } else {\n                handlers.forEach(function (fn) {\n                    el.removeEventListener(type, fn);\n                });\n                dom.handlers[type] = [];\n            }\n        } else if (!type) {//如果没有type, 则移除该元素的所有事件\n            for (let key in handlers) {\n                this._off(el, key);\n            }\n        }\n    }\n};\n\ndom.off = function (selector, type, callback) {\n    return this.on(selector, type, callback, true);\n};\n\ndom.once = function (selector, type, callback) {\n    let cb, _this = this;\n    if (isFunction(callback)) {\n        cb = function () {\n            let args = Array.prototype.slice.call(arguments);\n            callback.apply(this, args);\n            _this.off(selector, type, cb);\n        };\n        this.on(selector, type, cb);\n    }\n    return this;\n};\n\ndom.fsApi = (function () {\n    let fullScreenApi = [\n            //W3C\n            [\n                \"requestFullscreen\",\n                \"exitFullscreen\",\n                \"fullscreenElement\",\n                \"fullscreenEnabled\",\n                \"fullscreenchange\",\n                \"fullscreenerror\"\n            ],\n            // WebKit\n            [\n                \"webkitRequestFullscreen\",\n                \"webkitExitFullscreen\",\n                \"webkitFullscreenElement\",\n                \"webkitFullscreenEnabled\",\n                \"webkitfullscreenchange\",\n                \"webkitfullscreenerror\"\n            ],\n            // Firefox\n            [\n                \"mozRequestFullScreen\",\n                \"mozCancelFullScreen\",\n                \"mozFullScreenElement\",\n                \"mozFullScreenEnabled\",\n                \"mozfullscreenchange\",\n                \"mozfullscreenerror\"\n            ],\n            // IE\n            [\n                \"msRequestFullscreen\",\n                \"msExitFullscreen\",\n                \"msFullscreenElement\",\n                \"msFullscreenEnabled\",\n                \"MSFullscreenChange\",\n                \"MSFullscreenError\"\n            ]\n\n        ],\n        fsApi = null,\n        defApi = fullScreenApi[0],\n        tmp, support;\n    for (let i = 0, len = fullScreenApi.length; i < len; i++) {\n        tmp = fullScreenApi[i];\n        if (tmp[1] in document) {\n            support = true;\n            break;\n        }\n    }\n\n    if (support) {\n        fsApi = {};\n        tmp.forEach(function (prop, i) {\n            fsApi[defApi[i]] = prop;\n        });\n    }\n    return fsApi;\n})();\n\nexport default dom;","import {isFunction, isString} from \"./global.js\";\n\nfunction CEvent(type) {\n    this.type = type;\n    this.data = null;\n    this.timeStamp = 0;\n}\n\nfunction Subscriber() {\n    this.handlers = {};\n}\n\nSubscriber.prototype = {\n    constructor: Subscriber,\n    on: function (type, fn) {\n        if (isFunction(fn)) {\n            if (!isString(type)) {\n                type = String(type);\n            }\n            if (!this.handlers[type]) {\n                this.handlers[type] = [];\n            }\n            this.handlers[type].push(fn);\n        }\n        return this;\n    },\n    off: function (type, fn) {\n        let  h = this.handlers[type];\n        if (h) {\n            if (isFunction(fn)) {\n                for (let i = h.length; i--;) {\n                    if (h[i] === fn) {\n                        h.splice(i, 1);\n                        break;\n                    }\n                }\n            } else if (!fn){\n                this.handlers[type] = [];\n            }\n        }\n        return this;\n    },\n    once: function (type, fn) {\n        if (isFunction(fn)) {\n            let self = this,\n                f = function () {\n                    fn.apply(this, arguments);\n                    self.off(type, f);\n                };\n            this.on(type, f);\n        }\n    },\n    trigger: function (type) {\n        let args = Array.prototype.slice.call(arguments, 1),\n            h = this.handlers[type],\n            e;\n        if (h) {\n            e = new CEvent(type);\n            e.data = args;\n            e.timeStamp = Date.now();\n            args = [e].concat(args);\n            for (let i = h.length; i--; ) {\n                h[i].apply(this, args);\n            }\n        }\n        return this;\n    }\n};\n\nexport default Subscriber;","import Subscriber from \"./subscriber.js\"\nimport {doc, isUndefined} from \"./global.js\";\nimport dom from \"./dom.js\";\n\nfunction Slider(vertical) {\n    Subscriber.call(this);\n    this.vertical = isUndefined(vertical) ? false : !!vertical;\n    this.moveDis = this.pos = null;\n    this.moving = false;\n}\n\nlet proto = Slider.prototype = Object.create(Subscriber.prototype);\nproto.constructor = Slider;\n\nproto.getPosition = function () {\n    let parent = this.el.parentNode,\n        rect = parent.getBoundingClientRect(),\n        pos = getComputedStyle(this.el);\n    return {\n        width: parseFloat(pos.width),\n        height: parseFloat(pos.height),\n        origLeft: parseFloat(pos.left),\n        origTop: parseFloat(pos.top),\n        maxX: rect.width,\n        maxY: rect.height\n    }\n};\n\nproto.updateHPosition = function (val, scale) {\n    scale && (val = val * 100 + \"%\");\n    dom.css(this.bar, \"width\", val)\n        .css(this.el, \"left\", val);\n    return this;\n};\n\nproto.updateVPosition = function (val, scale) {\n    scale && (val = val * 100 + \"%\");\n    dom.css(this.bar, \"height\", val)\n        .css(this.el, \"bottom\", val);\n    return this;\n};\n\nproto.mouseDown = function (evt) {\n    //只有按鼠标左键时处理(evt.button=0)\n    if (!evt.button) {\n        let x = evt.clientX,\n            y = evt.clientY,\n            pos = this.getPosition(),\n            mouseMove = this.getMoveCallback().bind(this);\n        this.pos = {\n            width: pos.width,\n            height: pos.height,\n            offsetX: x - pos.origLeft,\n            offsetY: y - pos.origTop,\n            maxX: pos.maxX,\n            maxY: pos.maxY\n        };\n        dom.addClass(this.el, \"rplayer-moving\")\n            .on(doc, \"mousemove\", mouseMove)\n            .on(doc, \"mouseup\", this.mouseUp.bind(this))\n    }\n};\n\nproto.moveVertical = function (x, y) {\n    let distance;\n    distance = this.pos.maxY - (y - this.pos.offsetY) - this.pos.height;\n    distance = distance < 0 ? 0 : distance > this.pos.maxY ? this.pos.maxY : distance;\n    distance = distance / this.pos.maxY;\n    this.updateVPosition(distance, true);\n    return distance;\n};\n\nproto.moveHorizontal = function (x) {\n    let distance;\n    distance = x - this.pos.offsetX;\n    distance = distance < 0 ? 0 : distance > this.pos.maxX ? this.pos.maxX : distance;\n    distance = distance / this.pos.maxX;\n    this.updateHPosition(distance, true);\n    return distance;\n};\n\nproto.mouseMove = function (evt, fn) {\n    let x = evt.clientX,\n        y = evt.clientY,\n        distance = fn.call(this, x, y);\n    this.moving = true;\n    this.trigger(\"slider.moving\", this.moveDis = distance);\n};\n\nproto.getMoveCallback = function () {\n    return this.vertical ?\n        evt => this.mouseMove(evt, this.moveVertical) :\n        evt => this.mouseMove(evt, this.moveHorizontal);\n};\n\nproto.mouseUp = function () {\n    dom.off(doc, \"mousemove moseup\")\n        .removeClass(this.el, \"rplayer-moving\");\n    this.moving && this.trigger(\"slider.move.done\", this.moveDis);\n};\n\nproto.clickTrack = function (evt) {\n    //移动滑块鼠标释放时会触发父元素点击事件,可能会导致鼠标释放后滑块位置改变\n    //如果移动滑块则点击事件不做处理\n    if (this.moving) {\n        this.moving = false;\n        return;\n    }\n    let rect = this.track.getBoundingClientRect(),\n        x = evt.clientX,\n        y = evt.clientY,\n        eType = \"slider.moving\";\n    if (this.vertical) {\n        rect = (rect.height - y + rect.top) / rect.height;\n        this.updateVPosition(rect, true);\n    } else {\n        rect = (x - rect.left) / rect.width;\n        eType = \"slider.move.done\";\n        this.updateHPosition(rect, true);\n    }\n    this.trigger(eType, rect);\n};\n\nproto.initEvent = function () {\n    dom.on(this.el, \"mousedown\", this.mouseDown.bind(this))\n        .on(this.track, \"click\", this.clickTrack.bind(this))\n};\n\nproto.destroy = function () {\n    dom.off(this.track)\n        .off(this.el);\n    delete this.track;\n    delete this.bar;\n    delete this.el;\n};\n\nproto.init = function (target, before) {\n    let cls = {\n        track: \"rplayer-video-track\",\n        bar: \"rplayer-video-progress\",\n        slider: \"rplayer-video-slider\"\n    };\n    if (this.vertical) {\n        cls = {\n            track: \"rplayer-volume-progress\",\n            bar: \"rplayer-volume-value\",\n            slider: \"rplayer-volume-slider\"\n        }\n    }\n    this.track = dom.createElement(\"div\", {class: `rplayer-progress ${cls.track}`});\n    this.bar = dom.createElement(\"div\", {class: `rplayer-bar ${cls.bar}`});\n    this.el = dom.createElement(\"div\", {class: `rplayer-slider ${cls.slider}`});\n    this.track.appendChild(this.bar);\n    this.track.append(this.el);\n    before ? target.insertBefore(this.track, before) : target.appendChild(this.track);\n    this.initEvent();\n};\n\nexport default Slider;","let tpl = '<div class=\"rplayer-loading rplayer-hide\"></div>' +\n          '<div class=\"rplayer-popup-info rplayer-popup-volume-info rplayer-hide\">10:00</div>' +\n          '<div class=\"rplayer-error rplayer-hide\"><div class=\"rplayer-msg\">出错了</div></div>',\n    controls = '<div class=\"rplayer-popup-info rplayer-popup-video-info rplayer-hide\">10:00</div>' +\n        '        <div class=\"rplayer-progress-panel\">' +\n        '            <div class=\"rplayer-bufferd-bar\"></div>' +\n        '            <div class=\"rplayer-mark rplayer-hide\"></div>' +\n        '        </div>' +\n        '        <div class=\"rplayer-play-control rplayer-lf\">' +\n        '            <button type=\"button\" class=\"rplayer-play-btn\"></button>' +\n        '            <span class=\"rplayer-time-info\">' +\n        '               <span class=\"rplayer-current-time\">00:00</span>/' +\n        '               <span class=\"rplayer-total-time\">00:00</span>' +\n        '             </span>' +\n        '        </div>' +\n        '        <div class=\"rplayer-settings rplayer-rt\">' +\n        '            <button type=\"button\" class=\"rplayer-fullscreen-btn rplayer-rt\"></button>' +\n        '            <div class=\"rplayer-audio-control rplayer-rt\">' +\n        '                <button type=\"button\" class=\"rplayer-audio-btn volume-1\"></button>' +\n        '                <div class=\"rplayer-volume-popup rplayer-hide\">' +\n        '                    <span class=\"rplayer-current-volume\">12</span>' +\n        '                    <button class=\"rplayer-mute volume-1\"></button>' +\n        '                </div>' +\n        '            </div>' +\n        '        </div>';\nexport {tpl, controls};","import dom from \"./dom.js\";\nimport {doc, isUndefined} from \"./global.js\";\n\nfunction VideoControl(config) {\n    this.config = config;\n};\n\nVideoControl.prototype = {\n    constructor: VideoControl,\n    setVolume: function (volume) {\n        //音量只能设置0-1的值\n        if (volume > 1) {\n            volume = volume / 100;\n        }\n        volume > 1 && (volume = 1);\n        this.el.volume = volume;\n        this.el.muted = !volume;\n        return this;\n    },\n    getVolume: function () {\n        return Math.floor(this.el.volume * 100);\n    },\n    mute: function (mute) {\n        this.el.muted = isUndefined(mute) ? true : !!mute;\n        return this;\n    },\n    isMuted: function () {\n        return this.el.muted;\n    },\n    autoPlay: function (play) {\n        this.el.autoplay = !!play;\n        return this;\n    },\n    isAutoPlay: function () {\n        return this.el.autoplay;\n    },\n    play: function (play) {\n        if (isUndefined(play) || !!play) {\n            this.el.play();\n        } else {\n            this.el.pause();\n        }\n        return this;\n    },\n    isPaused: function () {\n        return this.el.paused;\n    },\n    isError: function () {\n        let err = this.el.error;\n        return err ? err.code : err;\n    },\n    loop: function (isLoop) {\n        this.el.loop = !!isLoop;\n        return this;\n    },\n    isLoop: function () {\n        return this.el.loop;\n    },\n    setPoster: function (poster) {\n        this.el.poster = poster;\n        return this;\n    },\n    setPreload: function (preload) {\n        this.el.preload = preload;\n        return this;\n    },\n    setCurrentTime: function (time, scale) {\n        let duration = this.getDuration();\n        if (scale) {\n            time = duration * time;\n        }\n        this.el.currentTime = time;\n        return this;\n    },\n    getCurrentTime: function () {\n        return this.el.currentTime;\n    },\n    getDuration: function () {\n        return this.el.duration;\n    },\n    getPlayedPercentage: function () {\n        return this.getCurrentTime() / this.getDuration();\n    },\n    getBuffered: function (percent) {\n        let buffered = this.el.buffered,\n            len = buffered.length;\n        if (percent) {\n            //缓冲的百分比\n            return len ? buffered = buffered.end(len - 1) / this.getDuration() * 100 : null;\n        }\n        return buffered;\n    },\n    getReadyState: function () {\n        return this.el.readyState;\n    },\n    showControls: function () {\n        this.el.controls = true;\n        return this;\n    },\n    convertTime: function (time) {\n        let changeLen = num => num < 10 ? \"0\" + num : num.toString(),\n            str, h, m, s;\n        time = Math.ceil(time);\n        if (time <= 0) {\n            str = \"00:00\";\n        } else if (time < 60) {\n            str = \"00:\" + changeLen(time);\n        } else if (time < 3600) {\n            m = Math.floor(time / 60);\n            s = time % 60;\n            str = changeLen(m) + \":\" + changeLen(s);\n        } else {\n            h = Math.floor(time / 3600);\n            str = time % 3600;\n            m = Math.floor(str / 60);\n            s = str % 60;\n            str = changeLen(h) + \":\" + changeLen(m) + \":\" + changeLen(s);\n        }\n        return str;\n    },\n    reload: function () {\n        this.el.load();\n        return this;\n    },\n    changeSource: function (src) {\n        let paused = this.isPaused();\n        if (this.source !== src) {\n            this.source = src;\n            this.initSource(src);\n        }\n        if (!paused) {\n            this.play(true);\n        }\n        return this;\n    },\n    getSource: function () {\n        return this.el.currentSrc;\n    },\n    initSource: function (source) {\n        let frag = doc.createDocumentFragment();\n        if (typeof source === \"string\") {\n            this.el.src = source;\n        } else if (Array.isArray(source)) {\n            this.el.innerHTML = \"\";\n            source.forEach(function (src) {\n                let sourceEl = dom.createElement(\"source\", {src: src});\n                frag.appendChild(sourceEl);\n            });\n            this.el.appendChild(frag);\n        }\n        return this;\n    },\n    init: function () {\n        let video = dom.createElement(\"video\"),\n            text = doc.createTextNode(this.config.msg.toString());\n        this.el = video;\n        this.source = this.config.source;\n        video.appendChild(text);\n        dom.addClass(this.el, \"rplayer-video\");\n        this.initSource(this.source)\n            .autoPlay(this.config.autoPlay)\n            .loop(this.config.loop)\n            .setPoster(this.config.poster)\n            .setPreload(this.config.preload)\n            .setVolume(this.config.defaultVolume);\n        return this.el;\n    }\n};\n\nexport default VideoControl;","import dom from \"./dom.js\";\nimport {doc, DEFAULT_OPTIONS, ERROR_TYPE, KEY_MAP, isObject, isUndefined} from \"./global.js\";\nimport Subscriber from \"./subscriber.js\";\nimport Slider from \"./slider.js\";\nimport {tpl, controls} from \"./template.js\";\nimport VideoControl from \"./video_control.js\";\n\nlet hideVolumePopTimer = null,\n    hideControlsTimer = null;\nconst HIDE_CLASS = \"rplayer-hide\";\nconst DEFAULT_HEIGHT = 500;\n\nfunction RPlayer(selector, options) {\n    let target = dom.selectElement(selector),\n        config;\n    Subscriber.call(this);\n    if (isObject(options)) {\n        config = {\n            autoPlay: !!options.autoPlay,\n            defaultVolume: Math.abs(parseInt(options.defaultVolume)) || DEFAULT_OPTIONS.defaultVolume,\n            loop: !!options.loop,\n            msg: options.msg || DEFAULT_OPTIONS.msg,\n            poster: options.poster || DEFAULT_OPTIONS.poster,\n            preload: options.preload || DEFAULT_OPTIONS.preload,\n            source: options.source\n        };\n    } else {\n        config = DEFAULT_OPTIONS;\n    }\n    if (!config.source) {\n        new Error(\"没有设置视频链接\");\n    }\n    if (!target) {\n        throw new Error(\"未选中任何元素\");\n    }\n    this.target = target;\n    this.playedTime = 0;\n    this.controlsDisabled = false;\n    this.video = new VideoControl(config);\n    this.controls = isUndefined(options.controls) ? true : !!options.controls;\n    this.useNativeControls = isUndefined(options.useNativeControls) ? false : options.useNativeControls;\n}\n\nlet fn = RPlayer.prototype = Object.create(Subscriber.prototype);\nfn.constructor = RPlayer;\n\nfn.toggleFullScreen = function () {\n    if (this.isFullScreen = !this.isFullScreen) {\n        this.requestFullScreen();\n    } else {\n        this.exitFullScreen();\n    }\n};\n\nfn.requestFullScreen = function () {\n    this.isFullScreen = true;\n    dom.fullScreen(this.container)\n        .addClass(this.fullScreenBtn, \"rplayer-fullscreen\")\n        .addClass(this.container, \"rplayer-fullscreen\");\n};\n\nfn.exitFullScreen = function () {\n    this.isFullScreen = false;\n    dom.fullScreen(this.container, true)\n        .removeClass(this.fullScreenBtn, \"rplayer-fullscreen\")\n        .removeClass(this.container, \"rplayer-fullscreen\");\n};\n\nfn.initFullScreenEvent = function () {\n    let fsApi = dom.fsApi;\n    if (fsApi) {\n        dom.on(doc, fsApi.fullscreenchange, () => {\n            if (!doc[fsApi.fullscreenElement]) {\n                this.exitFullScreen();\n            }\n        }).on(doc, fsApi.fullscreenerror, () => {\n            this.exitFullScreen();\n        });\n    }\n    return this;\n};\n\nfn.playEnd = function () {\n    this.trigger(\"play.end\");\n    return this.video.isLoop() ? this.play() :\n        this.pause();\n};\n\nfn.showError = function () {\n    let el = this.errorMsg.parentNode;\n    this.controlsDisabled = true;\n    dom.removeClass(el, HIDE_CLASS);\n    this.hideLoading()\n        .hideControls();\n    return this;\n};\n\nfn.hideError = function () {\n    let el = this.errorMsg.parentNode;\n    this.controlsDisabled = false;\n    dom.addClass(el, HIDE_CLASS);\n    return this;\n};\n\nfn.error = function () {\n    let err = this.video.isError(),\n        currentTime = this.video.getCurrentTime(),\n        msg;\n    //出现错误保存当前播放进度，恢复后从当前进度继续播放\n    this.playedTime = currentTime;\n    err = ERROR_TYPE[err];\n    switch (err) {\n        case \"MEDIA_ERR_ABORTED\":\n            msg = \"出错了\";\n            break;\n        case \"MEDIA_ERR_NETWORK\":\n            msg = \"网络错误或视频地址无效\";\n            break;\n        case \"MEDIA_ERR_DECODE\":\n        case \"MEDIA_ERR_SRC_NOT_SUPPORTED\":\n            msg = \"解码失败,不支持的视频格式或地址无效\";\n    }\n    msg += \",点击刷新\";\n    this.errorMsg.innerHTML = msg;\n    this.showError();\n};\n\nfn.refresh = function () {\n    this.video.reload();\n    this.hideError();\n};\n\nfn.initPlayEvent = function () {\n    let videoEl = this.video.el;\n    dom.on(videoEl, \"loadstart stalled\", evt => {\n        if (this.playedTime && evt.type === \"loadstart\") {\n            //出错了从出错的地方开始播放,重置播放时间\n            this.video.setCurrentTime(this.playedTime);\n            this.playedTime = 0;\n        }\n        this.showLoading()\n            .disableControls();\n    })\n        .on(videoEl, \"progress\", this.progress.bind(this))\n        .on(videoEl, \"canplay seeked\", this.hideLoading.bind(this))\n        .on(videoEl, \"ended\", this.playEnd.bind(this))\n        .on(videoEl, \"error\", this.error.bind(this))\n        .on(videoEl, \"contextmenu\", evt => evt.preventDefault());\n\n    return this;\n};\n\nfn.toggleVolumePopupInfo = function (volume) {\n    //当音量设置面板隐藏是才显示当前音量\n    if (dom.hasClass(this.volumePopup, HIDE_CLASS)) {\n        clearTimeout(hideVolumePopTimer);\n        this.volumePopupInfo.innerHTML = \"当前音量: \" + volume;\n        this.currentVolume.innerHTML = volume;\n        dom.removeClass(this.volumePopupInfo, HIDE_CLASS);\n        hideVolumePopTimer = setTimeout(() => dom.addClass(this.volumePopupInfo, HIDE_CLASS), 3000);\n    }\n    return this;\n};\n\nfn.keyDown = function (evt) {\n    //控制条被禁用，不做处理\n    if (this.controlsDisabled) return;\n    let key = evt.key.toLowerCase(),\n        regUpOrDown = /(?:up)|(?:down)/,\n        regLeftOrRight = /(?:left)|(?:right)/,\n        regEsc = /esc/,\n        regSpace = /\\s|(?:spacebar)/,\n        tmp = KEY_MAP[key];\n    if (tmp) {\n        if (regLeftOrRight.test(key)) {\n            this.updateProgressByStep(tmp);\n        } else if (regUpOrDown.test(key)) {\n            this.updateVolumeByStep(tmp);\n        } else if (regEsc.test(key)) {\n            this.exitFullScreen();\n        } else if (regSpace.test(key)) {\n            this.togglePlay();\n        }else {\n            this.toggleFullScreen();\n        }\n    }\n    evt.preventDefault();\n};\n\nfn.handleClick = function (evt) {\n    let tgt = evt.target;\n    switch (tgt) {\n        case this.showVolumePopBtn:\n            this.toggleVolumeSettingsPanel(evt);\n            break;\n        case this.muteBtn:\n            this.mute();\n            break;\n        case this.playBtn:\n        case this.video.el:\n            this.togglePlay();\n            break;\n        case this.fullScreenBtn:\n            this.toggleFullScreen();\n            break;\n        case this.errorMsg:\n            this.refresh();\n            break;\n    }\n};\n\nfn.initEvent = function () {\n    dom.on(this.container, \"click\", this.handleClick.bind(this));\n    this.initPlayEvent();\n    return this;\n};\n\nfn.updateProgress = function () {\n    //在拖动滑块改变播放进度时候不改变播放进度条位置，只改变播放的当前时间\n    //防止影响滑块以及进度条的位置\n    let progress = this.video.getPlayedPercentage();\n    if (!this.videoSlider.moving) {\n        this.videoSlider.updateHPosition(progress, true);\n    }\n    this.updateTime(true);\n};\n\nfn.updateVolume = function (volume, scale) {\n    scale && (volume *= 100);\n    volume = Math.floor(volume);\n    this.video.setVolume(volume);\n    this.updateVolumeStyle(volume);\n    return this;\n};\n\nfn.mute = function () {\n    let volume = this.video.getVolume();\n    //点击静音键\n    if (this.video.isMuted()) {\n        this.video.mute(false);\n    } else {\n        this.video.mute(true);\n        volume = 0;\n    }\n    this.updateVolumeStyle(volume);\n};\n\nfn.updateVolumeByStep = function (step) {\n    let volume = this.video.getVolume();\n    volume += step;\n    volume = volume > 100 ? 100 : volume < 0 ? 0 : volume;\n    this.updateVolume(volume);\n    this.toggleVolumePopupInfo(volume);\n};\n\nfn.updateVolumeStyle = function (volume) {\n    let cls = this.showVolumePopBtn.className,\n        reg = /volume-[^\\s]*/;\n    cls = cls.replace(reg, \"\");\n    if (!volume) {\n        cls += \"volume-mute\";\n    } else if (volume <= 33) {\n        cls += \"volume-1\";\n    } else if (volume <= 66) {\n        cls += \"volume-2\";\n    } else {\n        cls += \"volume-3\";\n    }\n    this.showVolumePopBtn.className = this.muteBtn.className = cls;\n    this.currentVolume.innerHTML = volume;\n    this.volumeSlider.updateVPosition(volume + \"%\");\n    return this;\n};\n\n//点击显示/隐藏设置音量面板\nfn.toggleVolumeSettingsPanel = function (evt) {\n    if (!this.controlsDisabled) {\n        dom.toggleClass(this.volumePopup, HIDE_CLASS);\n    }\n    //阻止冒泡到document, document点击事件点击面板外任意地方隐藏面板，如不阻止冒泡则显示不出来\n    evt.stopPropagation();\n};\n\nfn.hideVolumeSettingsPanel = function () {\n    dom.addClass(this.volumePopup, HIDE_CLASS);\n    return this;\n};\n\nfn.initVolumeEvent = function () {\n    dom.on(this.volumePopup, \"mouseleave\", this.hideVolumeSettingsPanel.bind(this))\n        .on(doc, \"click\", evt => {\n            let tgt = evt.target;\n            //点击页面其他地方（点击的不是音量设置面板或者面板内的元素）则隐藏音量面板\n            if (tgt !== this.volumePopup && !this.volumePopup.contains(tgt)) {\n                this.hideVolumeSettingsPanel();\n            }\n        });\n    return this;\n};\n\n\nfn.togglePlay = function () {\n    if (!this.controlsDisabled) {\n        this.video.isPaused() ? this.play(): this.pause();\n    }\n};\n\nfn.play = function () {\n    dom.addClass(this.playBtn, \"paused\");\n    this.video.play(true);\n    return this;\n};\n\nfn.pause = function () {\n    this.video.play(false);\n    dom.removeClass(this.playBtn, \"paused\");\n    return this;\n};\n\n//鼠标在进度条上移动显示时间信息\nfn.showPopupTimeInfo = function (evt) {\n    let duration = this.video.getDuration(),\n        popup = this.videoPopupTime,\n        mark = this.mark;\n    if (duration) {\n        dom.removeClass(popup, HIDE_CLASS)\n            .removeClass(mark, HIDE_CLASS);\n        let rect = this.progressPanel.getBoundingClientRect(),\n            distance = evt.clientX - rect.left,\n            width = popup.offsetWidth,\n            left = distance - width / 2;\n        width = rect.width - width;\n        left = left < 0 ? 0 : left > width ? width : left;\n        width = distance / rect.width;\n        popup.innerHTML = this.video.convertTime(width * duration);\n        dom.css(popup, \"left\", left + \"px\");\n        dom.css(mark, \"left\", width * 100 + \"%\");\n    }\n    return this;\n};\n\nfn.hidePopupTimeInfo = function () {\n    dom.addClass(this.videoPopupTime, HIDE_CLASS)\n        .addClass(this.mark, HIDE_CLASS);\n    return this;\n};\n\nfn.showLoading = function () {\n    dom.removeClass(this.loading, HIDE_CLASS);\n    return this;\n};\n\nfn.hideLoading = function () {\n    dom.addClass(this.loading, HIDE_CLASS);\n    return this;\n};\n\nfn.progress = function () {\n    let b = this.video.getBuffered(true);\n    this.bufferedBar && dom.css(this.bufferedBar, \"width\",  b + \"%\");\n    if (this.video.getReadyState() < 3) {\n        this.showLoading();\n    }\n};\n\nfn.updateProgressByStep = function (step) {\n    let currentTime = this.video.getCurrentTime(),\n        duration = this.video.getDuration();\n    currentTime += step;\n    currentTime = currentTime < 0 ? 0 : currentTime > duration ? duration : currentTime;\n    this.video.setCurrentTime(currentTime);\n    this.updateProgress();\n};\n\nfn.updateTime = function (current) {\n    let time = this.video.getDuration(),\n        tmp = this.totalTime;\n    if (current) {\n        tmp = this.currentTime;\n        time = this.video.getCurrentTime();\n    }\n    tmp.innerHTML = this.video.convertTime(time);\n    return this;\n};\n\nfn.updateMetaInfo = function () {\n    if (this.video.isAutoPlay()) {\n        this.play();\n    }\n    this.updateTime()\n        .enableControls();\n};\n\nfn.hideControls = function () {\n    dom.addClass(this.controlsPanel, HIDE_CLASS);\n    return this;\n};\n\nfn.showControls = function () {\n    let err = this.video.isError();\n    //出错了则不显示控制条\n    if (!err) {\n        clearTimeout(hideControlsTimer);\n        dom.removeClass(this.controlsPanel, HIDE_CLASS);\n        if (dom.hasClass(this.volumePopup, HIDE_CLASS)) {\n            hideControlsTimer = setTimeout(() => this.hideControls(), 5000);\n        }\n    }\n    return this;\n};\n\nfn.enableControls = function () {\n    dom.removeClass(this.controlsPanel, \"rplayer-disabled\");\n    this.controlsDisabled = false;\n    return this;\n};\n\nfn.disableControls = function () {\n    dom.addClass(this.controlsPanel, \"rplayer-disabled\");\n    this.controlsDisabled = true;\n    return this;\n};\n\nfn.initControlEvent = function () {\n    let videoEl = this.video.el;\n    //滑动改变进度/点击进度条改变进度\n    this.videoSlider.on(\"slider.move.done\", (evt, distance) => {\n        this.video.setCurrentTime(distance, true);\n        this.updateTime(true);\n    });\n    this.volumeSlider.on(\"slider.moving\",  (evt, distance) => {\n       this.updateVolume(distance, true);\n    });\n    dom.on(this.progressPanel, \"mouseover mousemove\", this.showPopupTimeInfo.bind(this))\n        .on(this.progressPanel, \"mouseout\", this.hidePopupTimeInfo.bind(this))\n        .on(this.container, \"keydown\", this.keyDown.bind(this))\n        .on(this.container, \"mousemove\", this.showControls.bind(this))\n        .on(videoEl, \"loadedmetadata\", this.updateMetaInfo.bind(this))\n        .on(videoEl, \"timeupdate\", this.updateProgress.bind(this))\n        .on(videoEl, \"dblclick\", this.toggleFullScreen.bind(this))\n        .on(videoEl, \"seeking\", this.showLoading.bind(this));\n    return this.initVolumeEvent()\n        .initFullScreenEvent();\n};\n\nfn.offEvent = function () {\n    dom.off(doc)\n        .off(this.volumePopup)\n        .off(this.container)\n        .off(this.video.el);\n    return this;\n};\n\nfn.removeProp = function () {\n    for (let key in this) {\n        delete this[key];\n    }\n    return this;\n};\n\nfn.destroy = function () {\n    if (this.container) {\n        this.videoSlider.destroy();\n        this.volumeSlider.destroy();\n        this.offEvent()\n            .removeProp();\n    }\n    return this;\n};\n\nfn.initEssentialElements = function () {\n    let context = this.container;\n    this.loading = dom.selectElement(\".rplayer-loading\", context);\n    this.errorMsg = dom.selectElement(\".rplayer-msg\", context);\n    return this;\n};\n\nfn.initElements = function () {\n    let context = this.container;\n    this.playBtn = dom.selectElement(\".rplayer-play-btn\", context);\n    this.progressPanel = dom.selectElement(\".rplayer-progress-panel\", context);\n    this.videoPopupTime = dom.selectElement(\".rplayer-popup-video-info\", context);\n    this.currentTime = dom.selectElement(\".rplayer-current-time\", context);\n    this.totalTime = dom.selectElement(\".rplayer-total-time\", context);\n    this.bufferedBar = dom.selectElement(\".rplayer-bufferd-bar\", context);\n    this.showVolumePopBtn = dom.selectElement(\".rplayer-audio-btn\", context);\n    this.muteBtn = dom.selectElement(\".rplayer-mute\", context);\n    this.volumePopup = dom.selectElement(\".rplayer-volume-popup\", context);\n    this.volumePopupInfo = dom.selectElement(\".rplayer-popup-volume-info\", context);\n    this.currentVolume = dom.selectElement(\".rplayer-current-volume\", context);\n    this.fullScreenBtn = dom.selectElement(\".rplayer-fullscreen-btn\", context);\n    this.mark = dom.selectElement(\".rplayer-mark\", context);\n    this.volumeSlider = new Slider(true);\n    this.videoSlider = new Slider();\n    this.videoSlider.init(this.progressPanel);\n    this.volumeSlider.init(this.volumePopup, this.muteBtn);\n    return this;\n};\n\nfn.getSource = function () {\n    return this.video.getSource();\n};\n\nfn.initControls = function () {\n    this.controlsPanel = dom.createElement(\"div\");\n    dom.addClass(this.controlsPanel, \"rplayer-controls\");\n    this.controlsPanel.innerHTML = controls;\n    this.container.appendChild(this.controlsPanel);\n    return this.initElements()\n        .updateVolumeStyle(this.video.getVolume())\n        .initControlEvent();\n};\n\nfn.initialize = function () {\n    if (!this.container) { //防止重复初始化\n        let container = dom.createElement(\"div\", {\n                tabIndex: 100 //使元素能够获取焦点\n            }),\n            height = parseInt(getComputedStyle(this.target).height);\n        this.isFullScreen = false;\n        container.innerHTML = tpl;\n        dom.css(container, \"height\", (height || DEFAULT_HEIGHT) + \"px\");\n        this.container = container;\n        container.appendChild(this.video.init());\n        dom.addClass(this.container, \"rplayer-container\");\n        //播放控制与原生控制二选一，如果设置了useNativeControls为true，则优先使用原生控制\n        if (this.controls && !this.useNativeControls) {\n            this.initControls();\n        } else if (this.useNativeControls) {\n            this.video.showControls();\n        }\n        this.target.appendChild(this.container);\n        this.initEssentialElements()\n            .initEvent();\n    }\n    return this;\n};\n\nfn.updateSource = function (src) {\n    this.video.changeSource(src);\n};\n\nRPlayer.init = function (selector, options) {\n    return new RPlayer(selector, options).initialize();\n};\n\nexport default RPlayer;"],"names":["DEFAULT_OPTIONS","ERROR_TYPE","TYPE","VOLUME_STEP","VIDEO_STEP","KEY_MAP","doc","document","isType","Object","prototype","toString","call","obj","type","isFunction","isObject","isString","isUndefined","isWindow","window","dom","guid","hasClass","el","cls","classList","contains","className","indexOf","addClass","add","removeClass","reg","RegExp","remove","replace","trim","toggleClass","toggle","css","prop","val","style","cssText","getComputedStyle","getPropertyValue","fullScreen","exit","fsApi","exitFullscreen","requestFullscreen","fullPage","selectElement","selector","context","ret","nodeName","test","getElementById","substring","querySelector","createElement","name","attrs","key","setAttribute","_on","callback","id","handler","defineProperty","handlers","push","addEventListener","on","off","i","split","length","t","_off","len","splice","removeEventListener","forEach","fn","once","cb","_this","args","Array","slice","arguments","apply","fullScreenApi","defApi","tmp","support","CEvent","data","timeStamp","Subscriber","String","h","self","f","e","Date","now","concat","Slider","vertical","moveDis","pos","moving","proto","create","constructor","getPosition","parent","parentNode","rect","getBoundingClientRect","parseFloat","width","height","left","top","updateHPosition","scale","bar","updateVPosition","mouseDown","evt","button","x","clientX","y","clientY","mouseMove","getMoveCallback","bind","origLeft","origTop","maxX","maxY","mouseUp","moveVertical","distance","offsetY","moveHorizontal","offsetX","trigger","clickTrack","track","eType","initEvent","destroy","init","target","before","class","slider","appendChild","append","insertBefore","tpl","controls","VideoControl","config","volume","muted","Math","floor","mute","play","autoplay","pause","paused","err","error","code","isLoop","loop","poster","preload","time","duration","getDuration","currentTime","getCurrentTime","percent","buffered","end","readyState","changeLen","num","str","m","s","ceil","load","src","isPaused","source","initSource","currentSrc","frag","createDocumentFragment","isArray","innerHTML","sourceEl","video","text","createTextNode","msg","autoPlay","setPoster","setPreload","setVolume","defaultVolume","hideVolumePopTimer","hideControlsTimer","HIDE_CLASS","DEFAULT_HEIGHT","RPlayer","options","abs","parseInt","Error","playedTime","controlsDisabled","useNativeControls","toggleFullScreen","isFullScreen","requestFullScreen","exitFullScreen","container","fullScreenBtn","initFullScreenEvent","fullscreenchange","fullscreenElement","fullscreenerror","playEnd","showError","errorMsg","hideLoading","hideControls","hideError","isError","refresh","reload","initPlayEvent","videoEl","setCurrentTime","showLoading","disableControls","progress","preventDefault","toggleVolumePopupInfo","volumePopup","volumePopupInfo","currentVolume","setTimeout","keyDown","toLowerCase","regUpOrDown","regLeftOrRight","regEsc","regSpace","updateProgressByStep","updateVolumeByStep","togglePlay","handleClick","tgt","showVolumePopBtn","toggleVolumeSettingsPanel","muteBtn","playBtn","updateProgress","getPlayedPercentage","videoSlider","updateTime","updateVolume","updateVolumeStyle","getVolume","isMuted","step","volumeSlider","stopPropagation","hideVolumeSettingsPanel","initVolumeEvent","showPopupTimeInfo","popup","videoPopupTime","mark","progressPanel","offsetWidth","convertTime","hidePopupTimeInfo","loading","b","getBuffered","bufferedBar","getReadyState","current","totalTime","updateMetaInfo","isAutoPlay","enableControls","controlsPanel","showControls","initControlEvent","offEvent","removeProp","initEssentialElements","initElements","getSource","initControls","initialize","updateSource","changeSource"],"mappings":";;;;;;AACA,IAAMA,kBAAkB;cACN,KADM;mBAED,EAFC;UAGV,KAHU;YAIR,EAJQ;aAKP,UALO;YAMR,EANQ;SAOX;CAPb;IASIC,aAAa;SACJ,mBADI;SAEJ,mBAFI;SAGJ,kBAHI;SAIJ;CAbb;IAeIC,OAAO;cACO,mBADP;YAEK,iBAFL;YAGK,iBAHL;WAII;CAnBf;IAqBIC,cAAc,CArBlB;IAsBIC,aAAa,EAtBjB;IAuBIC,UAAU;UACAF,WADA;eAEKA,WAFL;YAGE,CAACA,WAHH;iBAIO,CAACA,WAJR;YAKE,CAACC,UALH;iBAMO,CAACA,UANR;aAOGA,UAPH;kBAQQA,UARR;WASC,KATD;cAUI,QAVJ;SAWD,OAXC;gBAYM,OAZN;aAaG;CApCjB;AAsCA,IAAIE,MAAMC,QAAV;IACIC,SAAS,SAATA,MAAS;WAAQ;eAAOC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BC,GAA/B,MAAwCX,KAAKY,IAAL,CAA/C;KAAR;CADb;IAEIC,aAAaP,OAAO,UAAP,CAFjB;IAGIQ,WAAWR,OAAO,QAAP,CAHf;IAIIS,WAAWT,OAAO,QAAP,CAJf;IAKIU,cAAcV,OAAO,OAAP,CALlB;IAMIW,WAAW,SAAXA,QAAW;WAAON,OAAOA,IAAIO,MAAJ,KAAeP,GAA7B;CANf;;ACtCA,IAAIQ,MAAM;cACQ;CADlB;IAGIC,OAAO,CAHX;;AAKAD,IAAIE,QAAJ,GAAe,UAAUC,EAAV,EAAcC,GAAd,EAAmB;QAC1B,CAACD,EAAL,EAAS,OAAO,KAAP;QACLA,GAAGE,SAAP,EAAkB;eACPF,GAAGE,SAAH,CAAaC,QAAb,CAAsBF,GAAtB,CAAP;;;;WAIG,CAAC,MAAMD,GAAGI,SAAT,GAAqB,GAAtB,EAA2BC,OAA3B,CAAmC,MAAMJ,GAAN,GAAY,GAA/C,IAAsD,CAAC,CAA9D;CAPJ;;AAUAJ,IAAIS,QAAJ,GAAe,UAAUN,EAAV,EAAcC,GAAd,EAAmB;QAC1BD,MAAM,CAAC,KAAKD,QAAL,CAAcC,EAAd,EAAkBC,GAAlB,CAAX,EAAmC;YAC3BD,GAAGE,SAAP,EAAkB;eACXA,SAAH,CAAaK,GAAb,CAAiBN,GAAjB;SADJ,MAEO;eACAG,SAAH,IAAgB,MAAMH,GAAtB;;;WAGD,IAAP;CARJ;;AAWAJ,IAAIW,WAAJ,GAAkB,UAAUR,EAAV,EAAcC,GAAd,EAAmB;QAC7BQ,MAAM,IAAIC,MAAJ,CAAW,SAAST,GAAT,GAAe,MAA1B,CAAV;QACIG,kBADJ;QAEIJ,MAAM,KAAKD,QAAL,CAAcC,EAAd,EAAkBC,GAAlB,CAAV,EAAkC;oBAClB,MAAMD,GAAGI,SAAT,GAAqB,GAAjC;YACIJ,GAAGE,SAAP,EAAkB;eACXA,SAAH,CAAaS,MAAb,CAAoBV,GAApB;SADJ,MAEO;eACAG,SAAH,GAAeA,UAAUQ,OAAV,CAAkBH,GAAlB,EAAuB,GAAvB,EAA4BI,IAA5B,EAAf;;;WAGD,IAAP;CAXJ;;AAcAhB,IAAIiB,WAAJ,GAAkB,UAAUd,EAAV,EAAcC,GAAd,EAAmB;QAC7BQ,MAAM,IAAIC,MAAJ,CAAW,SAAST,GAAT,GAAe,MAA1B,CAAV;QACIG,kBADJ;QAEIJ,EAAJ,EAAQ;YACAA,GAAGE,SAAP,EAAkB;eACXA,SAAH,CAAaa,MAAb,CAAoBd,GAApB;SADJ,MAEO;wBACS,MAAMD,GAAGI,SAAT,GAAqB,GAAjC;kBACM,MAAMH,GAAN,GAAY,GAAlB;gBACIG,UAAUC,OAAV,CAAkBJ,GAAlB,IAAyB,CAAC,CAA9B,EAAiC;mBAC1BG,SAAH,GAAeA,UAAUQ,OAAV,CAAkBH,GAAlB,EAAuB,GAAvB,EAA4BI,IAA5B,EAAf;aADJ,MAEO;mBACAT,SAAH,IAAgB,MAAMH,GAAtB;;;;WAIL,IAAP;CAhBJ;;AAmBAJ,IAAImB,GAAJ,GAAU,UAAUhB,EAAV,EAAciB,IAAd,EAAoBC,GAApB,EAAyB;QAC3BF,MAAM,EAAV;QACI,CAACtB,YAAYwB,GAAZ,CAAL,EAAuB;WAChBC,KAAH,CAASF,IAAT,IAAiBC,GAAjB;KADJ,MAEO;YACC1B,SAASyB,IAAT,CAAJ,EAAoB;iBACXC,GAAL,IAAYD,IAAZ,EAAkB;uBACPC,MAAM,GAAN,GAAYD,KAAKC,GAAL,CAAZ,GAAwB,GAA/B;;eAEDC,KAAH,CAASC,OAAT,IAAoBJ,GAApB;SAJJ,MAKO,IAAIvB,SAASwB,IAAT,CAAJ,EAAoB;mBAChBI,iBAAiBrB,EAAjB,EAAqBsB,gBAArB,CAAsCL,IAAtC,CAAP;;;WAGD,IAAP;CAdJ;;AAiBApB,IAAI0B,UAAJ,GAAiB,UAAUvB,EAAV,EAAcwB,IAAd,EAAoB;QAC7BC,QAAQ,KAAKA,KAAjB;QACIA,KAAJ,EAAW;eACA3C,IAAI2C,MAAMC,cAAV,GAAP,GAAqC1B,GAAGyB,MAAME,iBAAT,GAArC;KADJ,MAEO;aACEC,QAAL,CAAc5B,EAAd,EAAkBwB,IAAlB;;WAEG,IAAP;CAPJ;;;AAWA3B,IAAI+B,QAAJ,GAAe,UAAU5B,EAAV,EAAcwB,IAAd,EAAoB;QAC3BA,IAAJ,EAAU;YACFhB,WAAJ,CAAgBR,EAAhB,EAAoB,eAApB;KADJ,MAEO;YACCM,QAAJ,CAAaN,EAAb,EAAiB,eAAjB;;CAJR;;;AASAH,IAAIgC,aAAJ,GAAoB,UAAUC,QAAV,EAAoBC,OAApB,EAA6B;QACzCC,YAAJ;QACIvB,MAAM,mBADV,CAD6C;cAGnCsB,WAAWjD,GAArB;QACIgD,QAAJ,EAAc;YACNA,SAASG,QAAT,IAAqBtC,SAASmC,QAAT,CAAzB,EAA6C;kBACnCA,QAAN;SADJ,MAEO,IAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;gBACjCrB,IAAIyB,IAAJ,CAASJ,QAAT,CAAJ,EAAwB;sBACdhD,IAAIqD,cAAJ,CAAmBL,SAASM,SAAT,CAAmB,CAAnB,CAAnB,CAAN;aADJ,MAEO;sBACGL,QAAQM,aAAR,CAAsBP,QAAtB,CAAN;;;;WAILE,GAAP;CAfJ;;;AAmBAnC,IAAIyC,aAAJ,GAAoB,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;QACnCxC,KAAKlB,IAAIwD,aAAJ,CAAkBC,IAAlB,CAAT;QACIE,YADJ;QAEIjD,SAASgD,KAAT,CAAJ,EAAqB;aACZC,GAAL,IAAYD,KAAZ,EAAmB;eACZE,YAAH,CAAgBD,GAAhB,EAAqBD,MAAMC,GAAN,CAArB;;;WAGDzC,EAAP;CARJ;;;AAYAH,IAAI8C,GAAJ,GAAU,UAAU3C,EAAV,EAAcV,IAAd,EAAoBsD,QAApB,EAA8B;QAChCC,KAAK7C,GAAGF,IAAZ;QACIgD,gBADJ;QAEI,CAACD,EAAL,EAAS;aACA/C,MAAL;eACOiD,cAAP,CAAsB/C,EAAtB,EAA0B,MAA1B,EAAkC;mBACvB6C;SADX;;cAIM,KAAKG,QAAL,CAAcH,EAAd,CAAV;QACI,CAACC,OAAL,EAAc;kBACA,KAAKE,QAAL,CAAcH,EAAd,IAAoB,EAA9B;gBACQvD,IAAR,IAAgB,EAAhB;KAFJ,MAGO,IAAI,CAACwD,QAAQxD,IAAR,CAAL,EAAoB;gBACfA,IAAR,IAAgB,EAAhB;;YAEIA,IAAR,EAAc2D,IAAd,CAAmBL,QAAnB;OACGM,gBAAH,CAAoB5D,IAApB,EAA0BsD,QAA1B;CAjBJ;;AAoBA/C,IAAIsD,EAAJ,GAAS,UAAUrB,QAAV,EAAoBxC,IAApB,EAA0BsD,QAA1B,EAAoCQ,GAApC,EAAyC;QAC1CpD,KAAK,KAAK6B,aAAL,CAAmBC,QAAnB,CAAT;QACIuB,UADJ;QAEIrD,EAAJ,EAAQ;YACAV,IAAJ,EAAU;;mBAECA,KAAKgE,KAAL,CAAW,GAAX,CAAP;gBACIhE,KAAKiE,MAAT;gBACIhE,WAAWqD,QAAX,CAAJ,EAA0B;uBACfS,GAAP,GAAa;wBACLG,IAAIlE,KAAK+D,CAAL,CAAR;0BACM,KAAKI,IAAL,CAAUzD,EAAV,EAAcwD,CAAd,EAAiBZ,QAAjB,CAAN,GACI,KAAKD,GAAL,CAAS3C,EAAT,EAAawD,CAAb,EAAgBZ,QAAhB,CADJ;;aAHR,MAMO,IAAGQ,GAAH,EAAO;uBACHC,GAAP,GAAa;yBACJI,IAAL,CAAUzD,EAAV,EAAcV,KAAK+D,CAAL,CAAd;;;SAZZ,MAeO,IAAGD,GAAH,EAAQ;iBACNK,IAAL,CAAUzD,EAAV;;;WAID,IAAP;CAxBJ;;;AA4BAH,IAAI4D,IAAJ,GAAW,UAAUzD,EAAV,EAAcV,IAAd,EAAoBsD,QAApB,EAA8B;QACjCI,WAAW,KAAKA,QAAL,CAAchD,GAAGF,IAAjB,CAAf;QACIkD,QAAJ,EAAc;YACN1D,SAAS0D,WAAWA,SAAS1D,IAAT,CAApB,CAAJ,EAAyC;gBACjCsD,QAAJ,EAAc;qBACL,IAAIS,IAAI,CAAR,EAAWK,MAAMV,SAASO,MAA/B,EAAuCF,IAAIK,GAA3C,EAAgDL,GAAhD,EAAsD;wBAC9CL,SAASK,CAAT,MAAgBT,QAApB,EAA8B;iCACjBe,MAAT,CAAgBN,CAAhB,EAAmB,CAAnB;2BACGO,mBAAH,CAAuBtE,IAAvB,EAA6BsD,QAA7B;;;;aAJZ,MAQO;yBACMiB,OAAT,CAAiB,UAAUC,EAAV,EAAc;uBACxBF,mBAAH,CAAuBtE,IAAvB,EAA6BwE,EAA7B;iBADJ;oBAGId,QAAJ,CAAa1D,IAAb,IAAqB,EAArB;;SAbR,MAeO,IAAI,CAACA,IAAL,EAAW;;iBACT,IAAImD,GAAT,IAAgBO,QAAhB,EAA0B;qBACjBS,IAAL,CAAUzD,EAAV,EAAcyC,GAAd;;;;CApBhB;;AA0BA5C,IAAIuD,GAAJ,GAAU,UAAUtB,QAAV,EAAoBxC,IAApB,EAA0BsD,QAA1B,EAAoC;WACnC,KAAKO,EAAL,CAAQrB,QAAR,EAAkBxC,IAAlB,EAAwBsD,QAAxB,EAAkC,IAAlC,CAAP;CADJ;;AAIA/C,IAAIkE,IAAJ,GAAW,UAAUjC,QAAV,EAAoBxC,IAApB,EAA0BsD,QAA1B,EAAoC;QACvCoB,YAAJ;QAAQC,QAAQ,IAAhB;QACI1E,WAAWqD,QAAX,CAAJ,EAA0B;cACjB,cAAY;gBACTsB,OAAOC,MAAMjF,SAAN,CAAgBkF,KAAhB,CAAsBhF,IAAtB,CAA2BiF,SAA3B,CAAX;qBACSC,KAAT,CAAe,IAAf,EAAqBJ,IAArB;kBACMd,GAAN,CAAUtB,QAAV,EAAoBxC,IAApB,EAA0B0E,GAA1B;SAHJ;aAKKb,EAAL,CAAQrB,QAAR,EAAkBxC,IAAlB,EAAwB0E,GAAxB;;WAEG,IAAP;CAVJ;;AAaAnE,IAAI4B,KAAJ,GAAa,YAAY;QACjB8C,gBAAgB;;KAGR,mBADJ,EAEI,gBAFJ,EAGI,mBAHJ,EAII,mBAJJ,EAKI,kBALJ,EAMI,iBANJ,CAFY;;KAYR,yBADJ,EAEI,sBAFJ,EAGI,yBAHJ,EAII,yBAJJ,EAKI,wBALJ,EAMI,uBANJ,CAXY;;KAqBR,sBADJ,EAEI,qBAFJ,EAGI,sBAHJ,EAII,sBAJJ,EAKI,qBALJ,EAMI,oBANJ,CApBY;;KA8BR,qBADJ,EAEI,kBAFJ,EAGI,qBAHJ,EAII,qBAJJ,EAKI,oBALJ,EAMI,mBANJ,CA7BY,CAApB;QAuCI9C,QAAQ,IAvCZ;QAwCI+C,SAASD,cAAc,CAAd,CAxCb;QAyCIE,YAzCJ;QAyCSC,gBAzCT;SA0CK,IAAIrB,IAAI,CAAR,EAAWK,MAAMa,cAAchB,MAApC,EAA4CF,IAAIK,GAAhD,EAAqDL,GAArD,EAA0D;cAChDkB,cAAclB,CAAd,CAAN;YACIoB,IAAI,CAAJ,KAAU1F,QAAd,EAAwB;sBACV,IAAV;;;;;QAKJ2F,OAAJ,EAAa;gBACD,EAAR;YACIb,OAAJ,CAAY,UAAU5C,IAAV,EAAgBoC,CAAhB,EAAmB;kBACrBmB,OAAOnB,CAAP,CAAN,IAAmBpC,IAAnB;SADJ;;WAIGQ,KAAP;CAzDQ,EAAZ;;ACzNA,SAASkD,MAAT,CAAgBrF,IAAhB,EAAsB;SACbA,IAAL,GAAYA,IAAZ;SACKsF,IAAL,GAAY,IAAZ;SACKC,SAAL,GAAiB,CAAjB;;;AAGJ,SAASC,UAAT,GAAsB;SACb9B,QAAL,GAAgB,EAAhB;;;AAGJ8B,WAAW5F,SAAX,GAAuB;iBACN4F,UADM;QAEf,YAAUxF,IAAV,EAAgBwE,EAAhB,EAAoB;YAChBvE,WAAWuE,EAAX,CAAJ,EAAoB;gBACZ,CAACrE,SAASH,IAAT,CAAL,EAAqB;uBACVyF,OAAOzF,IAAP,CAAP;;gBAEA,CAAC,KAAK0D,QAAL,CAAc1D,IAAd,CAAL,EAA0B;qBACjB0D,QAAL,CAAc1D,IAAd,IAAsB,EAAtB;;iBAEC0D,QAAL,CAAc1D,IAAd,EAAoB2D,IAApB,CAAyBa,EAAzB;;eAEG,IAAP;KAZe;SAcd,aAAUxE,IAAV,EAAgBwE,EAAhB,EAAoB;YAChBkB,IAAI,KAAKhC,QAAL,CAAc1D,IAAd,CAAT;YACI0F,CAAJ,EAAO;gBACCzF,WAAWuE,EAAX,CAAJ,EAAoB;qBACX,IAAIT,IAAI2B,EAAEzB,MAAf,EAAuBF,GAAvB,GAA6B;wBACrB2B,EAAE3B,CAAF,MAASS,EAAb,EAAiB;0BACXH,MAAF,CAASN,CAAT,EAAY,CAAZ;;;;aAHZ,MAOO,IAAI,CAACS,EAAL,EAAQ;qBACNd,QAAL,CAAc1D,IAAd,IAAsB,EAAtB;;;eAGD,IAAP;KA5Be;UA8Bb,cAAUA,IAAV,EAAgBwE,EAAhB,EAAoB;YAClBvE,WAAWuE,EAAX,CAAJ,EAAoB;gBACZmB,OAAO,IAAX;gBACIC,IAAI,SAAJA,CAAI,GAAY;mBACTZ,KAAH,CAAS,IAAT,EAAeD,SAAf;qBACKjB,GAAL,CAAS9D,IAAT,EAAe4F,CAAf;aAHR;iBAKK/B,EAAL,CAAQ7D,IAAR,EAAc4F,CAAd;;KArCW;aAwCV,iBAAU5F,IAAV,EAAgB;YACjB4E,OAAOC,MAAMjF,SAAN,CAAgBkF,KAAhB,CAAsBhF,IAAtB,CAA2BiF,SAA3B,EAAsC,CAAtC,CAAX;YACIW,IAAI,KAAKhC,QAAL,CAAc1D,IAAd,CADR;YAEI6F,UAFJ;YAGIH,CAAJ,EAAO;gBACC,IAAIL,MAAJ,CAAWrF,IAAX,CAAJ;cACEsF,IAAF,GAASV,IAAT;cACEW,SAAF,GAAcO,KAAKC,GAAL,EAAd;mBACO,CAACF,CAAD,EAAIG,MAAJ,CAAWpB,IAAX,CAAP;iBACK,IAAIb,IAAI2B,EAAEzB,MAAf,EAAuBF,GAAvB,GAA8B;kBACxBA,CAAF,EAAKiB,KAAL,CAAW,IAAX,EAAiBJ,IAAjB;;;eAGD,IAAP;;CArDR;;ACRA,SAASqB,MAAT,CAAgBC,QAAhB,EAA0B;eACXpG,IAAX,CAAgB,IAAhB;SACKoG,QAAL,GAAgB9F,YAAY8F,QAAZ,IAAwB,KAAxB,GAAgC,CAAC,CAACA,QAAlD;SACKC,OAAL,GAAe,KAAKC,GAAL,GAAW,IAA1B;SACKC,MAAL,GAAc,KAAd;;;AAGJ,IAAIC,QAAQL,OAAOrG,SAAP,GAAmBD,OAAO4G,MAAP,CAAcf,WAAW5F,SAAzB,CAA/B;AACA0G,MAAME,WAAN,GAAoBP,MAApB;;AAEAK,MAAMG,WAAN,GAAoB,YAAY;QACxBC,SAAS,KAAKhG,EAAL,CAAQiG,UAArB;QACIC,OAAOF,OAAOG,qBAAP,EADX;QAEIT,MAAMrE,iBAAiB,KAAKrB,EAAtB,CAFV;WAGO;eACIoG,WAAWV,IAAIW,KAAf,CADJ;gBAEKD,WAAWV,IAAIY,MAAf,CAFL;kBAGOF,WAAWV,IAAIa,IAAf,CAHP;iBAIMH,WAAWV,IAAIc,GAAf,CAJN;cAKGN,KAAKG,KALR;cAMGH,KAAKI;KANf;CAJJ;;AAcAV,MAAMa,eAAN,GAAwB,UAAUvF,GAAV,EAAewF,KAAf,EAAsB;cAChCxF,MAAMA,MAAM,GAAN,GAAY,GAA5B;QACIF,GAAJ,CAAQ,KAAK2F,GAAb,EAAkB,OAAlB,EAA2BzF,GAA3B,EACKF,GADL,CACS,KAAKhB,EADd,EACkB,MADlB,EAC0BkB,GAD1B;WAEO,IAAP;CAJJ;;AAOA0E,MAAMgB,eAAN,GAAwB,UAAU1F,GAAV,EAAewF,KAAf,EAAsB;cAChCxF,MAAMA,MAAM,GAAN,GAAY,GAA5B;QACIF,GAAJ,CAAQ,KAAK2F,GAAb,EAAkB,QAAlB,EAA4BzF,GAA5B,EACKF,GADL,CACS,KAAKhB,EADd,EACkB,QADlB,EAC4BkB,GAD5B;WAEO,IAAP;CAJJ;;AAOA0E,MAAMiB,SAAN,GAAkB,UAAUC,GAAV,EAAe;;QAEzB,CAACA,IAAIC,MAAT,EAAiB;YACTC,IAAIF,IAAIG,OAAZ;YACIC,IAAIJ,IAAIK,OADZ;YAEIzB,MAAM,KAAKK,WAAL,EAFV;YAGIqB,YAAY,KAAKC,eAAL,GAAuBC,IAAvB,CAA4B,IAA5B,CAHhB;aAIK5B,GAAL,GAAW;mBACAA,IAAIW,KADJ;oBAECX,IAAIY,MAFL;qBAGEU,IAAItB,IAAI6B,QAHV;qBAIEL,IAAIxB,IAAI8B,OAJV;kBAKD9B,IAAI+B,IALH;kBAMD/B,IAAIgC;SANd;YAQIpH,QAAJ,CAAa,KAAKN,EAAlB,EAAsB,gBAAtB,EACKmD,EADL,CACQrE,GADR,EACa,WADb,EAC0BsI,SAD1B,EAEKjE,EAFL,CAEQrE,GAFR,EAEa,SAFb,EAEwB,KAAK6I,OAAL,CAAaL,IAAb,CAAkB,IAAlB,CAFxB;;CAfR;;AAqBA1B,MAAMgC,YAAN,GAAqB,UAAUZ,CAAV,EAAaE,CAAb,EAAgB;QAC7BW,iBAAJ;eACW,KAAKnC,GAAL,CAASgC,IAAT,IAAiBR,IAAI,KAAKxB,GAAL,CAASoC,OAA9B,IAAyC,KAAKpC,GAAL,CAASY,MAA7D;eACWuB,WAAW,CAAX,GAAe,CAAf,GAAmBA,WAAW,KAAKnC,GAAL,CAASgC,IAApB,GAA2B,KAAKhC,GAAL,CAASgC,IAApC,GAA2CG,QAAzE;eACWA,WAAW,KAAKnC,GAAL,CAASgC,IAA/B;SACKd,eAAL,CAAqBiB,QAArB,EAA+B,IAA/B;WACOA,QAAP;CANJ;;AASAjC,MAAMmC,cAAN,GAAuB,UAAUf,CAAV,EAAa;QAC5Ba,iBAAJ;eACWb,IAAI,KAAKtB,GAAL,CAASsC,OAAxB;eACWH,WAAW,CAAX,GAAe,CAAf,GAAmBA,WAAW,KAAKnC,GAAL,CAAS+B,IAApB,GAA2B,KAAK/B,GAAL,CAAS+B,IAApC,GAA2CI,QAAzE;eACWA,WAAW,KAAKnC,GAAL,CAAS+B,IAA/B;SACKhB,eAAL,CAAqBoB,QAArB,EAA+B,IAA/B;WACOA,QAAP;CANJ;;AASAjC,MAAMwB,SAAN,GAAkB,UAAUN,GAAV,EAAehD,EAAf,EAAmB;QAC7BkD,IAAIF,IAAIG,OAAZ;QACIC,IAAIJ,IAAIK,OADZ;QAEIU,WAAW/D,GAAG1E,IAAH,CAAQ,IAAR,EAAc4H,CAAd,EAAiBE,CAAjB,CAFf;SAGKvB,MAAL,GAAc,IAAd;SACKsC,OAAL,CAAa,eAAb,EAA8B,KAAKxC,OAAL,GAAeoC,QAA7C;CALJ;;AAQAjC,MAAMyB,eAAN,GAAwB,YAAY;;;WACzB,KAAK7B,QAAL,GACH;eAAO,MAAK4B,SAAL,CAAeN,GAAf,EAAoB,MAAKc,YAAzB,CAAP;KADG,GAEH;eAAO,MAAKR,SAAL,CAAeN,GAAf,EAAoB,MAAKiB,cAAzB,CAAP;KAFJ;CADJ;;AAMAnC,MAAM+B,OAAN,GAAgB,YAAY;QACpBvE,GAAJ,CAAQtE,GAAR,EAAa,kBAAb,EACK0B,WADL,CACiB,KAAKR,EADtB,EAC0B,gBAD1B;SAEK2F,MAAL,IAAe,KAAKsC,OAAL,CAAa,kBAAb,EAAiC,KAAKxC,OAAtC,CAAf;CAHJ;;AAMAG,MAAMsC,UAAN,GAAmB,UAAUpB,GAAV,EAAe;;;QAG1B,KAAKnB,MAAT,EAAiB;aACRA,MAAL,GAAc,KAAd;;;QAGAO,OAAO,KAAKiC,KAAL,CAAWhC,qBAAX,EAAX;QACIa,IAAIF,IAAIG,OADZ;QAEIC,IAAIJ,IAAIK,OAFZ;QAGIiB,QAAQ,eAHZ;QAII,KAAK5C,QAAT,EAAmB;eACR,CAACU,KAAKI,MAAL,GAAcY,CAAd,GAAkBhB,KAAKM,GAAxB,IAA+BN,KAAKI,MAA3C;aACKM,eAAL,CAAqBV,IAArB,EAA2B,IAA3B;KAFJ,MAGO;eACI,CAACc,IAAId,KAAKK,IAAV,IAAkBL,KAAKG,KAA9B;gBACQ,kBAAR;aACKI,eAAL,CAAqBP,IAArB,EAA2B,IAA3B;;SAEC+B,OAAL,CAAaG,KAAb,EAAoBlC,IAApB;CAnBJ;;AAsBAN,MAAMyC,SAAN,GAAkB,YAAY;QACtBlF,EAAJ,CAAO,KAAKnD,EAAZ,EAAgB,WAAhB,EAA6B,KAAK6G,SAAL,CAAeS,IAAf,CAAoB,IAApB,CAA7B,EACKnE,EADL,CACQ,KAAKgF,KADb,EACoB,OADpB,EAC6B,KAAKD,UAAL,CAAgBZ,IAAhB,CAAqB,IAArB,CAD7B;CADJ;;AAKA1B,MAAM0C,OAAN,GAAgB,YAAY;QACpBlF,GAAJ,CAAQ,KAAK+E,KAAb,EACK/E,GADL,CACS,KAAKpD,EADd;WAEO,KAAKmI,KAAZ;WACO,KAAKxB,GAAZ;WACO,KAAK3G,EAAZ;CALJ;;AAQA4F,MAAM2C,IAAN,GAAa,UAAUC,MAAV,EAAkBC,MAAlB,EAA0B;QAC/BxI,MAAM;eACC,qBADD;aAED,wBAFC;gBAGE;KAHZ;QAKI,KAAKuF,QAAT,EAAmB;cACT;mBACK,yBADL;iBAEG,sBAFH;oBAGM;SAHZ;;SAMC2C,KAAL,GAAatI,IAAIyC,aAAJ,CAAkB,KAAlB,EAAyB,EAACoG,6BAA2BzI,IAAIkI,KAAhC,EAAzB,CAAb;SACKxB,GAAL,GAAW9G,IAAIyC,aAAJ,CAAkB,KAAlB,EAAyB,EAACoG,wBAAsBzI,IAAI0G,GAA3B,EAAzB,CAAX;SACK3G,EAAL,GAAUH,IAAIyC,aAAJ,CAAkB,KAAlB,EAAyB,EAACoG,2BAAyBzI,IAAI0I,MAA9B,EAAzB,CAAV;SACKR,KAAL,CAAWS,WAAX,CAAuB,KAAKjC,GAA5B;SACKwB,KAAL,CAAWU,MAAX,CAAkB,KAAK7I,EAAvB;aACSwI,OAAOM,YAAP,CAAoB,KAAKX,KAAzB,EAAgCM,MAAhC,CAAT,GAAmDD,OAAOI,WAAP,CAAmB,KAAKT,KAAxB,CAAnD;SACKE,SAAL;CAnBJ;;ACxIA,IAAIU,MAAM,qDACA,oFADA,GAEA,kFAFV;IAGIC,WAAW,sFACP,8CADO,GAEP,qDAFO,GAGP,2DAHO,GAIP,gBAJO,GAKP,uDALO,GAMP,sEANO,GAOP,8CAPO,GAQP,iEARO,GASP,8DATO,GAUP,sBAVO,GAWP,gBAXO,GAYP,mDAZO,GAaP,uFAbO,GAcP,4DAdO,GAeP,oFAfO,GAgBP,iEAhBO,GAiBP,oEAjBO,GAkBP,qEAlBO,GAmBP,wBAnBO,GAoBP,oBApBO,GAqBP,gBAxBR;;ACGA,SAASC,YAAT,CAAsBC,MAAtB,EAA8B;SACrBA,MAAL,GAAcA,MAAd;;;AAGJD,aAAa/J,SAAb,GAAyB;iBACR+J,YADQ;eAEV,mBAAUE,MAAV,EAAkB;;YAErBA,SAAS,CAAb,EAAgB;qBACHA,SAAS,GAAlB;;iBAEK,CAAT,KAAeA,SAAS,CAAxB;aACKnJ,EAAL,CAAQmJ,MAAR,GAAiBA,MAAjB;aACKnJ,EAAL,CAAQoJ,KAAR,GAAgB,CAACD,MAAjB;eACO,IAAP;KAViB;eAYV,qBAAY;eACZE,KAAKC,KAAL,CAAW,KAAKtJ,EAAL,CAAQmJ,MAAR,GAAiB,GAA5B,CAAP;KAbiB;UAef,cAAUI,KAAV,EAAgB;aACbvJ,EAAL,CAAQoJ,KAAR,GAAgB1J,YAAY6J,KAAZ,IAAoB,IAApB,GAA2B,CAAC,CAACA,KAA7C;eACO,IAAP;KAjBiB;aAmBZ,mBAAY;eACV,KAAKvJ,EAAL,CAAQoJ,KAAf;KApBiB;cAsBX,kBAAUI,IAAV,EAAgB;aACjBxJ,EAAL,CAAQyJ,QAAR,GAAmB,CAAC,CAACD,IAArB;eACO,IAAP;KAxBiB;gBA0BT,sBAAY;eACb,KAAKxJ,EAAL,CAAQyJ,QAAf;KA3BiB;UA6Bf,cAAUD,KAAV,EAAgB;YACd9J,YAAY8J,KAAZ,KAAqB,CAAC,CAACA,KAA3B,EAAiC;iBACxBxJ,EAAL,CAAQwJ,IAAR;SADJ,MAEO;iBACExJ,EAAL,CAAQ0J,KAAR;;eAEG,IAAP;KAnCiB;cAqCX,oBAAY;eACX,KAAK1J,EAAL,CAAQ2J,MAAf;KAtCiB;aAwCZ,mBAAY;YACbC,MAAM,KAAK5J,EAAL,CAAQ6J,KAAlB;eACOD,MAAMA,IAAIE,IAAV,GAAiBF,GAAxB;KA1CiB;UA4Cf,cAAUG,MAAV,EAAkB;aACf/J,EAAL,CAAQgK,IAAR,GAAe,CAAC,CAACD,MAAjB;eACO,IAAP;KA9CiB;YAgDb,kBAAY;eACT,KAAK/J,EAAL,CAAQgK,IAAf;KAjDiB;eAmDV,mBAAUC,MAAV,EAAkB;aACpBjK,EAAL,CAAQiK,MAAR,GAAiBA,MAAjB;eACO,IAAP;KArDiB;gBAuDT,oBAAUC,OAAV,EAAmB;aACtBlK,EAAL,CAAQkK,OAAR,GAAkBA,OAAlB;eACO,IAAP;KAzDiB;oBA2DL,wBAAUC,IAAV,EAAgBzD,KAAhB,EAAuB;YAC/B0D,WAAW,KAAKC,WAAL,EAAf;YACI3D,KAAJ,EAAW;mBACA0D,WAAWD,IAAlB;;aAECnK,EAAL,CAAQsK,WAAR,GAAsBH,IAAtB;eACO,IAAP;KAjEiB;oBAmEL,0BAAY;eACjB,KAAKnK,EAAL,CAAQsK,WAAf;KApEiB;iBAsER,uBAAY;eACd,KAAKtK,EAAL,CAAQoK,QAAf;KAvEiB;yBAyEA,+BAAY;eACtB,KAAKG,cAAL,KAAwB,KAAKF,WAAL,EAA/B;KA1EiB;iBA4ER,qBAAUG,OAAV,EAAmB;YACxBC,WAAW,KAAKzK,EAAL,CAAQyK,QAAvB;YACI/G,MAAM+G,SAASlH,MADnB;YAEIiH,OAAJ,EAAa;;mBAEF9G,MAAM+G,WAAWA,SAASC,GAAT,CAAahH,MAAM,CAAnB,IAAwB,KAAK2G,WAAL,EAAxB,GAA6C,GAA9D,GAAoE,IAA3E;;eAEGI,QAAP;KAnFiB;mBAqFN,yBAAY;eAChB,KAAKzK,EAAL,CAAQ2K,UAAf;KAtFiB;kBAwFP,wBAAY;aACjB3K,EAAL,CAAQgJ,QAAR,GAAmB,IAAnB;eACO,IAAP;KA1FiB;iBA4FR,qBAAUmB,IAAV,EAAgB;YACrBS,YAAY,SAAZA,SAAY;mBAAOC,MAAM,EAAN,GAAW,MAAMA,GAAjB,GAAuBA,IAAI1L,QAAJ,EAA9B;SAAhB;YACI2L,YADJ;YACS9F,UADT;YACY+F,UADZ;YACeC,UADf;eAEO3B,KAAK4B,IAAL,CAAUd,IAAV,CAAP;YACIA,QAAQ,CAAZ,EAAe;kBACL,OAAN;SADJ,MAEO,IAAIA,OAAO,EAAX,EAAe;kBACZ,QAAQS,UAAUT,IAAV,CAAd;SADG,MAEA,IAAIA,OAAO,IAAX,EAAiB;gBAChBd,KAAKC,KAAL,CAAWa,OAAO,EAAlB,CAAJ;gBACIA,OAAO,EAAX;kBACMS,UAAUG,CAAV,IAAe,GAAf,GAAqBH,UAAUI,CAAV,CAA3B;SAHG,MAIA;gBACC3B,KAAKC,KAAL,CAAWa,OAAO,IAAlB,CAAJ;kBACMA,OAAO,IAAb;gBACId,KAAKC,KAAL,CAAWwB,MAAM,EAAjB,CAAJ;gBACIA,MAAM,EAAV;kBACMF,UAAU5F,CAAV,IAAe,GAAf,GAAqB4F,UAAUG,CAAV,CAArB,GAAoC,GAApC,GAA0CH,UAAUI,CAAV,CAAhD;;eAEGF,GAAP;KA/GiB;YAiHb,kBAAY;aACX9K,EAAL,CAAQkL,IAAR;eACO,IAAP;KAnHiB;kBAqHP,sBAAUC,GAAV,EAAe;YACrBxB,SAAS,KAAKyB,QAAL,EAAb;YACI,KAAKC,MAAL,KAAgBF,GAApB,EAAyB;iBAChBE,MAAL,GAAcF,GAAd;iBACKG,UAAL,CAAgBH,GAAhB;;YAEA,CAACxB,MAAL,EAAa;iBACJH,IAAL,CAAU,IAAV;;eAEG,IAAP;KA9HiB;eAgIV,qBAAY;eACZ,KAAKxJ,EAAL,CAAQuL,UAAf;KAjIiB;gBAmIT,oBAAUF,MAAV,EAAkB;YACtBG,OAAO1M,IAAI2M,sBAAJ,EAAX;YACI,OAAOJ,MAAP,KAAkB,QAAtB,EAAgC;iBACvBrL,EAAL,CAAQmL,GAAR,GAAcE,MAAd;SADJ,MAEO,IAAIlH,MAAMuH,OAAN,CAAcL,MAAd,CAAJ,EAA2B;iBACzBrL,EAAL,CAAQ2L,SAAR,GAAoB,EAApB;mBACO9H,OAAP,CAAe,UAAUsH,GAAV,EAAe;oBACtBS,WAAW/L,IAAIyC,aAAJ,CAAkB,QAAlB,EAA4B,EAAC6I,KAAKA,GAAN,EAA5B,CAAf;qBACKvC,WAAL,CAAiBgD,QAAjB;aAFJ;iBAIK5L,EAAL,CAAQ4I,WAAR,CAAoB4C,IAApB;;eAEG,IAAP;KA/IiB;UAiJf,gBAAY;YACVK,QAAQhM,IAAIyC,aAAJ,CAAkB,OAAlB,CAAZ;YACIwJ,OAAOhN,IAAIiN,cAAJ,CAAmB,KAAK7C,MAAL,CAAY8C,GAAZ,CAAgB7M,QAAhB,EAAnB,CADX;aAEKa,EAAL,GAAU6L,KAAV;aACKR,MAAL,GAAc,KAAKnC,MAAL,CAAYmC,MAA1B;cACMzC,WAAN,CAAkBkD,IAAlB;YACIxL,QAAJ,CAAa,KAAKN,EAAlB,EAAsB,eAAtB;aACKsL,UAAL,CAAgB,KAAKD,MAArB,EACKY,QADL,CACc,KAAK/C,MAAL,CAAY+C,QAD1B,EAEKjC,IAFL,CAEU,KAAKd,MAAL,CAAYc,IAFtB,EAGKkC,SAHL,CAGe,KAAKhD,MAAL,CAAYe,MAH3B,EAIKkC,UAJL,CAIgB,KAAKjD,MAAL,CAAYgB,OAJ5B,EAKKkC,SALL,CAKe,KAAKlD,MAAL,CAAYmD,aAL3B;eAMO,KAAKrM,EAAZ;;CA9JR;;ACAA,IAAIsM,qBAAqB,IAAzB;IACIC,oBAAoB,IADxB;AAEA,IAAMC,aAAa,cAAnB;AACA,IAAMC,iBAAiB,GAAvB;;AAEA,SAASC,OAAT,CAAiB5K,QAAjB,EAA2B6K,OAA3B,EAAoC;QAC5BnE,SAAS3I,IAAIgC,aAAJ,CAAkBC,QAAlB,CAAb;QACIoH,eADJ;eAEW9J,IAAX,CAAgB,IAAhB;QACII,SAASmN,OAAT,CAAJ,EAAuB;iBACV;sBACK,CAAC,CAACA,QAAQV,QADf;2BAEU5C,KAAKuD,GAAL,CAASC,SAASF,QAAQN,aAAjB,CAAT,KAA6C7N,gBAAgB6N,aAFvE;kBAGC,CAAC,CAACM,QAAQ3C,IAHX;iBAIA2C,QAAQX,GAAR,IAAexN,gBAAgBwN,GAJ/B;oBAKGW,QAAQ1C,MAAR,IAAkBzL,gBAAgByL,MALrC;qBAMI0C,QAAQzC,OAAR,IAAmB1L,gBAAgB0L,OANvC;oBAOGyC,QAAQtB;SAPpB;KADJ,MAUO;iBACM7M,eAAT;;QAEA,CAAC0K,OAAOmC,MAAZ,EAAoB;;;QAGhB,CAAC7C,MAAL,EAAa;cACH,IAAIsE,KAAJ,CAAU,SAAV,CAAN;;SAECtE,MAAL,GAAcA,MAAd;SACKuE,UAAL,GAAkB,CAAlB;SACKC,gBAAL,GAAwB,KAAxB;SACKnB,KAAL,GAAa,IAAI5C,YAAJ,CAAiBC,MAAjB,CAAb;SACKF,QAAL,GAAgBtJ,YAAYiN,QAAQ3D,QAApB,IAAgC,IAAhC,GAAuC,CAAC,CAAC2D,QAAQ3D,QAAjE;SACKiE,iBAAL,GAAyBvN,YAAYiN,QAAQM,iBAApB,IAAyC,KAAzC,GAAiDN,QAAQM,iBAAlF;;;AAGJ,IAAInJ,KAAK4I,QAAQxN,SAAR,GAAoBD,OAAO4G,MAAP,CAAcf,WAAW5F,SAAzB,CAA7B;AACA4E,GAAGgC,WAAH,GAAiB4G,OAAjB;;AAEA5I,GAAGoJ,gBAAH,GAAsB,YAAY;QAC1B,KAAKC,YAAL,GAAoB,CAAC,KAAKA,YAA9B,EAA4C;aACnCC,iBAAL;KADJ,MAEO;aACEC,cAAL;;CAJR;;AAQAvJ,GAAGsJ,iBAAH,GAAuB,YAAY;SAC1BD,YAAL,GAAoB,IAApB;QACI5L,UAAJ,CAAe,KAAK+L,SAApB,EACKhN,QADL,CACc,KAAKiN,aADnB,EACkC,oBADlC,EAEKjN,QAFL,CAEc,KAAKgN,SAFnB,EAE8B,oBAF9B;CAFJ;;AAOAxJ,GAAGuJ,cAAH,GAAoB,YAAY;SACvBF,YAAL,GAAoB,KAApB;QACI5L,UAAJ,CAAe,KAAK+L,SAApB,EAA+B,IAA/B,EACK9M,WADL,CACiB,KAAK+M,aADtB,EACqC,oBADrC,EAEK/M,WAFL,CAEiB,KAAK8M,SAFtB,EAEiC,oBAFjC;CAFJ;;AAOAxJ,GAAG0J,mBAAH,GAAyB,YAAY;;;QAC7B/L,QAAQ5B,IAAI4B,KAAhB;QACIA,KAAJ,EAAW;YACH0B,EAAJ,CAAOrE,GAAP,EAAY2C,MAAMgM,gBAAlB,EAAoC,YAAM;gBAClC,CAAC3O,IAAI2C,MAAMiM,iBAAV,CAAL,EAAmC;sBAC1BL,cAAL;;SAFR,EAIGlK,EAJH,CAIMrE,GAJN,EAIW2C,MAAMkM,eAJjB,EAIkC,YAAM;kBAC/BN,cAAL;SALJ;;WAQG,IAAP;CAXJ;;AAcAvJ,GAAG8J,OAAH,GAAa,YAAY;SAChB3F,OAAL,CAAa,UAAb;WACO,KAAK4D,KAAL,CAAW9B,MAAX,KAAsB,KAAKP,IAAL,EAAtB,GACH,KAAKE,KAAL,EADJ;CAFJ;;AAMA5F,GAAG+J,SAAH,GAAe,YAAY;QACnB7N,KAAK,KAAK8N,QAAL,CAAc7H,UAAvB;SACK+G,gBAAL,GAAwB,IAAxB;QACIxM,WAAJ,CAAgBR,EAAhB,EAAoBwM,UAApB;SACKuB,WAAL,GACKC,YADL;WAEO,IAAP;CANJ;;AASAlK,GAAGmK,SAAH,GAAe,YAAY;QACnBjO,KAAK,KAAK8N,QAAL,CAAc7H,UAAvB;SACK+G,gBAAL,GAAwB,KAAxB;QACI1M,QAAJ,CAAaN,EAAb,EAAiBwM,UAAjB;WACO,IAAP;CAJJ;;AAOA1I,GAAG+F,KAAH,GAAW,YAAY;QACfD,MAAM,KAAKiC,KAAL,CAAWqC,OAAX,EAAV;QACI5D,cAAc,KAAKuB,KAAL,CAAWtB,cAAX,EADlB;QAEIyB,YAFJ;;SAIKe,UAAL,GAAkBzC,WAAlB;UACM7L,WAAWmL,GAAX,CAAN;YACQA,GAAR;aACS,mBAAL;kBACU,KAAN;;aAEC,mBAAL;kBACU,aAAN;;aAEC,kBAAL;aACK,6BAAL;kBACU,oBAAN;;WAED,OAAP;SACKkE,QAAL,CAAcnC,SAAd,GAA0BK,GAA1B;SACK6B,SAAL;CApBJ;;AAuBA/J,GAAGqK,OAAH,GAAa,YAAY;SAChBtC,KAAL,CAAWuC,MAAX;SACKH,SAAL;CAFJ;;AAKAnK,GAAGuK,aAAH,GAAmB,YAAY;;;QACvBC,UAAU,KAAKzC,KAAL,CAAW7L,EAAzB;QACImD,EAAJ,CAAOmL,OAAP,EAAgB,mBAAhB,EAAqC,eAAO;YACpC,OAAKvB,UAAL,IAAmBjG,IAAIxH,IAAJ,KAAa,WAApC,EAAiD;;mBAExCuM,KAAL,CAAW0C,cAAX,CAA0B,OAAKxB,UAA/B;mBACKA,UAAL,GAAkB,CAAlB;;eAECyB,WAAL,GACKC,eADL;KANJ,EASKtL,EATL,CASQmL,OATR,EASiB,UATjB,EAS6B,KAAKI,QAAL,CAAcpH,IAAd,CAAmB,IAAnB,CAT7B,EAUKnE,EAVL,CAUQmL,OAVR,EAUiB,gBAVjB,EAUmC,KAAKP,WAAL,CAAiBzG,IAAjB,CAAsB,IAAtB,CAVnC,EAWKnE,EAXL,CAWQmL,OAXR,EAWiB,OAXjB,EAW0B,KAAKV,OAAL,CAAatG,IAAb,CAAkB,IAAlB,CAX1B,EAYKnE,EAZL,CAYQmL,OAZR,EAYiB,OAZjB,EAY0B,KAAKzE,KAAL,CAAWvC,IAAX,CAAgB,IAAhB,CAZ1B,EAaKnE,EAbL,CAaQmL,OAbR,EAaiB,aAbjB,EAagC;eAAOxH,IAAI6H,cAAJ,EAAP;KAbhC;;WAeO,IAAP;CAjBJ;;AAoBA7K,GAAG8K,qBAAH,GAA2B,UAAUzF,MAAV,EAAkB;;;;QAErCtJ,IAAIE,QAAJ,CAAa,KAAK8O,WAAlB,EAA+BrC,UAA/B,CAAJ,EAAgD;qBAC/BF,kBAAb;aACKwC,eAAL,CAAqBnD,SAArB,GAAiC,WAAWxC,MAA5C;aACK4F,aAAL,CAAmBpD,SAAnB,GAA+BxC,MAA/B;YACI3I,WAAJ,CAAgB,KAAKsO,eAArB,EAAsCtC,UAAtC;6BACqBwC,WAAW;mBAAMnP,IAAIS,QAAJ,CAAa,OAAKwO,eAAlB,EAAmCtC,UAAnC,CAAN;SAAX,EAAiE,IAAjE,CAArB;;WAEG,IAAP;CATJ;;AAYA1I,GAAGmL,OAAH,GAAa,UAAUnI,GAAV,EAAe;;QAEpB,KAAKkG,gBAAT,EAA2B;QACvBvK,MAAMqE,IAAIrE,GAAJ,CAAQyM,WAAR,EAAV;QACIC,cAAc,iBADlB;QAEIC,iBAAiB,oBAFrB;QAGIC,SAAS,KAHb;QAIIC,WAAW,iBAJf;QAKI7K,MAAM5F,QAAQ4D,GAAR,CALV;QAMIgC,GAAJ,EAAS;YACD2K,eAAelN,IAAf,CAAoBO,GAApB,CAAJ,EAA8B;iBACrB8M,oBAAL,CAA0B9K,GAA1B;SADJ,MAEO,IAAI0K,YAAYjN,IAAZ,CAAiBO,GAAjB,CAAJ,EAA2B;iBACzB+M,kBAAL,CAAwB/K,GAAxB;SADG,MAEA,IAAI4K,OAAOnN,IAAP,CAAYO,GAAZ,CAAJ,EAAsB;iBACpB4K,cAAL;SADG,MAEA,IAAIiC,SAASpN,IAAT,CAAcO,GAAd,CAAJ,EAAwB;iBACtBgN,UAAL;SADG,MAED;iBACGvC,gBAAL;;;QAGJyB,cAAJ;CAtBJ;;AAyBA7K,GAAG4L,WAAH,GAAiB,UAAU5I,GAAV,EAAe;QACxB6I,MAAM7I,IAAI0B,MAAd;YACQmH,GAAR;aACS,KAAKC,gBAAV;iBACSC,yBAAL,CAA+B/I,GAA/B;;aAEC,KAAKgJ,OAAV;iBACSvG,IAAL;;aAEC,KAAKwG,OAAV;aACK,KAAKlE,KAAL,CAAW7L,EAAhB;iBACSyP,UAAL;;aAEC,KAAKlC,aAAV;iBACSL,gBAAL;;aAEC,KAAKY,QAAV;iBACSK,OAAL;;;CAjBZ;;AAsBArK,GAAGuE,SAAH,GAAe,YAAY;QACnBlF,EAAJ,CAAO,KAAKmK,SAAZ,EAAuB,OAAvB,EAAgC,KAAKoC,WAAL,CAAiBpI,IAAjB,CAAsB,IAAtB,CAAhC;SACK+G,aAAL;WACO,IAAP;CAHJ;;AAMAvK,GAAGkM,cAAH,GAAoB,YAAY;;;QAGxBtB,WAAW,KAAK7C,KAAL,CAAWoE,mBAAX,EAAf;QACI,CAAC,KAAKC,WAAL,CAAiBvK,MAAtB,EAA8B;aACrBuK,WAAL,CAAiBzJ,eAAjB,CAAiCiI,QAAjC,EAA2C,IAA3C;;SAECyB,UAAL,CAAgB,IAAhB;CAPJ;;AAUArM,GAAGsM,YAAH,GAAkB,UAAUjH,MAAV,EAAkBzC,KAAlB,EAAyB;cAC7ByC,UAAU,GAApB;aACSE,KAAKC,KAAL,CAAWH,MAAX,CAAT;SACK0C,KAAL,CAAWO,SAAX,CAAqBjD,MAArB;SACKkH,iBAAL,CAAuBlH,MAAvB;WACO,IAAP;CALJ;;AAQArF,GAAGyF,IAAH,GAAU,YAAY;QACdJ,SAAS,KAAK0C,KAAL,CAAWyE,SAAX,EAAb;;QAEI,KAAKzE,KAAL,CAAW0E,OAAX,EAAJ,EAA0B;aACjB1E,KAAL,CAAWtC,IAAX,CAAgB,KAAhB;KADJ,MAEO;aACEsC,KAAL,CAAWtC,IAAX,CAAgB,IAAhB;iBACS,CAAT;;SAEC8G,iBAAL,CAAuBlH,MAAvB;CATJ;;AAYArF,GAAG0L,kBAAH,GAAwB,UAAUgB,IAAV,EAAgB;QAChCrH,SAAS,KAAK0C,KAAL,CAAWyE,SAAX,EAAb;cACUE,IAAV;aACSrH,SAAS,GAAT,GAAe,GAAf,GAAqBA,SAAS,CAAT,GAAa,CAAb,GAAiBA,MAA/C;SACKiH,YAAL,CAAkBjH,MAAlB;SACKyF,qBAAL,CAA2BzF,MAA3B;CALJ;;AAQArF,GAAGuM,iBAAH,GAAuB,UAAUlH,MAAV,EAAkB;QACjClJ,MAAM,KAAK2P,gBAAL,CAAsBxP,SAAhC;QACIK,MAAM,eADV;UAEMR,IAAIW,OAAJ,CAAYH,GAAZ,EAAiB,EAAjB,CAAN;QACI,CAAC0I,MAAL,EAAa;eACF,aAAP;KADJ,MAEO,IAAIA,UAAU,EAAd,EAAkB;eACd,UAAP;KADG,MAEA,IAAIA,UAAU,EAAd,EAAkB;eACd,UAAP;KADG,MAEA;eACI,UAAP;;SAECyG,gBAAL,CAAsBxP,SAAtB,GAAkC,KAAK0P,OAAL,CAAa1P,SAAb,GAAyBH,GAA3D;SACK8O,aAAL,CAAmBpD,SAAnB,GAA+BxC,MAA/B;SACKsH,YAAL,CAAkB7J,eAAlB,CAAkCuC,SAAS,GAA3C;WACO,IAAP;CAhBJ;;;AAoBArF,GAAG+L,yBAAH,GAA+B,UAAU/I,GAAV,EAAe;QACtC,CAAC,KAAKkG,gBAAV,EAA4B;YACpBlM,WAAJ,CAAgB,KAAK+N,WAArB,EAAkCrC,UAAlC;;;QAGAkE,eAAJ;CALJ;;AAQA5M,GAAG6M,uBAAH,GAA6B,YAAY;QACjCrQ,QAAJ,CAAa,KAAKuO,WAAlB,EAA+BrC,UAA/B;WACO,IAAP;CAFJ;;AAKA1I,GAAG8M,eAAH,GAAqB,YAAY;;;QACzBzN,EAAJ,CAAO,KAAK0L,WAAZ,EAAyB,YAAzB,EAAuC,KAAK8B,uBAAL,CAA6BrJ,IAA7B,CAAkC,IAAlC,CAAvC,EACKnE,EADL,CACQrE,GADR,EACa,OADb,EACsB,eAAO;YACjB6Q,MAAM7I,IAAI0B,MAAd;;YAEImH,QAAQ,OAAKd,WAAb,IAA4B,CAAC,OAAKA,WAAL,CAAiB1O,QAAjB,CAA0BwP,GAA1B,CAAjC,EAAiE;mBACxDgB,uBAAL;;KALZ;WAQO,IAAP;CATJ;;AAaA7M,GAAG2L,UAAH,GAAgB,YAAY;QACpB,CAAC,KAAKzC,gBAAV,EAA4B;aACnBnB,KAAL,CAAWT,QAAX,KAAwB,KAAK5B,IAAL,EAAxB,GAAqC,KAAKE,KAAL,EAArC;;CAFR;;AAMA5F,GAAG0F,IAAH,GAAU,YAAY;QACdlJ,QAAJ,CAAa,KAAKyP,OAAlB,EAA2B,QAA3B;SACKlE,KAAL,CAAWrC,IAAX,CAAgB,IAAhB;WACO,IAAP;CAHJ;;AAMA1F,GAAG4F,KAAH,GAAW,YAAY;SACdmC,KAAL,CAAWrC,IAAX,CAAgB,KAAhB;QACIhJ,WAAJ,CAAgB,KAAKuP,OAArB,EAA8B,QAA9B;WACO,IAAP;CAHJ;;;AAOAjM,GAAG+M,iBAAH,GAAuB,UAAU/J,GAAV,EAAe;QAC9BsD,WAAW,KAAKyB,KAAL,CAAWxB,WAAX,EAAf;QACIyG,QAAQ,KAAKC,cADjB;QAEIC,OAAO,KAAKA,IAFhB;QAGI5G,QAAJ,EAAc;YACN5J,WAAJ,CAAgBsQ,KAAhB,EAAuBtE,UAAvB,EACKhM,WADL,CACiBwQ,IADjB,EACuBxE,UADvB;YAEItG,OAAO,KAAK+K,aAAL,CAAmB9K,qBAAnB,EAAX;YACI0B,WAAWf,IAAIG,OAAJ,GAAcf,KAAKK,IADlC;YAEIF,QAAQyK,MAAMI,WAFlB;YAGI3K,OAAOsB,WAAWxB,QAAQ,CAH9B;gBAIQH,KAAKG,KAAL,GAAaA,KAArB;eACOE,OAAO,CAAP,GAAW,CAAX,GAAeA,OAAOF,KAAP,GAAeA,KAAf,GAAuBE,IAA7C;gBACQsB,WAAW3B,KAAKG,KAAxB;cACMsF,SAAN,GAAkB,KAAKE,KAAL,CAAWsF,WAAX,CAAuB9K,QAAQ+D,QAA/B,CAAlB;YACIpJ,GAAJ,CAAQ8P,KAAR,EAAe,MAAf,EAAuBvK,OAAO,IAA9B;YACIvF,GAAJ,CAAQgQ,IAAR,EAAc,MAAd,EAAsB3K,QAAQ,GAAR,GAAc,GAApC;;WAEG,IAAP;CAlBJ;;AAqBAvC,GAAGsN,iBAAH,GAAuB,YAAY;QAC3B9Q,QAAJ,CAAa,KAAKyQ,cAAlB,EAAkCvE,UAAlC,EACKlM,QADL,CACc,KAAK0Q,IADnB,EACyBxE,UADzB;WAEO,IAAP;CAHJ;;AAMA1I,GAAG0K,WAAH,GAAiB,YAAY;QACrBhO,WAAJ,CAAgB,KAAK6Q,OAArB,EAA8B7E,UAA9B;WACO,IAAP;CAFJ;;AAKA1I,GAAGiK,WAAH,GAAiB,YAAY;QACrBzN,QAAJ,CAAa,KAAK+Q,OAAlB,EAA2B7E,UAA3B;WACO,IAAP;CAFJ;;AAKA1I,GAAG4K,QAAH,GAAc,YAAY;QAClB4C,IAAI,KAAKzF,KAAL,CAAW0F,WAAX,CAAuB,IAAvB,CAAR;SACKC,WAAL,IAAoB3R,IAAImB,GAAJ,CAAQ,KAAKwQ,WAAb,EAA0B,OAA1B,EAAoCF,IAAI,GAAxC,CAApB;QACI,KAAKzF,KAAL,CAAW4F,aAAX,KAA6B,CAAjC,EAAoC;aAC3BjD,WAAL;;CAJR;;AAQA1K,GAAGyL,oBAAH,GAA0B,UAAUiB,IAAV,EAAgB;QAClClG,cAAc,KAAKuB,KAAL,CAAWtB,cAAX,EAAlB;QACIH,WAAW,KAAKyB,KAAL,CAAWxB,WAAX,EADf;mBAEemG,IAAf;kBACclG,cAAc,CAAd,GAAkB,CAAlB,GAAsBA,cAAcF,QAAd,GAAyBA,QAAzB,GAAoCE,WAAxE;SACKuB,KAAL,CAAW0C,cAAX,CAA0BjE,WAA1B;SACK0F,cAAL;CANJ;;AASAlM,GAAGqM,UAAH,GAAgB,UAAUuB,OAAV,EAAmB;QAC3BvH,OAAO,KAAK0B,KAAL,CAAWxB,WAAX,EAAX;QACI5F,MAAM,KAAKkN,SADf;QAEID,OAAJ,EAAa;cACH,KAAKpH,WAAX;eACO,KAAKuB,KAAL,CAAWtB,cAAX,EAAP;;QAEAoB,SAAJ,GAAgB,KAAKE,KAAL,CAAWsF,WAAX,CAAuBhH,IAAvB,CAAhB;WACO,IAAP;CARJ;;AAWArG,GAAG8N,cAAH,GAAoB,YAAY;QACxB,KAAK/F,KAAL,CAAWgG,UAAX,EAAJ,EAA6B;aACpBrI,IAAL;;SAEC2G,UAAL,GACK2B,cADL;CAJJ;;AAQAhO,GAAGkK,YAAH,GAAkB,YAAY;QACtB1N,QAAJ,CAAa,KAAKyR,aAAlB,EAAiCvF,UAAjC;WACO,IAAP;CAFJ;;AAKA1I,GAAGkO,YAAH,GAAkB,YAAY;;;QACtBpI,MAAM,KAAKiC,KAAL,CAAWqC,OAAX,EAAV;;QAEI,CAACtE,GAAL,EAAU;qBACO2C,iBAAb;YACI/L,WAAJ,CAAgB,KAAKuR,aAArB,EAAoCvF,UAApC;YACI3M,IAAIE,QAAJ,CAAa,KAAK8O,WAAlB,EAA+BrC,UAA/B,CAAJ,EAAgD;gCACxBwC,WAAW;uBAAM,OAAKhB,YAAL,EAAN;aAAX,EAAsC,IAAtC,CAApB;;;WAGD,IAAP;CAVJ;;AAaAlK,GAAGgO,cAAH,GAAoB,YAAY;QACxBtR,WAAJ,CAAgB,KAAKuR,aAArB,EAAoC,kBAApC;SACK/E,gBAAL,GAAwB,KAAxB;WACO,IAAP;CAHJ;;AAMAlJ,GAAG2K,eAAH,GAAqB,YAAY;QACzBnO,QAAJ,CAAa,KAAKyR,aAAlB,EAAiC,kBAAjC;SACK/E,gBAAL,GAAwB,IAAxB;WACO,IAAP;CAHJ;;AAMAlJ,GAAGmO,gBAAH,GAAsB,YAAY;;;QAC1B3D,UAAU,KAAKzC,KAAL,CAAW7L,EAAzB;;SAEKkQ,WAAL,CAAiB/M,EAAjB,CAAoB,kBAApB,EAAwC,UAAC2D,GAAD,EAAMe,QAAN,EAAmB;eAClDgE,KAAL,CAAW0C,cAAX,CAA0B1G,QAA1B,EAAoC,IAApC;eACKsI,UAAL,CAAgB,IAAhB;KAFJ;SAIKM,YAAL,CAAkBtN,EAAlB,CAAqB,eAArB,EAAuC,UAAC2D,GAAD,EAAMe,QAAN,EAAmB;eAClDuI,YAAL,CAAkBvI,QAAlB,EAA4B,IAA5B;KADH;QAGI1E,EAAJ,CAAO,KAAK8N,aAAZ,EAA2B,qBAA3B,EAAkD,KAAKJ,iBAAL,CAAuBvJ,IAAvB,CAA4B,IAA5B,CAAlD,EACKnE,EADL,CACQ,KAAK8N,aADb,EAC4B,UAD5B,EACwC,KAAKG,iBAAL,CAAuB9J,IAAvB,CAA4B,IAA5B,CADxC,EAEKnE,EAFL,CAEQ,KAAKmK,SAFb,EAEwB,SAFxB,EAEmC,KAAK2B,OAAL,CAAa3H,IAAb,CAAkB,IAAlB,CAFnC,EAGKnE,EAHL,CAGQ,KAAKmK,SAHb,EAGwB,WAHxB,EAGqC,KAAK0E,YAAL,CAAkB1K,IAAlB,CAAuB,IAAvB,CAHrC,EAIKnE,EAJL,CAIQmL,OAJR,EAIiB,gBAJjB,EAImC,KAAKsD,cAAL,CAAoBtK,IAApB,CAAyB,IAAzB,CAJnC,EAKKnE,EALL,CAKQmL,OALR,EAKiB,YALjB,EAK+B,KAAK0B,cAAL,CAAoB1I,IAApB,CAAyB,IAAzB,CAL/B,EAMKnE,EANL,CAMQmL,OANR,EAMiB,UANjB,EAM6B,KAAKpB,gBAAL,CAAsB5F,IAAtB,CAA2B,IAA3B,CAN7B,EAOKnE,EAPL,CAOQmL,OAPR,EAOiB,SAPjB,EAO4B,KAAKE,WAAL,CAAiBlH,IAAjB,CAAsB,IAAtB,CAP5B;WAQO,KAAKsJ,eAAL,GACFpD,mBADE,EAAP;CAlBJ;;AAsBA1J,GAAGoO,QAAH,GAAc,YAAY;QAClB9O,GAAJ,CAAQtE,GAAR,EACKsE,GADL,CACS,KAAKyL,WADd,EAEKzL,GAFL,CAES,KAAKkK,SAFd,EAGKlK,GAHL,CAGS,KAAKyI,KAAL,CAAW7L,EAHpB;WAIO,IAAP;CALJ;;AAQA8D,GAAGqO,UAAH,GAAgB,YAAY;SACnB,IAAI1P,GAAT,IAAgB,IAAhB,EAAsB;eACX,KAAKA,GAAL,CAAP;;WAEG,IAAP;CAJJ;;AAOAqB,GAAGwE,OAAH,GAAa,YAAY;QACjB,KAAKgF,SAAT,EAAoB;aACX4C,WAAL,CAAiB5H,OAAjB;aACKmI,YAAL,CAAkBnI,OAAlB;aACK4J,QAAL,GACKC,UADL;;WAGG,IAAP;CAPJ;;AAUArO,GAAGsO,qBAAH,GAA2B,YAAY;QAC/BrQ,UAAU,KAAKuL,SAAnB;SACK+D,OAAL,GAAexR,IAAIgC,aAAJ,CAAkB,kBAAlB,EAAsCE,OAAtC,CAAf;SACK+L,QAAL,GAAgBjO,IAAIgC,aAAJ,CAAkB,cAAlB,EAAkCE,OAAlC,CAAhB;WACO,IAAP;CAJJ;;AAOA+B,GAAGuO,YAAH,GAAkB,YAAY;QACtBtQ,UAAU,KAAKuL,SAAnB;SACKyC,OAAL,GAAelQ,IAAIgC,aAAJ,CAAkB,mBAAlB,EAAuCE,OAAvC,CAAf;SACKkP,aAAL,GAAqBpR,IAAIgC,aAAJ,CAAkB,yBAAlB,EAA6CE,OAA7C,CAArB;SACKgP,cAAL,GAAsBlR,IAAIgC,aAAJ,CAAkB,2BAAlB,EAA+CE,OAA/C,CAAtB;SACKuI,WAAL,GAAmBzK,IAAIgC,aAAJ,CAAkB,uBAAlB,EAA2CE,OAA3C,CAAnB;SACK4P,SAAL,GAAiB9R,IAAIgC,aAAJ,CAAkB,qBAAlB,EAAyCE,OAAzC,CAAjB;SACKyP,WAAL,GAAmB3R,IAAIgC,aAAJ,CAAkB,sBAAlB,EAA0CE,OAA1C,CAAnB;SACK6N,gBAAL,GAAwB/P,IAAIgC,aAAJ,CAAkB,oBAAlB,EAAwCE,OAAxC,CAAxB;SACK+N,OAAL,GAAejQ,IAAIgC,aAAJ,CAAkB,eAAlB,EAAmCE,OAAnC,CAAf;SACK8M,WAAL,GAAmBhP,IAAIgC,aAAJ,CAAkB,uBAAlB,EAA2CE,OAA3C,CAAnB;SACK+M,eAAL,GAAuBjP,IAAIgC,aAAJ,CAAkB,4BAAlB,EAAgDE,OAAhD,CAAvB;SACKgN,aAAL,GAAqBlP,IAAIgC,aAAJ,CAAkB,yBAAlB,EAA6CE,OAA7C,CAArB;SACKwL,aAAL,GAAqB1N,IAAIgC,aAAJ,CAAkB,yBAAlB,EAA6CE,OAA7C,CAArB;SACKiP,IAAL,GAAYnR,IAAIgC,aAAJ,CAAkB,eAAlB,EAAmCE,OAAnC,CAAZ;SACK0O,YAAL,GAAoB,IAAIlL,MAAJ,CAAW,IAAX,CAApB;SACK2K,WAAL,GAAmB,IAAI3K,MAAJ,EAAnB;SACK2K,WAAL,CAAiB3H,IAAjB,CAAsB,KAAK0I,aAA3B;SACKR,YAAL,CAAkBlI,IAAlB,CAAuB,KAAKsG,WAA5B,EAAyC,KAAKiB,OAA9C;WACO,IAAP;CAnBJ;;AAsBAhM,GAAGwO,SAAH,GAAe,YAAY;WAChB,KAAKzG,KAAL,CAAWyG,SAAX,EAAP;CADJ;;AAIAxO,GAAGyO,YAAH,GAAkB,YAAY;SACrBR,aAAL,GAAqBlS,IAAIyC,aAAJ,CAAkB,KAAlB,CAArB;QACIhC,QAAJ,CAAa,KAAKyR,aAAlB,EAAiC,kBAAjC;SACKA,aAAL,CAAmBpG,SAAnB,GAA+B3C,QAA/B;SACKsE,SAAL,CAAe1E,WAAf,CAA2B,KAAKmJ,aAAhC;WACO,KAAKM,YAAL,GACFhC,iBADE,CACgB,KAAKxE,KAAL,CAAWyE,SAAX,EADhB,EAEF2B,gBAFE,EAAP;CALJ;;AAUAnO,GAAG0O,UAAH,GAAgB,YAAY;QACpB,CAAC,KAAKlF,SAAV,EAAqB;;YACbA,YAAYzN,IAAIyC,aAAJ,CAAkB,KAAlB,EAAyB;sBACvB,GADuB;SAAzB,CAAhB;YAGIgE,SAASuG,SAASxL,iBAAiB,KAAKmH,MAAtB,EAA8BlC,MAAvC,CAHb;aAIK6G,YAAL,GAAoB,KAApB;kBACUxB,SAAV,GAAsB5C,GAAtB;YACI/H,GAAJ,CAAQsM,SAAR,EAAmB,QAAnB,EAA6B,CAAChH,UAAUmG,cAAX,IAA6B,IAA1D;aACKa,SAAL,GAAiBA,SAAjB;kBACU1E,WAAV,CAAsB,KAAKiD,KAAL,CAAWtD,IAAX,EAAtB;YACIjI,QAAJ,CAAa,KAAKgN,SAAlB,EAA6B,mBAA7B;;YAEI,KAAKtE,QAAL,IAAiB,CAAC,KAAKiE,iBAA3B,EAA8C;iBACrCsF,YAAL;SADJ,MAEO,IAAI,KAAKtF,iBAAT,EAA4B;iBAC1BpB,KAAL,CAAWmG,YAAX;;aAECxJ,MAAL,CAAYI,WAAZ,CAAwB,KAAK0E,SAA7B;aACK8E,qBAAL,GACK/J,SADL;;WAGG,IAAP;CAtBJ;;AAyBAvE,GAAG2O,YAAH,GAAkB,UAAUtH,GAAV,EAAe;SACxBU,KAAL,CAAW6G,YAAX,CAAwBvH,GAAxB;CADJ;;AAIAuB,QAAQnE,IAAR,GAAe,UAAUzG,QAAV,EAAoB6K,OAApB,EAA6B;WACjC,IAAID,OAAJ,CAAY5K,QAAZ,EAAsB6K,OAAtB,EAA+B6F,UAA/B,EAAP;CADJ;;;;;;;;"}