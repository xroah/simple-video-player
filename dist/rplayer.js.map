{"version":3,"file":"rplayer.js","sources":["../src/scripts/global.js","../src/scripts/dom/index.js","../src/scripts/subscriber.js","../src/scripts/message/loading.js","../src/scripts/message/error.js","../src/scripts/dom/fullscreen_api.js","../src/scripts/controls/video/fullscreen.js","../src/scripts/controls/video/video_control.js","../src/scripts/controls/slider.js","../src/scripts/controls/volume_control.js","../src/scripts/controls/video/play_control.js","../src/scripts/message/time_info.js","../src/scripts/message/popup.js","../src/scripts/controls/video/video_progress.js","../src/scripts/index.js"],"sourcesContent":["\"use strict\";\nconst DEFAULT_OPTIONS = {\n        autoPlay: false,\n        defaultVolume: 50,\n        loop: false,\n        poster: \"\",\n        preload: \"metadata\",\n        source: \"\",\n        msg: \"\"\n    },\n    ERROR_TYPE = { //视频播放错误类型\n        \"1\": \"MEDIA_ERR_ABORTED\",\n        \"2\": \"MEDIA_ERR_NETWORK\",\n        \"3\": \"MEDIA_ERR_DECODE\",\n        \"4\": \"MEDIA_ERR_SRC_NOT_SUPPORTED\"\n    },\n    TYPE = {\n        function: \"[object Function]\",\n        object: \"[object Object]\",\n        string: \"[object String]\",\n        undef: \"[object Undefined]\"\n    },\n    VOLUME_STEP = 5,\n    VIDEO_STEP = 10,\n    KEY_MAP = {\n        \"up\": VOLUME_STEP, //IE\n        \"arrowup\": VOLUME_STEP,\n        \"down\": -VOLUME_STEP, //IE\n        \"arrowdown\": -VOLUME_STEP,\n        \"left\": -VIDEO_STEP, //IE\n        \"arrowleft\": -VIDEO_STEP,\n        \"right\": VIDEO_STEP, //IE\n        \"arrowright\": VIDEO_STEP,\n        \"esc\": \"esc\", //IE\n        \"escape\": \"escape\",\n        \" \": \"space\",\n        \"spacebar\": \"space\", //IE\n        \"enter\": \"enter\"\n    };\nlet doc = document,\n    isType = type => obj => Object.prototype.toString.call(obj) === TYPE[type],\n    isFunction = isType(\"function\"),\n    isObject = isType(\"object\"),\n    isString = isType(\"string\"),\n    isUndefined = isType(\"undef\"),\n    isWindow = obj => obj && obj.window === obj;\n\nexport function extend(target, source) {\n    if (arguments.length) {\n        for (let key in source) {\n            let copy = source[key],\n                t = target[key];\n            if (isObject(copy) && isObject(t)) {\n                extend(target[key], source[key]);\n            } else {\n                target[key] = copy;\n            }\n        }\n    }\n    return target;\n}\n\nexport function toArray(likeArr, start = 0) {\n    return Array.isArray(likeArr) ? likeArr.slice(start) :\n        likeArr.length ?  Array.prototype.slice.call(likeArr, start) : [];\n}\n\nexport function removeProp(obj, prop) {\n    if (prop) {\n        try{\n            delete obj[prop];\n        }catch (e){}\n    } else {\n        for (prop in obj) {\n            delete obj[prop];\n        }\n    }\n}\n\nexport function noop() {\n    return function () {};\n}\n\nexport function convertTime(time) {\n    let changeLen = num => num < 10 ? \"0\" + num : num.toString(),\n        str, h, m, s;\n    time = Math.ceil(time);\n    if (time <= 0) {\n        str = \"00:00\";\n    } else if (time < 60) {\n        str = \"00:\" + changeLen(time);\n    } else if (time < 3600) {\n        m = Math.floor(time / 60);\n        s = time % 60;\n        str = changeLen(m) + \":\" + changeLen(s);\n    } else {\n        h = Math.floor(time / 3600);\n        str = time % 3600;\n        m = Math.floor(str / 60);\n        s = str % 60;\n        str = changeLen(h) + \":\" + changeLen(m) + \":\" + changeLen(s);\n    }\n    return str;\n}\n\nexport {\n    doc,\n    DEFAULT_OPTIONS,\n    ERROR_TYPE,\n    KEY_MAP,\n    isFunction,\n    isObject,\n    isString,\n    isUndefined,\n    isWindow\n};","import {doc, isFunction, isObject, isUndefined, isString, isWindow} from \"../global.js\";\nlet dom = {\n        handlers: {}\n    },\n    guid = 1;\n\ndom.hasClass = function (el, cls) {\n    if (!el) return false;\n    if (el.classList) {\n        return el.classList.contains(cls);\n    }\n    //如果className为XXX-active, cls为active,\n    //如果不加空格判断则获取的结果不准确\n    return (\" \" + el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n};\n\ndom.addClass = function (el, cls) {\n    if (el && !this.hasClass(el, cls)) {\n        if (el.classList) {\n            el.classList.add(cls);\n        } else {\n            el.className += \" \" + cls;\n        }\n    }\n    return this;\n};\n\ndom.removeClass = function (el, cls) {\n    let reg = new RegExp(\"\\\\s+\" + cls + \"\\\\s+\"),\n        className;\n    if (el && this.hasClass(el, cls)) {\n        className = \" \" + el.className + \" \";\n        if (el.classList) {\n            el.classList.remove(cls);\n        } else {\n            el.className = className.replace(reg, \" \").trim();\n        }\n    }\n    return this;\n};\n\ndom.toggleClass = function (el, cls) {\n    let reg = new RegExp(\"\\\\s+\" + cls + \"\\\\s+\"),\n        className;\n    if (el) {\n        if (el.classList) {\n            el.classList.toggle(cls);\n        } else {\n            className = \" \" + el.className + \" \";\n            cls = \" \" + cls + \" \";\n            if (className.indexOf(cls) > -1) {\n                el.className = className.replace(reg, \" \").trim();\n            } else {\n                el.className += \" \" + cls;\n            }\n        }\n    }\n    return this;\n};\n\ndom.css = function (el, prop, val) {\n    let css = \"\";\n    if (!isUndefined(val)) {\n        el.style[prop] = val;\n    } else {\n        if (isObject(prop)) {\n            for (val in prop) {\n                css += val + \":\" + prop[val] + \";\";\n            }\n            el.style.cssText += css;\n        } else if (isString(prop)) {\n            return getComputedStyle(el).getPropertyValue(prop);\n        }\n    }\n    return this;\n};\n\n//选择元素， 只选中一个\ndom.selectElement = function (selector, context) {\n    let ret,\n        reg = /^#[^>~+\\[\\]\\s:]+$/; //匹配id选择器\n    context = context || doc;\n    if (selector) {\n        if (selector.nodeName || isWindow(selector)) {\n            ret = selector;\n        } else if (typeof selector === \"string\") {\n            if (reg.test(selector)) {\n                ret = doc.getElementById(selector.substring(1));\n            } else {\n                ret = context.querySelector(selector);\n            }\n        }\n    }\n    return ret;\n};\n\n//创建元素\ndom.createElement = function (name, attrs) {\n    let el = doc.createElement(name),\n        key;\n    if (isObject(attrs)) {\n        for (key in attrs) {\n            el.setAttribute(key, attrs[key]);\n        }\n    }\n    return el;\n};\n\n//添加元素事件\ndom._on = function (el, type, callback) {\n    let id = el.guid,\n        handler;\n    if (!id) {\n        id = guid++;\n        Object.defineProperty(el, \"guid\", {\n            value: id\n        });\n    }\n    handler = this.handlers[id];\n    if (!handler) {\n        handler = this.handlers[id] = {};\n        handler[type] = [];\n    } else if (!handler[type]) {\n        handler[type] = [];\n    }\n    handler[type].push(callback);\n    el.addEventListener(type, callback);\n};\n\ndom.on = function (selector, type, callback, off) {\n    let el = this.selectElement(selector),\n        i;\n    if (el) {\n        if (type) {\n            //添加多个事件，以空格分开\n            type = type.split(\" \");\n            i = type.length;\n            if (isFunction(callback)) {\n                for (; i--;) {\n                    let t = type[i];\n                    off ? this._off(el, t, callback) :\n                        this._on(el, t, callback);\n                }\n            } else if(off){\n                for (; i--;) {\n                    this._off(el, type[i]);\n                }\n            }\n        } else if(off) {\n            this._off(el);\n        }\n\n    }\n    return this;\n};\n\n//移除元素的事件\ndom._off = function (el, type, callback) {\n    let handlers = this.handlers[el.guid];\n    if (handlers) {\n        if (type && (handlers = handlers[type])) {\n            if (callback) {\n                for (let i = 0, len = handlers.length; i < len; i++ ) {\n                    if (handlers[i] === callback) {\n                        handlers.splice(i, 1);\n                        el.removeEventListener(type, callback);\n                        break;\n                    }\n                }\n            } else {\n                handlers.forEach(function (fn) {\n                    el.removeEventListener(type, fn);\n                });\n                dom.handlers[type] = [];\n            }\n        } else if (!type) {//如果没有type, 则移除该元素的所有事件\n            for (let key in handlers) {\n                this._off(el, key);\n            }\n        }\n    }\n};\n\ndom.off = function (selector, type, callback) {\n    return this.on(selector, type, callback, true);\n};\n\ndom.once = function (selector, type, callback) {\n    let cb, _this = this;\n    if (isFunction(callback)) {\n        cb = function () {\n            let args = Array.prototype.slice.call(arguments);\n            callback.apply(this, args);\n            _this.off(selector, type, cb);\n        };\n        this.on(selector, type, cb);\n    }\n    return this;\n};\n\nexport default dom;","import {isFunction, isString, toArray} from \"./global.js\";\nimport {isUndefined} from \"./global\";\n\nfunction CEvent(type) {\n    this.type = type;\n    this.data = null;\n    this.timeStamp = 0;\n}\n\nfunction Subscriber() {\n    this.handlers = {};\n}\n\nSubscriber.prototype = {\n    constructor: Subscriber,\n    _on(type, fn) {\n        if (!this.handlers[type]) {\n            this.handlers[type] = [];\n        }\n        this.handlers[type].push(fn);\n    },\n    on(type, fn) {\n        if (isFunction(fn)) {\n            if (!isString(type)) {\n                throw new TypeError(\"事件类型只能为String\");\n            }\n            type = type.split(\" \");\n            for (let i = type.length; i--;) {\n                this._on(type[i], fn);\n            }\n        }\n        return this;\n    },\n    _off(type, fn) {\n        let handlers = this.handlers[type];\n        if (handlers) {\n            if (isFunction(fn)) {\n                for(let i = handlers.length; i--;) {\n                    if (fn === handlers[i]) {\n                        handlers.splice(i, 1);\n                        break;\n                    }\n                }\n            } else if (isUndefined(fn)) {\n                this.handlers[type] = [];\n            }\n        }\n    },\n    off(type, fn) {\n        let len = arguments.length;\n        if (len && isString(type)) {\n            let args = toArray(arguments, 1);\n            type = type.split(\" \");\n            for (let i = type.length; i--;) {\n                this._off.call(this, type[i], ...args);\n            }\n        } else if (!len) {\n            //没传参数则移除所有绑定\n            this.handlers = {};\n        }\n        return this;\n    },\n    once(type, fn) {\n        if (isFunction(fn)) {\n            let self = this,\n                f = function () {\n                    fn.apply(this, arguments);\n                    self.off(type, f);\n                };\n            this.on(type, f);\n        }\n    },\n    trigger(type) {\n        let args = toArray(arguments, 1),\n            h = this.handlers[type],\n            e;\n        if (h) {\n            e = new CEvent(type);\n            e.data = args;\n            e.timeStamp = Date.now();\n            args = [e].concat(args);\n            for (let i = h.length; i--; ) {\n                h[i].apply(this, args);\n            }\n        }\n        return this;\n    }\n};\n\nexport default Subscriber;","import dom from \"../dom/index.js\";\n\nfunction Loading() {\n    this.el = dom.createElement(\"div\", {\"class\": \"rplayer-loading rplayer-hide\"});\n}\n\nLoading.prototype = {\n    constructor: Loading,\n    show() {\n        dom.removeClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    hide() {\n        dom.addClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    toggle: function () {\n        dom.toggleClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    init(target) {\n        target.appendChild(this.el);\n        return this;\n    }\n};\n\nexport default Loading;","import dom from \"../dom/index.js\";\nimport {isFunction, noop} from \"../global.js\";\n\nfunction VideoError() {\n    this.el = dom.createElement(\"div\", {\"class\": \"rplayer-error rplayer-hide\"});\n    this.msgEl = dom.createElement(\"div\", {\"class\": \"rplayer-msg\"});\n    this.callback = noop();\n}\n\nVideoError.prototype = {\n    constructor: VideoError,\n    show(msg) {\n        this.setMessage(msg);\n        dom.removeClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    hide() {\n        dom.addClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    setMessage(msg) {\n        this.msgEl.innerHTML = msg;\n        return this;\n    },\n    initEvent() {\n        dom.on(this.msgEl, \"click\", this.callback);\n        return this;\n    },\n    init(target, callback) {\n        this.el.appendChild(this.msgEl);\n        target.appendChild(this.el);\n        if (isFunction(callback)) {\n            this.callback = callback;\n        }\n        return this.initEvent();\n    }\n};\n\nexport default VideoError;","let fsApi = (function () {\n    let fullScreenApi = [\n            //W3C\n            [\n                \"requestFullscreen\",\n                \"exitFullscreen\",\n                \"fullscreenElement\",\n                \"fullscreenEnabled\",\n                \"fullscreenchange\",\n                \"fullscreenerror\"\n            ],\n            // WebKit\n            [\n                \"webkitRequestFullscreen\",\n                \"webkitExitFullscreen\",\n                \"webkitFullscreenElement\",\n                \"webkitFullscreenEnabled\",\n                \"webkitfullscreenchange\",\n                \"webkitfullscreenerror\"\n            ],\n            // Firefox\n            [\n                \"mozRequestFullScreen\",\n                \"mozCancelFullScreen\",\n                \"mozFullScreenElement\",\n                \"mozFullScreenEnabled\",\n                \"mozfullscreenchange\",\n                \"mozfullscreenerror\"\n            ],\n            // IE\n            [\n                \"msRequestFullscreen\",\n                \"msExitFullscreen\",\n                \"msFullscreenElement\",\n                \"msFullscreenEnabled\",\n                \"MSFullscreenChange\",\n                \"MSFullscreenError\"\n            ]\n\n        ],\n        fsApi = null,\n        defApi = fullScreenApi[0],\n        tmp, support;\n    for (let i = 0, len = fullScreenApi.length; i < len; i++) {\n        tmp = fullScreenApi[i];\n        if (tmp[1] in document) {\n            support = true;\n            break;\n        }\n    }\n\n    if (support) {\n        fsApi = {};\n        tmp.forEach(function (prop, i) {\n            fsApi[defApi[i]] = prop;\n        });\n    }\n    return fsApi;\n})();\n\nexport default fsApi;","import dom from \"../../dom/index.js\";\nimport {doc} from \"../../global.js\";\nimport fsApi from \"../../dom/fullscreen_api.js\";\n\nconst FULL_SCREEN_CLASS = \"rplayer-fullscreen\";\n\nfunction FullScreen(el) {\n    this.el = el;\n    this.isFullScreen = false;\n    this.btn = dom.createElement(\"button\", {\"class\": \"rplayer-fullscreen-btn rplayer-rt\"});\n}\n\nFullScreen.prototype = {\n    constructor: FullScreen,\n    request() {\n        this.isFullScreen = true;\n        fsApi ?\n            this.el[fsApi.requestFullscreen]() :\n            this.fullPage();\n        dom.addClass(this.el, FULL_SCREEN_CLASS)\n            .addClass(this.btn, FULL_SCREEN_CLASS);\n        return this;\n    },\n    exit() {\n        this.isFullScreen = false;\n        fsApi ?\n            doc[fsApi.exitFullscreen]() :\n            this.fullPage(true);\n        dom.removeClass(this.btn, FULL_SCREEN_CLASS)\n            .removeClass(this.el, FULL_SCREEN_CLASS);\n        return this;\n    },\n    toggle() {\n        return this.isFullScreen = !this.isFullScreen ?\n            this.request() :\n            this.exit();\n    },\n    fullPage(exit) {\n        //不支持全屏的浏览器铺满页面可视区域\n        exit ?\n            dom.removeClass(this.el, \"rplayer-fixed\") :\n            dom.addClass(this.el, \"rplayer-fixed\");\n        return this;\n    },\n    initEvent() {\n        if (fsApi) {\n            dom.on(doc, fsApi.fullscreenchange, () => {\n                if (!doc[fsApi.fullscreenElement]) {\n                    this.exit();\n                }\n            }).on(doc, fsApi.fullscreenerror, () => {\n                this.exit();\n            });\n        }\n        dom.on(this.btn, \"click\", this.toggle.bind(this));\n        return this;\n    },\n    init(el, target) {\n        this.el = el;\n        target.appendChild(this.btn);\n        return this.initEvent();\n    }\n};\n\nexport default FullScreen;","import dom from \"../../dom/index.js\";\nimport {doc, isUndefined, extend} from \"../../global.js\";\nimport Subscriber from \"../../subscriber.js\";\nimport {ERROR_TYPE, removeProp} from \"../../global\";\n\nexport const VIDEO_LOADED_META = \"video.loaded.meta\";\nexport const VIDEO_TIME_UPDATE = \"video.time.update\";\nexport const VIDEO_SEEKING = \"video.seeking\";\nexport const VIDEO_LOAD_START = \"video.load.start\";\nexport const VIDEO_PROGRESS = \"video.progress\";\nexport const VIDEO_CAN_PLAY = \"video.can.play\";\nexport const VIDEO_ENDED = \"video.ended\";\nexport const VIDEO_ERROR = \"video.error\";\nexport const VIDEO_PLAYING = \"video.playing\";\nexport const VIDEO_PAUSE = \"video.pause\";\nexport const VIDEO_DBLCLICK = \"video.dblclick\";\nexport const VIDEO_CLICK = \"video.click\";\nexport const VIDEO_VOLUME_CHANGE = \"video.volume.change\";\n\nfunction VideoControl(config) {\n    Subscriber.call(this);\n    this.config = config;\n    this.playedTime = null;\n}\n\nlet fn = VideoControl.prototype = Object.create(Subscriber.prototype),\n    proto = {\n        constructor: VideoControl,\n        setVolume(volume) {\n            //音量只能设置0-1的值\n            if (volume > 1) {\n                volume = volume / 100;\n            }\n            this.el.volume = volume;\n            this.el.muted = !volume;\n            return this;\n        },\n        getVolume() {\n            return Math.floor(this.el.volume * 100);\n        },\n        mute(mute) {\n            this.el.muted = isUndefined(mute) ? true : !!mute;\n            return this;\n        },\n        isMuted() {\n            return this.el.muted;\n        },\n        autoPlay(play) {\n            this.el.autoplay = !!play;\n            return this;\n        },\n        isAutoPlay() {\n            return this.el.autoplay;\n        },\n        play(play) {\n            if (isUndefined(play) || !!play) {\n                this.el.play();\n            } else {\n                this.el.pause();\n            }\n            return this;\n        },\n        togglePlay() {\n            //当开始加载视频还不能播放时点击播放会报错\n            if (this.getDuration()) {\n                let paused = this.isPaused();\n                this.play(paused);\n            }\n            return this;\n        },\n        isPaused() {\n            return this.el.paused;\n        },\n        isError() {\n            let err = this.el.error;\n            return err ? err.code : err;\n        },\n        loop(isLoop) {\n            this.el.loop = !!isLoop;\n            return this;\n        },\n        isLoop() {\n            return this.el.loop;\n        },\n        setPoster(poster) {\n            this.el.poster = poster;\n            return this;\n        },\n        setPreload(preload) {\n            this.el.preload = preload;\n            return this;\n        },\n        setCurrentTime(time, scale) {\n            let duration = this.getDuration();\n            if (scale) {\n                time = duration * time;\n            }\n            this.el.currentTime = time;\n            return this;\n        },\n        getCurrentTime() {\n            return this.el.currentTime;\n        },\n        getDuration() {\n            return this.el.duration;\n        },\n        getPlayedPercentage() {\n            return this.getCurrentTime() / this.getDuration();\n        },\n        getBuffered(percent) {\n            let buffered = this.el.buffered,\n                len = buffered.length;\n            if (percent) {\n                //缓冲的百分比\n                return len ? buffered = buffered.end(len - 1) / this.getDuration() * 100 : null;\n            }\n            return buffered;\n        },\n        getReadyState() {\n            return this.el.readyState;\n        },\n        showControls() {\n            this.el.controls = true;\n            return this;\n        },\n        reload() {\n            this.el.load();\n            return this;\n        },\n        changeSource(src) {\n            let paused = this.isPaused();\n            if (this.source !== src) {\n                this.source = src;\n                this.initSource(src);\n            }\n            if (!paused) {\n                this.play(true);\n            }\n            return this;\n        },\n        getSource() {\n            return this.el.currentSrc;\n        },\n        initSource(source) {\n            let frag = doc.createDocumentFragment();\n            if (typeof source === \"string\") {\n                this.el.src = source;\n            } else if (Array.isArray(source)) {\n                this.el.innerHTML = \"\";\n                source.forEach(function (src) {\n                    let sourceEl = dom.createElement(\"source\", {src: src});\n                    frag.appendChild(sourceEl);\n                });\n                this.el.appendChild(frag);\n            }\n            return this;\n        },\n        handleError() {\n            let code = this.isError(),\n                err, message;\n            //出现错误保存当前播放进度，恢复后从当前进度继续播放\n            this.playedTime = this.getCurrentTime();\n            err = ERROR_TYPE[code];\n            switch (err) {\n                case \"MEDIA_ERR_ABORTED\":\n                    message = \"出错了\";\n                    break;\n                case \"MEDIA_ERR_NETWORK\":\n                    message = \"网络错误或视频地址无效\";\n                    break;\n                case \"MEDIA_ERR_DECODE\":\n                case \"MEDIA_ERR_SRC_NOT_SUPPORTED\":\n                    message = \"解码失败,不支持的视频格式或地址无效\";\n            }\n            message += \",点击刷新\";\n            return {\n                code,\n                message\n            };\n        },\n        notify(type) {\n            let args = {\n                [VIDEO_LOADED_META]: [{duration: this.getDuration()}],\n                [VIDEO_TIME_UPDATE]: [this.getCurrentTime()],\n                [VIDEO_PROGRESS]: [this.getBuffered(true), this.getReadyState()],\n                [VIDEO_ERROR]: [this.handleError()],\n                [VIDEO_VOLUME_CHANGE]: [this.isMuted() ? 0 : this.getVolume()]\n            },\n                a = args[type] || [];\n            if (type === VIDEO_LOAD_START && this.playedTime) {\n                this.setCurrentTime(this.playedTime);\n                this.playedTime = 0;\n            }\n            return this.trigger(type, ...a);\n        },\n        initEvent() {\n            let el = this.el;\n            dom.on(el, \"loadedmetadata\", this.notify.bind(this, VIDEO_LOADED_META))\n                .on(el, \"timeupdate\", this.notify.bind(this, VIDEO_TIME_UPDATE))\n                .on(el, \"seeking\", this.notify.bind(this, VIDEO_SEEKING))\n                .on(el, \"loadstart\", this.notify.bind(this, VIDEO_LOAD_START))\n                .on(el, \"progress\", this.notify.bind(this, VIDEO_PROGRESS))\n                .on(el, \"canplay seeked\", this.notify.bind(this, VIDEO_CAN_PLAY))\n                .on(el, \"ended\", this.notify.bind(this, VIDEO_ENDED))\n                .on(el, \"error\", this.notify.bind(this, VIDEO_ERROR))\n                .on(el, \"playing\", this.notify.bind(this, VIDEO_PLAYING))\n                .on(el, \"pause\", this.notify.bind(this, VIDEO_PAUSE))\n                .on(el, \"volumechange\", this.notify.bind(this, VIDEO_VOLUME_CHANGE))\n                .on(el, \"dblclick\", this.notify.bind(this, VIDEO_DBLCLICK))\n                .on(el, \"click\", this.notify.bind(this, VIDEO_CLICK))\n                .on(el, \"contextmenu\", evt => evt.preventDefault());\n        },\n        init(target) {\n            let video = dom.createElement(\"video\"),\n                text = doc.createTextNode(this.config.msg.toString());\n            this.source = this.config.source;\n            video.appendChild(text);\n            this.el = video;\n            dom.addClass(this.el, \"rplayer-video\");\n            target.appendChild(video);\n            this.initSource(this.source)\n                .autoPlay(this.config.autoPlay)\n                .loop(this.config.loop)\n                .setPoster(this.config.poster)\n                .setPreload(this.config.preload)\n                .initEvent();\n            return this;\n        },\n        destroy() {\n            dom.off(this.el);\n            this.off();\n            removeProp(this);\n        }\n    };\n\n\nextend(fn, proto);\n\nexport default VideoControl;","import Subscriber from \"../subscriber.js\"\nimport {doc, isUndefined, removeProp} from \"../global.js\";\nimport dom from \"../dom/index.js\";\n\nexport const SLIDER_MOVING = \"slider.moving\";\nexport const SLIDER_MOVE_DONE = \"slider.move.done\";\n//滑块状态改变(是否可以滑动/点击),视频加载时候为获取到元信息禁止改变进度\nexport const SLIDER_STATUS_CHANGE = \"slider.status.change\";\n\nfunction Slider(vertical) {\n    Subscriber.call(this);\n    this.vertical = isUndefined(vertical) ? false : !!vertical;\n    this.moveDis = this.pos = null;\n    this.moving = false;\n    this.enabled = true; //初始默认可以滑动/点击\n}\n\nlet proto = Slider.prototype = Object.create(Subscriber.prototype);\nproto.constructor = Slider;\n\nproto.getPosition = function () {\n    let parent = this.el.parentNode,\n        rect = parent.getBoundingClientRect(),\n        pos = getComputedStyle(this.el);\n    return {\n        width: parseFloat(pos.width),\n        height: parseFloat(pos.height),\n        origLeft: parseFloat(pos.left),\n        origTop: parseFloat(pos.top),\n        maxX: rect.width,\n        maxY: rect.height\n    }\n};\n\nproto.updateHPosition = function (val, scale) {\n    scale && (val = val * 100 + \"%\");\n    dom.css(this.bar, \"width\", val)\n        .css(this.el, \"left\", val);\n    return this;\n};\n\nproto.updateVPosition = function (val, scale) {\n    scale && (val = val * 100 + \"%\");\n    dom.css(this.bar, \"height\", val)\n        .css(this.el, \"bottom\", val);\n    return this;\n};\n\nproto.mouseDown = function (evt) {\n    //只有按鼠标左键时处理(evt.button=0)\n    if (!evt.button && this.enabled) {\n        let x = evt.clientX,\n            y = evt.clientY,\n            pos = this.getPosition(),\n            mouseMove = this.getMoveCallback().bind(this);\n        this.pos = {\n            width: pos.width,\n            height: pos.height,\n            offsetX: x - pos.origLeft,\n            offsetY: y - pos.origTop,\n            maxX: pos.maxX,\n            maxY: pos.maxY\n        };\n        dom.addClass(this.el, \"rplayer-moving\")\n            .on(doc, \"mousemove\", mouseMove)\n            .on(doc, \"mouseup\", this.mouseUp.bind(this))\n    }\n};\n\nproto.moveVertical = function (x, y) {\n    let distance;\n    distance = this.pos.maxY - (y - this.pos.offsetY) - this.pos.height;\n    distance = distance < 0 ? 0 : distance > this.pos.maxY ? this.pos.maxY : distance;\n    distance = distance / this.pos.maxY;\n    this.updateVPosition(distance, true);\n    return distance;\n};\n\nproto.moveHorizontal = function (x) {\n    let distance;\n    distance = x - this.pos.offsetX;\n    distance = distance < 0 ? 0 : distance > this.pos.maxX ? this.pos.maxX : distance;\n    distance = distance / this.pos.maxX;\n    this.updateHPosition(distance, true);\n    return distance;\n};\n\nproto.mouseMove = function (evt, fn) {\n    let x = evt.clientX,\n        y = evt.clientY,\n        distance = fn.call(this, x, y);\n    this.moving = true;\n    this.trigger(SLIDER_MOVING, this.moveDis = distance);\n};\n\nproto.getMoveCallback = function () {\n    return this.vertical ?\n        evt => this.mouseMove(evt, this.moveVertical) :\n        evt => this.mouseMove(evt, this.moveHorizontal);\n};\n\nproto.mouseUp = function () {\n    dom.off(doc, \"mousemove moseup\")\n        .removeClass(this.el, \"rplayer-moving\");\n    this.moving && this.trigger(SLIDER_MOVE_DONE, this.moveDis);\n    setTimeout(() => this.moving = false);\n};\n\nproto.clickTrack = function (evt) {\n    //移动滑块鼠标释放时会触发父元素点击事件,可能会导致鼠标释放后滑块位置改变\n    //如果移动滑块/被禁用则点击事件不做处理\n    if (!this.moving && this.enabled) {\n        let rect = this.track.getBoundingClientRect(),\n            x = evt.clientX,\n            y = evt.clientY,\n            eType = \"slider.moving\";\n        if (this.vertical) {\n            rect = (rect.height - y + rect.top) / rect.height;\n            this.updateVPosition(rect, true);\n        } else {\n            rect = (x - rect.left) / rect.width;\n            eType = \"slider.move.done\";\n            this.updateHPosition(rect, true);\n        }\n        this.trigger(eType, rect);\n    }\n};\n\nproto.initEvent = function () {\n    dom.on(this.el, \"mousedown\", this.mouseDown.bind(this))\n        .on(this.track, \"click\", this.clickTrack.bind(this));\n    this.on(SLIDER_STATUS_CHANGE, (evt, enable) => this.enabled = !!enable);\n    return this;\n};\n\nproto.destroy = function () {\n    dom.off(this.track)\n        .off(this.el);\n    removeProp(this);\n};\n\nproto.init = function (target) {\n    let cls = {\n        track: \"rplayer-video-track\",\n        bar: \"rplayer-video-progress\",\n        slider: \"rplayer-video-slider\"\n    };\n    if (this.vertical) {\n        cls = {\n            track: \"rplayer-volume-progress\",\n            bar: \"rplayer-volume-value\",\n            slider: \"rplayer-volume-slider\"\n        }\n    }\n    this.track = dom.createElement(\"div\", {class: `rplayer-progress ${cls.track}`});\n    this.bar = dom.createElement(\"div\", {class: `rplayer-bar ${cls.bar}`});\n    this.el = dom.createElement(\"div\", {class: `rplayer-slider ${cls.slider}`});\n    this.track.appendChild(this.bar);\n    this.track.append(this.el);\n    target.appendChild(this.track);\n    return this.initEvent();\n};\n\nexport default Slider;","import dom from \"../dom/index.js\";\nimport Slider, {SLIDER_MOVING} from \"./slider.js\";\nimport {doc} from \"../global\";\n\n\nfunction VolumeControl(volume) {\n    this.panel = dom.createElement(\"div\", {\"class\": \"rplayer-volume-popup rplayer-hide\"});\n    this.valueEl = dom.createElement(\"div\", {\"class\": \"rplayer-current-volume\"});\n    this.muteBtn = dom.createElement(\"button\", {\"class\": \"rplayer-mute volume-1\"});\n    this.showBtn = dom.createElement(\"button\", {\"class\": \"rplayer-audio-btn volume-1\"});\n    this.slider = new Slider(true);\n    this.volume = volume;\n}\n\nVolumeControl.prototype = {\n    constructor: VolumeControl,\n    show() {\n        dom.removeClass(this.panel, \"rplayer-hide\");\n        return this;\n    },\n    hide() {\n        dom.addClass(this.panel, \"rplayer-hide\");\n        return this;\n    },\n    toggle(evt) {\n        dom.toggleClass(this.panel, \"rplayer-hide\");\n        //document click事件点击音量设置面板之外隐藏,如果不阻止冒泡则面板显示不出来\n        evt.stopPropagation();\n        return this;\n    },\n    updateVolume(volume, sliderMove) {\n        this.volume = volume;\n        this.media.setVolume(volume);\n        this.updateStyle(this.volume, sliderMove);\n        return this;\n    },\n    updateVolumeByStep(step) {\n        let volume = this.volume + step;\n        volume = volume > 100 ? 100 : volume < 0 ? 0 : volume;\n        this.updateVolume(volume);\n    },\n    updateStyle(volume, sliderMove) {\n        let muteCls = this.muteBtn.className,\n            showCls = this.showBtn.className,\n            reg = /volume-\\S+/;\n        muteCls = muteCls.replace(reg, \"\");\n        showCls = showCls.replace(reg, \"\");\n        if (!volume) {\n            reg= \"volume-mute\";\n        } else if (volume <= 33) {\n            reg= \"volume-1\";\n        } else if (volume <= 66) {\n            reg= \"volume-2\";\n        } else {\n            reg= \"volume-3\";\n        }\n        this.muteBtn.className = muteCls + reg;\n        this.showBtn.className = showCls + reg;\n        this.valueEl.innerHTML = volume;\n        //如果通过移动滑块改变音量则不重复改变slider的位置\n        !sliderMove && this.slider.updateVPosition(volume + \"%\");\n        return this;\n    },\n    mute() {\n        if (this.media.isMuted()) {\n            this.updateStyle(this.volume);\n            this.media.mute(false);\n        } else {\n            this.updateStyle(0);\n            this.media.mute(true);\n        }\n    },\n    initEvent() {\n        dom.on(this.muteBtn, \"click\", this.mute.bind(this))\n            .on(this.panel, \"mouseleave\", this.hide.bind(this))\n            .on(this.showBtn, \"click\", this.toggle.bind(this))\n            .on(doc, \"click\", evt => {\n                let tgt = evt.target;\n                //点击页面其他地方（点击的不是音量设置面板或者面板内的元素）则隐藏音量面板\n                if (tgt !== this.panel && !this.panel.contains(tgt)) {\n                    this.hide();\n                }\n            });\n        this.slider.on(SLIDER_MOVING, (evt, distance) => {\n            this.updateVolume(Math.floor(100 * distance), true);\n        });\n        return this;\n    },\n    init(target, media) {\n        let panel = dom.createElement(\"div\", {\"class\": \"rplayer-audio-control rplayer-rt\"});\n        this.media = media;\n        this.panel.appendChild(this.valueEl);\n        this.slider.init(this.panel);\n        this.panel.appendChild(this.muteBtn);\n        panel.appendChild(this.showBtn);\n        panel.append(this.panel);\n        target.appendChild(panel);\n        this.updateVolume(this.volume)\n            .initEvent();\n        return this;\n    }\n};\n\nexport default VolumeControl;","import dom from \"../../dom/index.js\";\nimport {VIDEO_CLICK, VIDEO_PAUSE, VIDEO_PLAYING} from \"./video_control.js\";\n\nfunction PlayControl() {\n    this.btn = dom.createElement(\"button\", {\"class\": \"rplayer-play-btn\"});\n}\n\nPlayControl.prototype = {\n    play() {\n        dom.addClass(this.btn, \"paused\");\n        return this;\n    },\n    pause() {\n        dom.removeClass(this.btn, \"paused\");\n        return this;\n    },\n    toggle() {\n        this.media.togglePlay();\n        return this;\n    },\n    initEvent() {\n        let toggle = this.toggle.bind(this);\n        dom.on(this.btn, \"click\", toggle);\n        this.media\n            .on(VIDEO_PLAYING, this.play.bind(this))\n            .on(VIDEO_PAUSE, this.pause.bind(this))\n            .on(VIDEO_CLICK, toggle);\n        return this;\n    },\n    init(target, media) {\n        target.appendChild(this.btn);\n        this.media = media;\n        return this.initEvent();\n    }\n};\n\nexport default PlayControl;\n","import dom from \"../dom/index.js\";\nimport {doc, convertTime} from \"../global.js\";\nimport {VIDEO_TIME_UPDATE, VIDEO_LOADED_META} from \"../controls/video/video_control.js\";\n\nfunction TimeInfo() {\n    this.currentEl = dom.createElement(\"span\", {\"class\": \"rplayer-current-time\"});\n    this.totalEl = dom.createElement(\"span\", {\"class\": \"rplayer-total-time\"});\n}\n\nTimeInfo.prototype = {\n    constructor: TimeInfo,\n    updateTime(time = 0, total) {\n        let el = total ? this.totalEl : this.currentEl;\n        el.innerHTML = convertTime(time);\n        return this;\n    },\n    initEvent() {\n        this.media\n            .on(VIDEO_TIME_UPDATE, (evt, current) => this.updateTime(current))\n            .on(VIDEO_LOADED_META, (evt, meta) => this.updateTime(meta.duration, true));\n        return this;\n    },\n    init(target, media) {\n        let el = dom.createElement(\"span\", {\"class\": \"rplayer-time-info\"}),\n            text = doc.createTextNode(\"/\");\n        this.media = media;\n        el.appendChild(this.currentEl);\n        el.appendChild(text);\n        el.appendChild(this.totalEl);\n        target.appendChild(el);\n        this.updateTime(0)\n            .updateTime(0, true);\n        return this.initEvent();\n    }\n};\n\nexport default TimeInfo;","import dom from \"../dom/index.js\";\nimport {isObject} from \"../global.js\";\n\nfunction Popup(autoHide) {\n    this.el = dom.createElement(\"div\", {\"class\": \"rplayer-popup-info rplayer-hide\"});\n    this.visible = false;\n    this.autoHide = !!autoHide;\n    this.timer = null;\n}\n\nPopup.prototype = {\n    show(msg) {\n        this.visible = true;\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n        }\n        if (this.autoHide) {\n            this.timer = setTimeout(() => this.hide(), 3000);\n        }\n        dom.removeClass(this.el, \"rplayer-hide\");\n        msg && this.updateText(msg);\n        return this;\n    },\n    hide() {\n        this.visible = false;\n        dom.addClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    updatePosition(prop) {\n        let pos = {\n            left: \"left\",\n            right: \"right\",\n            top: \"top\",\n            bottom: \"bottom\"\n        };\n        if(isObject(prop)) {\n            for (let key in prop) {\n                if (pos[key]) {\n                    dom.css(this.el, key, prop[key]);\n                }\n            }\n        }\n        return this;\n    },\n    updateText(content) {\n        this.el.innerHTML = content;\n        return this;\n    },\n    getSize(prop) {\n        //隐藏元素获取不到尺寸信息，隐藏时先将元素显示出来获取之后再隐藏\n        let visible = this.visible;\n        !visible && this.show();\n        let style = getComputedStyle(this.el);\n        !visible && this.hide();\n        return prop ?\n            parseFloat(style[prop]) :\n            {\n                left: parseFloat(style.left),\n                right: parseFloat(style.right),\n                top: parseFloat(style.top),\n                bottom: parseFloat(style.bottom),\n                width: parseFloat(style.width),\n\n            }\n    },\n    width() {\n      return this.getSize(\"width\");\n    },\n    height() {\n        return this.getSize(\"height\");\n    },\n    init(target, cls) {\n        cls = cls || \"\";\n        dom.addClass(this.el, cls);\n        target.appendChild(this.el);\n        return this;\n    }\n};\n\nexport default Popup;","import dom from \"../../dom/index.js\";\nimport Slider, {SLIDER_MOVE_DONE, SLIDER_STATUS_CHANGE} from \"../slider.js\";\nimport {\n    VIDEO_LOADED_META,\n    VIDEO_PROGRESS,\n    VIDEO_TIME_UPDATE,\n    VIDEO_LOAD_START\n} from \"./video_control.js\";\nimport Popup from \"../../message/popup.js\";\nimport {convertTime} from \"../../global.js\";\n\nfunction VideoProgress() {\n    this.slider = new Slider();\n    this.panel = dom.createElement(\"div\", {\"class\": \"rplayer-progress-panel\"});\n    this.bufferEl = dom.createElement(\"div\", {\"class\": \"rplayer-bufferd-bar\"});\n    this.popup = new Popup();\n    this.currentTime = this.duration = 0;\n}\n\nVideoProgress.prototype = {\n    constructor: VideoProgress,\n    update(current) {\n        if (this.currentTime !== current) {\n            this.currentTime = current;\n            let percent = current / this.duration * 100 || 0;\n            this.slider.updateHPosition(percent + \"%\");\n        }\n        return this;\n    },\n    updateByStep(step) {\n        let currentTime = this.currentTime,\n            duration = this.duration;\n        currentTime += step;\n        this.currentTime = currentTime < 0 ? 0 : currentTime > duration ? duration : currentTime;\n        this.media\n            .setCurrentTime(this.currentTime)\n            .trigger(VIDEO_TIME_UPDATE, this.currentTime);\n        return this;\n    },\n    buffer(buffered) {\n        dom.css(this.bufferEl, buffered + \"%\");\n    },\n    mouseMove(evt) {\n        if (this.duration) {\n            this.popup.show();\n            let rect = this.panel.getBoundingClientRect(),\n                distance = evt.clientX - rect.left,\n                width = this.popup.width(),\n                left = distance - width / 2;\n            width = rect.width - width;\n            left = left < 0 ? 0 : left > width ? width : left;\n            width = distance / rect.width;\n            this.popup\n                .updatePosition({left: left + \"px\"})\n                .updateText(convertTime(width * this.duration));\n        }\n    },\n    mouseOut() {\n      this.popup.hide();\n    },\n    initEvent() {\n        //滑动改变进度/点击进度条改变进度\n        this.slider.on(SLIDER_MOVE_DONE, (evt, distance) => {\n            let time = distance * this.duration;\n            this.media.setCurrentTime(time);\n            this.media.trigger(VIDEO_TIME_UPDATE, time);\n        });\n        dom.on(this.panel, \"mouseover mousemove\", this.mouseMove.bind(this))\n            .on(this.panel, \"mouseout\", this.mouseOut.bind(this));\n        this.media\n            .on(VIDEO_LOAD_START, () => this.slider.trigger(SLIDER_STATUS_CHANGE, false))\n            .on(VIDEO_LOADED_META, (evt, meta) => {\n                this.duration = meta.duration;\n                this.slider.trigger(SLIDER_STATUS_CHANGE, true);\n            })\n            .on(VIDEO_TIME_UPDATE, (evt, current) => this.update(current))\n            .on(VIDEO_PROGRESS, (evt, buffered) => this.buffer(buffered));\n        return this;\n    },\n    init(target, media) {\n        let el = this.panel;\n        this.media = media;\n        el.appendChild(this.bufferEl);\n        this.slider.init(el);\n        this.popup.init(el, \"rplayer-popup-video-info\");\n        target.appendChild(el);\n        return this.initEvent();\n    }\n};\n\n/*fn.updateProgressByStep = function (step) {\n    let currentTime = this.video.getCurrentTime(),\n        duration = this.video.getDuration();\n    currentTime += step;\n    currentTime = currentTime < 0 ? 0 : currentTime > duration ? duration : currentTime;\n    this.video.setCurrentTime(currentTime);\n    currentTime = this.video.getPlayedPercentage();\n    return this.videoSlider.trigger(\"position.change\", \"h\", currentTime);\n};*/\n\nexport default VideoProgress;","import dom from \"./dom/index.js\";\nimport {doc, DEFAULT_OPTIONS, KEY_MAP, isObject, isUndefined, removeProp} from \"./global.js\";\nimport Subscriber from \"./subscriber.js\";\nimport Loading from \"./message/loading.js\";\nimport VideoError from \"./message/error.js\";\nimport FullScreen from \"./controls/video/fullscreen.js\";\nimport VideoControl, {\n    VIDEO_CAN_PLAY,\n    VIDEO_DBLCLICK,\n    VIDEO_ENDED,\n    VIDEO_ERROR,\n    VIDEO_LOAD_START,\n    VIDEO_PROGRESS,\n    VIDEO_SEEKING,\n    VIDEO_VOLUME_CHANGE\n} from \"./controls/video/video_control.js\";\nimport VolumeControl from \"./controls/volume_control.js\";\nimport PlayControl from \"./controls/video/play_control.js\";\nimport TimeInfo from \"./message/time_info.js\";\nimport VideoProgress from \"./controls/video/video_progress.js\";\nimport Popup from \"./message/popup.js\";\n\nlet hideVolumePopTimer = null,\n    hideControlsTimer = null;\nconst HIDE_CLASS = \"rplayer-hide\";\nconst DEFAULT_HEIGHT = 500;\n\nfunction RPlayer(selector, options) {\n    let target = dom.selectElement(selector),\n        config;\n    Subscriber.call(this);\n    if (isObject(options)) {\n        config = {\n            autoPlay: !!options.autoPlay,\n            defaultVolume: Math.abs(parseInt(options.defaultVolume)) || DEFAULT_OPTIONS.defaultVolume,\n            loop: !!options.loop,\n            msg: options.msg || DEFAULT_OPTIONS.msg,\n            poster: options.poster || DEFAULT_OPTIONS.poster,\n            preload: options.preload || DEFAULT_OPTIONS.preload,\n            source: options.source\n        };\n    } else {\n        config = DEFAULT_OPTIONS;\n    }\n    if (!config.source) {\n        throw new Error(\"没有设置视频链接\");\n    }\n    if (!target) {\n        throw new Error(\"未选中任何元素\");\n    }\n    this.target = target;\n    this.video = new VideoControl(config);\n    this.loading = new Loading();\n    this.error = new VideoError();\n    this.volumeControl = new VolumeControl(config.defaultVolume);\n    this.playControl = new PlayControl();\n    this.timeInfo = new TimeInfo();\n    this.fullScreen = new FullScreen();\n    this.progress = new VideoProgress();\n    this.volumePopup = new Popup(true);\n    this.controls = isUndefined(options.controls) ? true : !!options.controls;\n    this.useNativeControls = isUndefined(options.useNativeControls) ? false : options.useNativeControls;\n}\n\nlet fn = RPlayer.prototype = Object.create(Subscriber.prototype);\nfn.constructor = RPlayer;\n\nfn.keyDown = function (evt) {\n    //控制条被禁用，不做处理\n    let key = evt.key.toLowerCase(),\n        regUpOrDown = /(?:up)|(?:down)/,\n        regLeftOrRight = /(?:left)|(?:right)/,\n        regEsc = /esc/,\n        regSpace = /\\s|(?:spacebar)/,\n        tmp = KEY_MAP[key];\n    if (tmp) {\n        if (regLeftOrRight.test(key)) {\n            this.progress.updateByStep(tmp);\n        } else if (regUpOrDown.test(key)) {\n            this.volumeControl.updateVolumeByStep(tmp);\n        } else if (regEsc.test(key)) {\n            this.fullScreen.exit();\n        } else if (regSpace.test(key)) {\n            this.playControl.toggle();\n        }else {\n            this.fullScreen.toggle();\n        }\n    }\n    evt.preventDefault();\n};\n\nfn.hideControls = function () {\n    dom.addClass(this.controlsPanel, HIDE_CLASS);\n    return this;\n};\n\nfn.showControls = function () {\n    //出错了则不显示控制条\n    if (!this.video.isError()) {\n        clearTimeout(hideControlsTimer);\n        dom.removeClass(this.controlsPanel, HIDE_CLASS);\n        hideControlsTimer = setTimeout(() => this.hideControls(), 5000);\n    }\n    return this;\n};\n\nfn.buffer = function (buffered, readyState) {\n    if (readyState < 3) {\n        this.loading.show();\n    }\n};\n\nfn.playEnd = function () {\n    this.trigger(\"play.end\");\n};\n\nfn.handleError = function (error) {\n    this.loading.hide();\n    this.error.show(error.message);\n    return this;\n};\n\nfn.refresh = function () {\n    this.video.reload();\n    this.error.hide();\n};\n\nfn.initEvent = function () {\n    this.video\n        .on(VIDEO_LOAD_START, () => this.loading.show())\n        .on(VIDEO_SEEKING, () => this.loading.show())\n        .on(VIDEO_CAN_PLAY, () => this.loading.hide())\n        .on(VIDEO_ENDED, this.playEnd.bind(this))\n        .on(VIDEO_ERROR, (evt, error) => this.handleError(error));\n    return this;\n};\n\nfn.initControls = function () {\n    let settingsPanel = dom.createElement(\"div\", {\"class\": \"rplayer-settings rplayer-rt\"}),\n        playControl = dom.createElement(\"div\", {\"class\": \"rplayer-play-control rplayer-lf\"});\n    this.controlsPanel = dom.createElement(\"div\", {\"class\": \"rplayer-controls\"});\n    this.fullScreen.init(this.container, settingsPanel);\n    this.volumeControl.init(settingsPanel, this.video);\n    this.playControl.init(playControl, this.video);\n    this.timeInfo.init(playControl, this.video);\n    this.progress.init(this.controlsPanel, this.video);\n    this.volumePopup.init(this.container, \"rplayer-popup-volume-info\");\n    this.controlsPanel.appendChild(settingsPanel);\n    this.controlsPanel.appendChild(playControl);\n    this.container.appendChild(this.controlsPanel);\n    return this.initControlEvent();\n};\n\nfn.showVolumePopup = function (volume) {\n    let text = `当前音量: ${volume}`;\n    if (volume === 0) {\n        text = \"静音\";\n    }\n    this.volumePopup.show(text);\n    return this;\n};\n\nfn.initControlEvent = function () {\n    this.video\n        .on(VIDEO_PROGRESS, (evt, buffered, readyState) => this.buffer(buffered, readyState))\n        .on(VIDEO_VOLUME_CHANGE, (evt, muted, volume) => this.showVolumePopup(muted, volume))\n        .on(VIDEO_DBLCLICK, () => this.fullScreen.toggle());\n    dom.on(this.container, \"keydown\", this.keyDown.bind(this))\n        .on(this.container, \"mousemove\", this.showControls.bind(this));\n    return this;\n};\n\nfn.offEvent = function () {\n    dom.off(doc)\n        .off(this.container)\n        .off(this.video.el);\n    return this;\n};\n\nfn.destroy = function () {\n    if (this.container) {\n        this.video.destroy();\n        removeProp(this);\n        this.offEvent();\n    }\n    return this;\n};\n\nfn.getSource = function () {\n    return this.video.getSource();\n};\n\nfn.updateSource = function (src) {\n    this.video.changeSource(src);\n};\n\nfn.initialize = function () {\n    if (!this.container) { //防止重复初始化\n        let container = dom.createElement(\"div\", {\n                tabIndex: 100 //使元素能够获取焦点\n            }),\n            height = parseInt(getComputedStyle(this.target).height);\n        dom.css(container, \"height\", (height || DEFAULT_HEIGHT) + \"px\");\n        this.container = container;\n        this.video.init(container);\n        this.loading.init(container);\n        this.error.init(container, this.refresh.bind(this));\n        dom.addClass(container, \"rplayer-container\");\n        //播放控制与原生控制二选一，如果设置了useNativeControls为true，则优先使用原生控制\n        if (this.controls && !this.useNativeControls) {\n            this.initControls();\n        } else if (this.useNativeControls) {\n            this.video.showControls();\n        }\n        this.target.appendChild(container);\n        this.initEvent();\n    }\n    return this;\n};\n\nRPlayer.init = function (selector, options) {\n    return new RPlayer(selector, options).initialize();\n};\n\nexport default RPlayer;"],"names":["DEFAULT_OPTIONS","ERROR_TYPE","TYPE","VOLUME_STEP","VIDEO_STEP","KEY_MAP","doc","document","isType","Object","prototype","toString","call","obj","type","isFunction","isObject","isString","isUndefined","isWindow","window","extend","target","source","arguments","length","key","copy","t","toArray","likeArr","start","Array","isArray","slice","removeProp","prop","e","noop","convertTime","time","changeLen","num","str","h","m","s","Math","ceil","floor","dom","guid","hasClass","el","cls","classList","contains","className","indexOf","addClass","add","removeClass","reg","RegExp","remove","replace","trim","toggleClass","toggle","css","val","style","cssText","getComputedStyle","getPropertyValue","selectElement","selector","context","ret","nodeName","test","getElementById","substring","querySelector","createElement","name","attrs","setAttribute","_on","callback","id","handler","defineProperty","handlers","push","addEventListener","on","off","i","split","_off","len","splice","removeEventListener","forEach","fn","once","cb","_this","args","apply","CEvent","data","timeStamp","Subscriber","TypeError","self","f","Date","now","concat","Loading","appendChild","VideoError","msgEl","msg","setMessage","innerHTML","initEvent","fsApi","fullScreenApi","defApi","tmp","support","FULL_SCREEN_CLASS","FullScreen","isFullScreen","btn","requestFullscreen","fullPage","exitFullscreen","request","exit","fullscreenchange","fullscreenElement","fullscreenerror","bind","VIDEO_LOADED_META","VIDEO_TIME_UPDATE","VIDEO_SEEKING","VIDEO_LOAD_START","VIDEO_PROGRESS","VIDEO_CAN_PLAY","VIDEO_ENDED","VIDEO_ERROR","VIDEO_PLAYING","VIDEO_PAUSE","VIDEO_DBLCLICK","VIDEO_CLICK","VIDEO_VOLUME_CHANGE","VideoControl","config","playedTime","create","proto","volume","muted","mute","play","autoplay","pause","getDuration","paused","isPaused","err","error","code","isLoop","loop","poster","preload","scale","duration","currentTime","getCurrentTime","percent","buffered","end","readyState","controls","load","src","initSource","currentSrc","frag","createDocumentFragment","sourceEl","isError","message","getBuffered","getReadyState","handleError","isMuted","getVolume","a","setCurrentTime","trigger","notify","evt","preventDefault","video","text","createTextNode","autoPlay","setPoster","setPreload","SLIDER_MOVING","SLIDER_MOVE_DONE","SLIDER_STATUS_CHANGE","Slider","vertical","moveDis","pos","moving","enabled","constructor","getPosition","parent","parentNode","rect","getBoundingClientRect","parseFloat","width","height","left","top","updateHPosition","bar","updateVPosition","mouseDown","button","x","clientX","y","clientY","mouseMove","getMoveCallback","origLeft","origTop","maxX","maxY","mouseUp","moveVertical","distance","offsetY","moveHorizontal","offsetX","clickTrack","track","eType","enable","destroy","init","class","slider","append","VolumeControl","panel","valueEl","muteBtn","showBtn","stopPropagation","sliderMove","media","setVolume","updateStyle","step","updateVolume","muteCls","showCls","hide","tgt","PlayControl","togglePlay","TimeInfo","currentEl","totalEl","total","current","updateTime","meta","Popup","autoHide","visible","timer","setTimeout","updateText","content","show","right","bottom","getSize","VideoProgress","bufferEl","popup","updatePosition","mouseOut","update","buffer","hideControlsTimer","HIDE_CLASS","DEFAULT_HEIGHT","RPlayer","options","abs","parseInt","defaultVolume","Error","loading","volumeControl","playControl","timeInfo","fullScreen","progress","volumePopup","useNativeControls","keyDown","toLowerCase","regUpOrDown","regLeftOrRight","regEsc","regSpace","updateByStep","updateVolumeByStep","hideControls","controlsPanel","showControls","playEnd","refresh","reload","initControls","settingsPanel","container","initControlEvent","showVolumePopup","offEvent","getSource","updateSource","changeSource","initialize"],"mappings":"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"}