{"version":3,"file":"rplayer.js","sources":["../src/scripts/global.js","../src/scripts/dom.js","../src/scripts/subscriber.js","../src/scripts/slider.js","../src/scripts/template.js","../src/scripts/loading.js","../src/scripts/error.js","../src/scripts/video_control.js","../src/scripts/VolumeControl.js","../src/scripts/index.js"],"sourcesContent":["\"use strict\";\nconst DEFAULT_OPTIONS = {\n        autoPlay: false,\n        defaultVolume: 50,\n        loop: false,\n        poster: \"\",\n        preload: \"metadata\",\n        source: \"\",\n        msg: \"\"\n    },\n    ERROR_TYPE = { //视频播放错误类型\n        \"1\": \"MEDIA_ERR_ABORTED\",\n        \"2\": \"MEDIA_ERR_NETWORK\",\n        \"3\": \"MEDIA_ERR_DECODE\",\n        \"4\": \"MEDIA_ERR_SRC_NOT_SUPPORTED\"\n    },\n    TYPE = {\n        function: \"[object Function]\",\n        object: \"[object Object]\",\n        string: \"[object String]\",\n        undef: \"[object Undefined]\"\n    },\n    VOLUME_STEP = 5,\n    VIDEO_STEP = 10,\n    KEY_MAP = {\n        \"up\": VOLUME_STEP, //IE\n        \"arrowup\": VOLUME_STEP,\n        \"down\": -VOLUME_STEP, //IE\n        \"arrowdown\": -VOLUME_STEP,\n        \"left\": -VIDEO_STEP, //IE\n        \"arrowleft\": -VIDEO_STEP,\n        \"right\": VIDEO_STEP, //IE\n        \"arrowright\": VIDEO_STEP,\n        \"esc\": \"esc\", //IE\n        \"escape\": \"escape\",\n        \" \": \"space\",\n        \"spacebar\": \"space\", //IE\n        \"enter\": \"enter\"\n    };\nlet doc = document,\n    isType = type => obj => Object.prototype.toString.call(obj) === TYPE[type],\n    isFunction = isType(\"function\"),\n    isObject = isType(\"object\"),\n    isString = isType(\"string\"),\n    isUndefined = isType(\"undef\"),\n    isWindow = obj => obj && obj.window === obj;\n\nexport function extend(target, source) {\n    if (arguments.length) {\n        for (let key in source) {\n            let copy = source[key],\n                t = target[key];\n            if (isObject(copy) && isObject(t)) {\n                extend(target[key], source[key]);\n            } else {\n                target[key] = copy;\n            }\n        }\n    }\n    return target;\n}\n\nexport function toArray(likeArr, start = 0) {\n    return Array.isArray(likeArr) ? likeArr.slice(start) :\n        likeArr.length ?  Array.prototype.slice.call(likeArr, start) : [];\n}\n\nexport function removeProp(obj, prop) {\n    if (prop) {\n        try{\n            delete obj[prop];\n        }catch (e){}\n    } else {\n        for (prop in obj) {\n            delete obj[prop];\n        }\n    }\n}\n\nexport {\n    doc,\n    DEFAULT_OPTIONS,\n    ERROR_TYPE,\n    KEY_MAP,\n    isFunction,\n    isObject,\n    isString,\n    isUndefined,\n    isWindow\n};","import {doc, isFunction, isObject, isUndefined, isString, isWindow} from \"./global.js\";\nlet dom = {\n        handlers: {}\n    },\n    guid = 1;\n\ndom.hasClass = function (el, cls) {\n    if (!el) return false;\n    if (el.classList) {\n        return el.classList.contains(cls);\n    }\n    //如果className为XXX-active, cls为active,\n    //如果不加空格判断则获取的结果不准确\n    return (\" \" + el.className + \" \").indexOf(\" \" + cls + \" \") > -1;\n};\n\ndom.addClass = function (el, cls) {\n    if (el && !this.hasClass(el, cls)) {\n        if (el.classList) {\n            el.classList.add(cls);\n        } else {\n            el.className += \" \" + cls;\n        }\n    }\n    return this;\n};\n\ndom.removeClass = function (el, cls) {\n    let reg = new RegExp(\"\\\\s+\" + cls + \"\\\\s+\"),\n        className;\n    if (el && this.hasClass(el, cls)) {\n        className = \" \" + el.className + \" \";\n        if (el.classList) {\n            el.classList.remove(cls);\n        } else {\n            el.className = className.replace(reg, \" \").trim();\n        }\n    }\n    return this;\n};\n\ndom.toggleClass = function (el, cls) {\n    let reg = new RegExp(\"\\\\s+\" + cls + \"\\\\s+\"),\n        className;\n    if (el) {\n        if (el.classList) {\n            el.classList.toggle(cls);\n        } else {\n            className = \" \" + el.className + \" \";\n            cls = \" \" + cls + \" \";\n            if (className.indexOf(cls) > -1) {\n                el.className = className.replace(reg, \" \").trim();\n            } else {\n                el.className += \" \" + cls;\n            }\n        }\n    }\n    return this;\n};\n\ndom.css = function (el, prop, val) {\n    let css = \"\";\n    if (!isUndefined(val)) {\n        el.style[prop] = val;\n    } else {\n        if (isObject(prop)) {\n            for (val in prop) {\n                css += val + \":\" + prop[val] + \";\";\n            }\n            el.style.cssText += css;\n        } else if (isString(prop)) {\n            return getComputedStyle(el).getPropertyValue(prop);\n        }\n    }\n    return this;\n};\n\ndom.fullScreen = function (el, exit) {\n    let fsApi = this.fsApi;\n    if (fsApi) {\n        exit ? doc[fsApi.exitFullscreen]() : el[fsApi.requestFullscreen]();\n    } else {\n        this.fullPage(el, exit);\n    }\n    return this;\n};\n\n//不支持全屏的浏览器，在网页内铺满窗口\ndom.fullPage = function (el, exit) {\n    if (exit) {\n        dom.removeClass(el, \"rplayer-fixed\");\n    } else {\n        dom.addClass(el, \"rplayer-fixed\");\n    }\n};\n\n//选择元素， 只选中一个\ndom.selectElement = function (selector, context) {\n    let ret,\n        reg = /^#[^>~+\\[\\]\\s:]+$/; //匹配id选择器\n    context = context || doc;\n    if (selector) {\n        if (selector.nodeName || isWindow(selector)) {\n            ret = selector;\n        } else if (typeof selector === \"string\") {\n            if (reg.test(selector)) {\n                ret = doc.getElementById(selector.substring(1));\n            } else {\n                ret = context.querySelector(selector);\n            }\n        }\n    }\n    return ret;\n};\n\n//创建元素\ndom.createElement = function (name, attrs) {\n    let el = doc.createElement(name),\n        key;\n    if (isObject(attrs)) {\n        for (key in attrs) {\n            el.setAttribute(key, attrs[key]);\n        }\n    }\n    return el;\n};\n\n//添加元素事件\ndom._on = function (el, type, callback) {\n    let id = el.guid,\n        handler;\n    if (!id) {\n        id = guid++;\n        Object.defineProperty(el, \"guid\", {\n            value: id\n        });\n    }\n    handler = this.handlers[id];\n    if (!handler) {\n        handler = this.handlers[id] = {};\n        handler[type] = [];\n    } else if (!handler[type]) {\n        handler[type] = [];\n    }\n    handler[type].push(callback);\n    el.addEventListener(type, callback);\n};\n\ndom.on = function (selector, type, callback, off) {\n    let el = this.selectElement(selector),\n        i;\n    if (el) {\n        if (type) {\n            //添加多个事件，以空格分开\n            type = type.split(\" \");\n            i = type.length;\n            if (isFunction(callback)) {\n                for (; i--;) {\n                    let t = type[i];\n                    off ? this._off(el, t, callback) :\n                        this._on(el, t, callback);\n                }\n            } else if(off){\n                for (; i--;) {\n                    this._off(el, type[i]);\n                }\n            }\n        } else if(off) {\n            this._off(el);\n        }\n\n    }\n    return this;\n};\n\n//移除元素的事件\ndom._off = function (el, type, callback) {\n    let handlers = this.handlers[el.guid];\n    if (handlers) {\n        if (type && (handlers = handlers[type])) {\n            if (callback) {\n                for (let i = 0, len = handlers.length; i < len; i++ ) {\n                    if (handlers[i] === callback) {\n                        handlers.splice(i, 1);\n                        el.removeEventListener(type, callback);\n                        break;\n                    }\n                }\n            } else {\n                handlers.forEach(function (fn) {\n                    el.removeEventListener(type, fn);\n                });\n                dom.handlers[type] = [];\n            }\n        } else if (!type) {//如果没有type, 则移除该元素的所有事件\n            for (let key in handlers) {\n                this._off(el, key);\n            }\n        }\n    }\n};\n\ndom.off = function (selector, type, callback) {\n    return this.on(selector, type, callback, true);\n};\n\ndom.once = function (selector, type, callback) {\n    let cb, _this = this;\n    if (isFunction(callback)) {\n        cb = function () {\n            let args = Array.prototype.slice.call(arguments);\n            callback.apply(this, args);\n            _this.off(selector, type, cb);\n        };\n        this.on(selector, type, cb);\n    }\n    return this;\n};\n\ndom.fsApi = (function () {\n    let fullScreenApi = [\n            //W3C\n            [\n                \"requestFullscreen\",\n                \"exitFullscreen\",\n                \"fullscreenElement\",\n                \"fullscreenEnabled\",\n                \"fullscreenchange\",\n                \"fullscreenerror\"\n            ],\n            // WebKit\n            [\n                \"webkitRequestFullscreen\",\n                \"webkitExitFullscreen\",\n                \"webkitFullscreenElement\",\n                \"webkitFullscreenEnabled\",\n                \"webkitfullscreenchange\",\n                \"webkitfullscreenerror\"\n            ],\n            // Firefox\n            [\n                \"mozRequestFullScreen\",\n                \"mozCancelFullScreen\",\n                \"mozFullScreenElement\",\n                \"mozFullScreenEnabled\",\n                \"mozfullscreenchange\",\n                \"mozfullscreenerror\"\n            ],\n            // IE\n            [\n                \"msRequestFullscreen\",\n                \"msExitFullscreen\",\n                \"msFullscreenElement\",\n                \"msFullscreenEnabled\",\n                \"MSFullscreenChange\",\n                \"MSFullscreenError\"\n            ]\n\n        ],\n        fsApi = null,\n        defApi = fullScreenApi[0],\n        tmp, support;\n    for (let i = 0, len = fullScreenApi.length; i < len; i++) {\n        tmp = fullScreenApi[i];\n        if (tmp[1] in document) {\n            support = true;\n            break;\n        }\n    }\n\n    if (support) {\n        fsApi = {};\n        tmp.forEach(function (prop, i) {\n            fsApi[defApi[i]] = prop;\n        });\n    }\n    return fsApi;\n})();\n\nexport default dom;","import {isFunction, isString, toArray} from \"./global.js\";\nimport {isUndefined} from \"./global\";\n\nfunction CEvent(type) {\n    this.type = type;\n    this.data = null;\n    this.timeStamp = 0;\n}\n\nfunction Subscriber() {\n    this.handlers = {};\n}\n\nSubscriber.prototype = {\n    constructor: Subscriber,\n    _on(type, fn) {\n        if (!this.handlers[type]) {\n            this.handlers[type] = [];\n        }\n        this.handlers[type].push(fn);\n    },\n    on(type, fn) {\n        if (isFunction(fn)) {\n            if (!isString(type)) {\n                throw new TypeError(\"事件类型只能为String\");\n            }\n            type = type.split(\" \");\n            for (let i = type.length; i--;) {\n                this._on(type[i], fn);\n            }\n        }\n        return this;\n    },\n    _off(type, fn) {\n        let handlers = this.handlers[type];\n        if (handlers) {\n            if (isFunction(fn)) {\n                for(let i = handlers.length; i--;) {\n                    if (fn === handlers[i]) {\n                        handlers.splice(i, 1);\n                        break;\n                    }\n                }\n            } else if (isUndefined(fn)) {\n                this.handlers[type] = [];\n            }\n        }\n    },\n    off(type, fn) {\n        let len = arguments.length;\n        if (len && isString(type)) {\n            let args = toArray(arguments, 1);\n            type = type.split(\" \");\n            for (let i = type.length; i--;) {\n                this._off.call(this, type[i], ...args);\n            }\n        } else if (!len) {\n            //没传参数则移除所有绑定\n            this.handlers = {};\n        }\n        return this;\n    },\n    once(type, fn) {\n        if (isFunction(fn)) {\n            let self = this,\n                f = function () {\n                    fn.apply(this, arguments);\n                    self.off(type, f);\n                };\n            this.on(type, f);\n        }\n    },\n    trigger(type) {\n        let args = toArray(arguments, 1),\n            h = this.handlers[type],\n            e;\n        if (h) {\n            e = new CEvent(type);\n            e.data = args;\n            e.timeStamp = Date.now();\n            args = [e].concat(args);\n            for (let i = h.length; i--; ) {\n                h[i].apply(this, args);\n            }\n        }\n        return this;\n    }\n};\n\nexport default Subscriber;","import Subscriber from \"./subscriber.js\"\nimport {doc, isUndefined, removeProp} from \"./global.js\";\nimport dom from \"./dom.js\";\n\nfunction Slider(vertical) {\n    Subscriber.call(this);\n    this.vertical = isUndefined(vertical) ? false : !!vertical;\n    this.moveDis = this.pos = null;\n    this.moving = false;\n}\n\nlet proto = Slider.prototype = Object.create(Subscriber.prototype);\nproto.constructor = Slider;\n\nproto.getPosition = function () {\n    let parent = this.el.parentNode,\n        rect = parent.getBoundingClientRect(),\n        pos = getComputedStyle(this.el);\n    return {\n        width: parseFloat(pos.width),\n        height: parseFloat(pos.height),\n        origLeft: parseFloat(pos.left),\n        origTop: parseFloat(pos.top),\n        maxX: rect.width,\n        maxY: rect.height\n    }\n};\n\nproto.updateHPosition = function (val, scale) {\n    scale && (val = val * 100 + \"%\");\n    dom.css(this.bar, \"width\", val)\n        .css(this.el, \"left\", val);\n    return this;\n};\n\nproto.updateVPosition = function (val, scale) {\n    scale && (val = val * 100 + \"%\");\n    dom.css(this.bar, \"height\", val)\n        .css(this.el, \"bottom\", val);\n    return this;\n};\n\nproto.mouseDown = function (evt) {\n    //只有按鼠标左键时处理(evt.button=0)\n    if (!evt.button) {\n        let x = evt.clientX,\n            y = evt.clientY,\n            pos = this.getPosition(),\n            mouseMove = this.getMoveCallback().bind(this);\n        this.pos = {\n            width: pos.width,\n            height: pos.height,\n            offsetX: x - pos.origLeft,\n            offsetY: y - pos.origTop,\n            maxX: pos.maxX,\n            maxY: pos.maxY\n        };\n        dom.addClass(this.el, \"rplayer-moving\")\n            .on(doc, \"mousemove\", mouseMove)\n            .on(doc, \"mouseup\", this.mouseUp.bind(this))\n    }\n};\n\nproto.moveVertical = function (x, y) {\n    let distance;\n    distance = this.pos.maxY - (y - this.pos.offsetY) - this.pos.height;\n    distance = distance < 0 ? 0 : distance > this.pos.maxY ? this.pos.maxY : distance;\n    distance = distance / this.pos.maxY;\n    this.updateVPosition(distance, true);\n    return distance;\n};\n\nproto.moveHorizontal = function (x) {\n    let distance;\n    distance = x - this.pos.offsetX;\n    distance = distance < 0 ? 0 : distance > this.pos.maxX ? this.pos.maxX : distance;\n    distance = distance / this.pos.maxX;\n    this.updateHPosition(distance, true);\n    return distance;\n};\n\nproto.mouseMove = function (evt, fn) {\n    let x = evt.clientX,\n        y = evt.clientY,\n        distance = fn.call(this, x, y);\n    this.moving = true;\n    this.trigger(\"slider.moving\", this.moveDis = distance);\n};\n\nproto.getMoveCallback = function () {\n    return this.vertical ?\n        evt => this.mouseMove(evt, this.moveVertical) :\n        evt => this.mouseMove(evt, this.moveHorizontal);\n};\n\nproto.mouseUp = function () {\n    dom.off(doc, \"mousemove moseup\")\n        .removeClass(this.el, \"rplayer-moving\");\n    this.moving && this.trigger(\"slider.move.done\", this.moveDis);\n};\n\nproto.changePosition = function (evt, dir, dis) {\n    if (dir === \"h\") {\n        this.updateHPosition(dis, true);\n    } else {\n        this.updateVPosition(dis);\n    }\n};\n\nproto.clickTrack = function (evt) {\n    //移动滑块鼠标释放时会触发父元素点击事件,可能会导致鼠标释放后滑块位置改变\n    //如果移动滑块则点击事件不做处理\n    if (this.moving) {\n        this.moving = false;\n        return;\n    }\n    let rect = this.track.getBoundingClientRect(),\n        x = evt.clientX,\n        y = evt.clientY,\n        eType = \"slider.moving\";\n    if (this.vertical) {\n        rect = (rect.height - y + rect.top) / rect.height;\n        this.updateVPosition(rect, true);\n    } else {\n        rect = (x - rect.left) / rect.width;\n        eType = \"slider.move.done\";\n        this.updateHPosition(rect, true);\n    }\n    this.trigger(eType, rect);\n};\n\nproto.initEvent = function () {\n    dom.on(this.el, \"mousedown\", this.mouseDown.bind(this))\n        .on(this.track, \"click\", this.clickTrack.bind(this));\n    return this;\n};\n\nproto.destroy = function () {\n    dom.off(this.track)\n        .off(this.el);\n    removeProp(this);\n};\n\nproto.init = function (target) {\n    let cls = {\n        track: \"rplayer-video-track\",\n        bar: \"rplayer-video-progress\",\n        slider: \"rplayer-video-slider\"\n    };\n    if (this.vertical) {\n        cls = {\n            track: \"rplayer-volume-progress\",\n            bar: \"rplayer-volume-value\",\n            slider: \"rplayer-volume-slider\"\n        }\n    }\n    this.track = dom.createElement(\"div\", {class: `rplayer-progress ${cls.track}`});\n    this.bar = dom.createElement(\"div\", {class: `rplayer-bar ${cls.bar}`});\n    this.el = dom.createElement(\"div\", {class: `rplayer-slider ${cls.slider}`});\n    this.track.appendChild(this.bar);\n    this.track.append(this.el);\n    target.appendChild(this.track);\n    this.on(\"position.change\", this.changePosition);\n    return this.initEvent();\n};\n\nexport default Slider;","let tpl = '<div class=\"rplayer-popup-info rplayer-popup-volume-info rplayer-hide\">10:00</div>',\n    controls = '<div class=\"rplayer-popup-info rplayer-popup-video-info rplayer-hide\">10:00</div>' +\n        '        <div class=\"rplayer-progress-panel\">' +\n        '            <div class=\"rplayer-bufferd-bar\"></div>' +\n        '            <div class=\"rplayer-mark rplayer-hide\"></div>' +\n        '        </div>' +\n        '        <div class=\"rplayer-play-control rplayer-lf\">' +\n        '            <button type=\"button\" class=\"rplayer-play-btn\"></button>' +\n        '            <span class=\"rplayer-time-info\">' +\n        '               <span class=\"rplayer-current-time\">00:00</span>/' +\n        '               <span class=\"rplayer-total-time\">00:00</span>' +\n        '             </span>' +\n        '        </div>' +\n        '        <div class=\"rplayer-settings rplayer-rt\">' +\n        '            <button type=\"button\" class=\"rplayer-fullscreen-btn rplayer-rt\"></button>' +\n        '            <div class=\"rplayer-audio-control rplayer-rt\">' +\n        '                <button type=\"button\" class=\"rplayer-audio-btn volume-1\"></button>' +\n        '            </div>' +\n        '        </div>';\nexport {tpl, controls};","import dom from \"./dom.js\";\n\nfunction Loading() {\n    this.el = dom.createElement(\"div\", {\"class\": \"rplayer-loading rplayer-hide\"});\n}\n\nLoading.prototype = {\n    constructor: Loading,\n    show() {\n        dom.removeClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    hide() {\n        dom.addClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    toggle: function () {\n        dom.toggleClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    init(target) {\n        target.appendChild(this.el);\n        return this;\n    }\n};\n\nexport default Loading;","import dom from \"./dom.js\";\n\nfunction VideoError() {\n    this.el = dom.createElement(\"div\", {\"class\": \"rplayer-error rplayer-hide\"});\n    this.msgEl = dom.createElement(\"div\", {\"class\": \"rplayer-msg\"});\n}\n\nVideoError.prototype = {\n    constructor: VideoError,\n    show(msg) {\n        this.setMessage(msg);\n        dom.removeClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    hide() {\n        dom.addClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    setMessage(msg) {\n        this.msgEl.innerHTML = msg;\n        return this;\n    },\n    init(target) {\n        this.el.appendChild(this.msgEl);\n        target.appendChild(this.el);\n        return this;\n    }\n};\n\nexport default VideoError;","import dom from \"./dom.js\";\nimport {doc, isUndefined, extend} from \"./global.js\";\nimport Subscriber from \"./subscriber.js\";\nimport {ERROR_TYPE, removeProp} from \"./global\";\n\nfunction VideoControl(config) {\n    Subscriber.call(this);\n    this.config = config;\n    this.playedTime = null;\n}\n\nexport const VIDEO_LOADED_META = \"video.loaded.meta\";\nexport const VIDEO_TIME_UPDATE = \"video.time.update\";\nexport const VIDEO_DBLCLICK = \"video.dblclick\";\nexport const VIDEO_SEEKING = \"video.seeking\";\nexport const VIDEO_LOAD_START = \"video.load.start\";\nexport const VIDEO_PROGRESS = \"video.progress\";\nexport const VIDEO_CAN_PLAY = \"video.can.play\";\nexport const VIDEO_ENDED = \"video.ended\";\nexport const VIDEO_ERROR = \"video.error\";\nexport const VIDEO_VOLUME_CHANGE = \"video.volume.change\";\n\nlet fn = VideoControl.prototype = Object.create(Subscriber.prototype),\n    proto = {\n        constructor: VideoControl,\n        setVolume(volume) {\n            //音量只能设置0-1的值\n            if (volume > 1) {\n                volume = volume / 100;\n            }\n            volume > 1 && (volume = 1);\n            this.el.volume = volume;\n            this.el.muted = !volume;\n            return this;\n        },\n        getVolume() {\n            return Math.floor(this.el.volume * 100);\n        },\n        mute(mute) {\n            this.el.muted = isUndefined(mute) ? true : !!mute;\n            return this;\n        },\n        isMuted() {\n            return this.el.muted;\n        },\n        autoPlay(play) {\n            this.el.autoplay = !!play;\n            return this;\n        },\n        isAutoPlay() {\n            return this.el.autoplay;\n        },\n        play(play) {\n            if (isUndefined(play) || !!play) {\n                this.el.play();\n            } else {\n                this.el.pause();\n            }\n            return this;\n        },\n        isPaused() {\n            return this.el.paused;\n        },\n        isError() {\n            let err = this.el.error;\n            return err ? err.code : err;\n        },\n        loop(isLoop) {\n            this.el.loop = !!isLoop;\n            return this;\n        },\n        isLoop() {\n            return this.el.loop;\n        },\n        setPoster(poster) {\n            this.el.poster = poster;\n            return this;\n        },\n        setPreload(preload) {\n            this.el.preload = preload;\n            return this;\n        },\n        setCurrentTime(time, scale) {\n            let duration = this.getDuration();\n            if (scale) {\n                time = duration * time;\n            }\n            this.el.currentTime = time;\n            return this;\n        },\n        getCurrentTime() {\n            return this.el.currentTime;\n        },\n        getDuration() {\n            return this.el.duration;\n        },\n        getPlayedPercentage() {\n            return this.getCurrentTime() / this.getDuration();\n        },\n        getBuffered(percent) {\n            let buffered = this.el.buffered,\n                len = buffered.length;\n            if (percent) {\n                //缓冲的百分比\n                return len ? buffered = buffered.end(len - 1) / this.getDuration() * 100 : null;\n            }\n            return buffered;\n        },\n        getReadyState() {\n            return this.el.readyState;\n        },\n        showControls() {\n            this.el.controls = true;\n            return this;\n        },\n        convertTime(time) {\n            let changeLen = num => num < 10 ? \"0\" + num : num.toString(),\n                str, h, m, s;\n            time = Math.ceil(time);\n            if (time <= 0) {\n                str = \"00:00\";\n            } else if (time < 60) {\n                str = \"00:\" + changeLen(time);\n            } else if (time < 3600) {\n                m = Math.floor(time / 60);\n                s = time % 60;\n                str = changeLen(m) + \":\" + changeLen(s);\n            } else {\n                h = Math.floor(time / 3600);\n                str = time % 3600;\n                m = Math.floor(str / 60);\n                s = str % 60;\n                str = changeLen(h) + \":\" + changeLen(m) + \":\" + changeLen(s);\n            }\n            return str;\n        },\n        reload() {\n            this.el.load();\n            return this;\n        },\n        changeSource(src) {\n            let paused = this.isPaused();\n            if (this.source !== src) {\n                this.source = src;\n                this.initSource(src);\n            }\n            if (!paused) {\n                this.play(true);\n            }\n            return this;\n        },\n        getSource() {\n            return this.el.currentSrc;\n        },\n        initSource(source) {\n            let frag = doc.createDocumentFragment();\n            if (typeof source === \"string\") {\n                this.el.src = source;\n            } else if (Array.isArray(source)) {\n                this.el.innerHTML = \"\";\n                source.forEach(function (src) {\n                    let sourceEl = dom.createElement(\"source\", {src: src});\n                    frag.appendChild(sourceEl);\n                });\n                this.el.appendChild(frag);\n            }\n            return this;\n        },\n        handleError() {\n            let code = this.isError(),\n                err, message;\n            //出现错误保存当前播放进度，恢复后从当前进度继续播放\n            this.playedTime = this.getCurrentTime();\n            err = ERROR_TYPE[code];\n            switch (err) {\n                case \"MEDIA_ERR_ABORTED\":\n                    message = \"出错了\";\n                    break;\n                case \"MEDIA_ERR_NETWORK\":\n                    message = \"网络错误或视频地址无效\";\n                    break;\n                case \"MEDIA_ERR_DECODE\":\n                case \"MEDIA_ERR_SRC_NOT_SUPPORTED\":\n                    message = \"解码失败,不支持的视频格式或地址无效\";\n            }\n            message += \",点击刷新\";\n            return {\n                code,\n                message\n            };\n        },\n        notify(type) {\n            let args = {\n                [VIDEO_LOADED_META]: [{duration: this.getDuration()}],\n                [VIDEO_TIME_UPDATE]: [this.getCurrentTime()],\n                [VIDEO_PROGRESS]: [this.getBuffered(true), this.getReadyState()],\n                [VIDEO_ERROR]: [this.handleError()],\n               // [VIDEO_VOLUME_CHANGE]: [this.isMuted() ? 0 : this.getVolume()]\n            },\n                a = args[type] || [];\n            if (type === VIDEO_LOAD_START && this.playedTime) {\n                this.setCurrentTime(this.playedTime);\n                this.playedTime = 0;\n            }\n            return this.trigger(type, ...a);\n        },\n        initEvent() {\n            let el = this.el;\n            dom.on(el, \"loadedmetadata\", this.notify.bind(this, VIDEO_LOADED_META))\n                .on(el, \"timeupdate\", this.notify.bind(this, VIDEO_TIME_UPDATE))\n                .on(el, \"dblclick\", this.notify.bind(this, VIDEO_DBLCLICK))\n                .on(el, \"seeking\", this.notify.bind(this, VIDEO_SEEKING))\n                .on(el, \"loadstart\", this.notify.bind(this, VIDEO_LOAD_START))\n                .on(el, \"progress\", this.notify.bind(this, VIDEO_PROGRESS))\n                .on(el, \"canplay seeked\", this.notify.bind(this, VIDEO_CAN_PLAY))\n                .on(el, \"ended\", this.notify.bind(this, VIDEO_ENDED))\n                .on(el, \"error\", this.notify.bind(this, VIDEO_ERROR))\n                //.on(el, \"volumechange\", this.notify.bind(this, VIDEO_VOLUME_CHANGE))\n                .on(el, \"contextmenu\", evt => evt.preventDefault());\n        },\n        init(target) {\n            let video = dom.createElement(\"video\"),\n                text = doc.createTextNode(this.config.msg.toString());\n            this.source = this.config.source;\n            video.appendChild(text);\n            this.el = video;\n            dom.addClass(this.el, \"rplayer-video\");\n            target.appendChild(video);\n            this.initSource(this.source)\n                .autoPlay(this.config.autoPlay)\n                .loop(this.config.loop)\n                .setPoster(this.config.poster)\n                .setPreload(this.config.preload)\n                .initEvent();\n            return this;\n        },\n        destroy() {\n            dom.off(this.el);\n            this.off();\n            removeProp(this);\n        }\n    };\n\n\nextend(fn, proto);\n\nexport default VideoControl;","import dom from \"./dom.js\";\nimport Slider from \"./slider.js\";\nimport Subscriber from \"./subscriber.js\";\nimport {VIDEO_VOLUME_CHANGE} from \"./video_control\";\nimport {doc, extend} from \"./global\";\n\nexport const VOLUME_UPDATE = \"volume.update\";\nexport const VOLUME_MUTE = \"volume.mute\";\nexport const VOLUME_CLASS_NAME_CHANGE = \"volume.className.change\";\n\nfunction VolumeControl(volume) {\n    Subscriber.call(this);\n    this.el = dom.createElement(\"div\", {\"class\": \"rplayer-volume-popup rplayer-hide\"});\n    this.valueEl = dom.createElement(\"div\", {\"class\": \"rplayer-current-volume\"});\n    this.muteBtn = dom.createElement(\"button\", {\"class\": \"rplayer-mute volume-1\"});\n    this.slider = new Slider(true);\n    this.volume = volume;\n    this.muted = false;\n}\n\nVolumeControl.prototype = Object.create(Subscriber.prototype);\n\nlet proto = {\n    constructor: VolumeControl,\n    show() {\n        dom.removeClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    hide() {\n        dom.addClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    toggle() {\n        dom.toggleClass(this.el, \"rplayer-hide\");\n        return this;\n    },\n    updateVolume(volume, scale, sliderMove) {\n        scale && (volume *= 100);\n        volume = Math.floor(volume);\n        this.volume = volume;\n        if (!volume) {\n            this.muted = true;\n            this.trigger(VOLUME_MUTE, this.muted);\n        } else {\n            this.muted = false;\n            this.trigger(VOLUME_UPDATE, volume);\n        }\n        this.updateStyle(volume, sliderMove);\n        return this;\n    },\n    updateVolumeByStep(step) {\n        let volume = this.volume + step;\n        volume = volume > 100 ? 100 : volume < 0 ? 0 : volume;\n        this.updateVolume(volume);\n    },\n    updateStyle(volume, sliderMove) {\n        let cls = this.muteBtn.className,\n            reg = /volume-\\S+/;\n        cls = cls.replace(reg, \"\");\n        if (!volume) {\n            reg= \"volume-mute\";\n        } else if (volume <= 33) {\n            reg= \"volume-1\";\n        } else if (volume <= 66) {\n            reg= \"volume-2\";\n        } else {\n            reg= \"volume-3\";\n        }\n        this.muteBtn.className = cls + reg;\n        this.valueEl.innerHTML = volume;\n        //如果通过移动滑块改变音量则不重复改变slider的位置\n        !sliderMove && this.slider.updateVPosition(volume + \"%\");\n        this.trigger(VOLUME_CLASS_NAME_CHANGE, reg);\n        return this;\n    },\n    mute() {\n        if (this.muted = !this.muted) {\n            this.updateStyle(0);\n        } else {\n            this.updateStyle(this.volume);\n        }\n        this.trigger(VOLUME_MUTE, this.muted);\n    },\n    initEvent() {\n        dom.on(this.muteBtn, \"click\", this.mute.bind(this))\n            .on(this.el, \"mouseleave\", this.hide.bind(this))\n            .on(doc, \"click\", evt => {\n                let tgt = evt.target;\n                //点击页面其他地方（点击的不是音量设置面板或者面板内的元素）则隐藏音量面板\n                if (tgt !== this.el && !this.el.contains(tgt)) {\n                    this.hide();\n                }\n            });\n        this.slider.on(\"slider.moving\", (evt, distance) => {\n            this.updateVolume(distance, true, true);\n        });\n        return this;\n    },\n    init(target) {\n        this.el.appendChild(this.valueEl);\n        this.slider.init(this.el);\n        this.el.appendChild(this.muteBtn);\n        target.appendChild(this.el);\n        this.updateVolume(this.volume)\n            .initEvent();\n        return this;\n    }\n};\n\nextend(VolumeControl.prototype, proto);\n\nexport default VolumeControl;","import dom from \"./dom.js\";\nimport {doc, DEFAULT_OPTIONS, KEY_MAP, isObject, isUndefined, removeProp} from \"./global.js\";\nimport Subscriber from \"./subscriber.js\";\nimport Slider from \"./slider.js\";\nimport {tpl, controls} from \"./template.js\";\nimport Loading from \"./loading.js\";\nimport VideoError from \"./error.js\";\nimport VideoControl, {\n    VIDEO_CAN_PLAY,\n    VIDEO_DBLCLICK,\n    VIDEO_ENDED,\n    VIDEO_ERROR,\n    VIDEO_LOAD_START,\n    VIDEO_LOADED_META,\n    VIDEO_PROGRESS,\n    VIDEO_SEEKING,\n    VIDEO_TIME_UPDATE\n} from \"./video_control.js\";\nimport VolumeControl, {VOLUME_CLASS_NAME_CHANGE, VOLUME_MUTE, VOLUME_UPDATE} from \"./VolumeControl\";\n\nlet hideVolumePopTimer = null,\n    hideControlsTimer = null;\nconst HIDE_CLASS = \"rplayer-hide\";\nconst DEFAULT_HEIGHT = 500;\n\nfunction RPlayer(selector, options) {\n    let target = dom.selectElement(selector),\n        config;\n    Subscriber.call(this);\n    if (isObject(options)) {\n        config = {\n            autoPlay: !!options.autoPlay,\n            defaultVolume: Math.abs(parseInt(options.defaultVolume)) || DEFAULT_OPTIONS.defaultVolume,\n            loop: !!options.loop,\n            msg: options.msg || DEFAULT_OPTIONS.msg,\n            poster: options.poster || DEFAULT_OPTIONS.poster,\n            preload: options.preload || DEFAULT_OPTIONS.preload,\n            source: options.source\n        };\n    } else {\n        config = DEFAULT_OPTIONS;\n    }\n    if (!config.source) {\n        new Error(\"没有设置视频链接\");\n    }\n    if (!target) {\n        throw new Error(\"未选中任何元素\");\n    }\n    this.target = target;\n    this.controlsDisabled = false;\n    this.video = new VideoControl(config);\n    this.loading = new Loading();\n    this.error = new VideoError();\n    this.volumeControl = new VolumeControl(config.defaultVolume);\n    this.controls = isUndefined(options.controls) ? true : !!options.controls;\n    this.useNativeControls = isUndefined(options.useNativeControls) ? false : options.useNativeControls;\n}\n\nlet fn = RPlayer.prototype = Object.create(Subscriber.prototype);\nfn.constructor = RPlayer;\n\nfn.toggleFullScreen = function () {\n    if (this.isFullScreen = !this.isFullScreen) {\n        this.requestFullScreen();\n    } else {\n        this.exitFullScreen();\n    }\n};\n\nfn.requestFullScreen = function () {\n    this.isFullScreen = true;\n    dom.fullScreen(this.container)\n        .addClass(this.fullScreenBtn, \"rplayer-fullscreen\")\n        .addClass(this.container, \"rplayer-fullscreen\");\n};\n\nfn.exitFullScreen = function () {\n    this.isFullScreen = false;\n    dom.fullScreen(this.container, true)\n        .removeClass(this.fullScreenBtn, \"rplayer-fullscreen\")\n        .removeClass(this.container, \"rplayer-fullscreen\");\n};\n\nfn.initFullScreenEvent = function () {\n    let fsApi = dom.fsApi;\n    if (fsApi) {\n        dom.on(doc, fsApi.fullscreenchange, () => {\n            if (!doc[fsApi.fullscreenElement]) {\n                this.exitFullScreen();\n            }\n        }).on(doc, fsApi.fullscreenerror, () => {\n            this.exitFullScreen();\n        });\n    }\n    return this;\n};\n\nfn.toggleVolumePopupInfo = function (volume) {\n    clearTimeout(hideVolumePopTimer);\n    this.volumePopupInfo.innerHTML = \"当前音量: \" + volume;\n    dom.removeClass(this.volumePopupInfo, HIDE_CLASS);\n    hideVolumePopTimer = setTimeout(() => dom.addClass(this.volumePopupInfo, HIDE_CLASS), 3000);\n    return this;\n};\n\nfn.keyDown = function (evt) {\n    //控制条被禁用，不做处理\n    if (this.controlsDisabled) return;\n    let key = evt.key.toLowerCase(),\n        regUpOrDown = /(?:up)|(?:down)/,\n        regLeftOrRight = /(?:left)|(?:right)/,\n        regEsc = /esc/,\n        regSpace = /\\s|(?:spacebar)/,\n        tmp = KEY_MAP[key];\n    if (tmp) {\n        if (regLeftOrRight.test(key)) {\n            this.updateProgressByStep(tmp);\n        } else if (regUpOrDown.test(key)) {\n            this.volumeControl.updateVolumeByStep(tmp);\n        } else if (regEsc.test(key)) {\n            this.exitFullScreen();\n        } else if (regSpace.test(key)) {\n            this.togglePlay();\n        }else {\n            this.toggleFullScreen();\n        }\n    }\n    evt.preventDefault();\n};\n\n//点击显示/隐藏设置音量面板\nfn.toggleVolumeSettingsPanel = function (evt) {\n    if (!this.controlsDisabled) {\n        this.volumeControl.toggle();\n    }\n    //阻止冒泡到document, document点击事件点击面板外任意地方隐藏面板，如不阻止冒泡则显示不出来\n    evt.stopPropagation();\n};\n\nfn.hideVolumeSettingsPanel = function () {\n    dom.addClass(this.volumePopup, HIDE_CLASS);\n    return this;\n};\n\nfn.initVolumeEvent = function () {\n    this.volumeControl\n        .on(VOLUME_UPDATE, (evt, volume) => this.video.setVolume(volume))\n        .on(VOLUME_CLASS_NAME_CHANGE, (evt, cls) => {\n            let cn = this.showVolumePopBtn.className;\n            let reg = /volume-\\S+/;\n            this.showVolumePopBtn.className = cn.replace(reg, \"\") + cls;\n        })\n        .on(VOLUME_MUTE, (evt, mute) => mute ? this.video.mute(true) : this.video.mute(false));\n    return this;\n};\n\n\nfn.togglePlay = function () {\n    if (!this.controlsDisabled) {\n        this.video.isPaused() ? this.play(): this.pause();\n    }\n};\n\nfn.play = function () {\n    dom.addClass(this.playBtn, \"paused\");\n    this.video.play(true);\n    return this;\n};\n\nfn.pause = function () {\n    this.video.play(false);\n    dom.removeClass(this.playBtn, \"paused\");\n    return this;\n};\n\n//鼠标在进度条上移动显示时间信息\nfn.showPopupTimeInfo = function (evt) {\n    let duration = this.video.getDuration(),\n        popup = this.videoPopupTime,\n        mark = this.mark;\n    if (duration) {\n        dom.removeClass(popup, HIDE_CLASS)\n            .removeClass(mark, HIDE_CLASS);\n        let rect = this.progressPanel.getBoundingClientRect(),\n            distance = evt.clientX - rect.left,\n            width = popup.offsetWidth,\n            left = distance - width / 2;\n        width = rect.width - width;\n        left = left < 0 ? 0 : left > width ? width : left;\n        width = distance / rect.width;\n        popup.innerHTML = this.video.convertTime(width * duration);\n        dom.css(popup, \"left\", left + \"px\");\n        dom.css(mark, \"left\", width * 100 + \"%\");\n    }\n    return this;\n};\n\nfn.hidePopupTimeInfo = function () {\n    dom.addClass(this.videoPopupTime, HIDE_CLASS)\n        .addClass(this.mark, HIDE_CLASS);\n    return this;\n};\n\nfn.updateProgressByStep = function (step) {\n    let currentTime = this.video.getCurrentTime(),\n        duration = this.video.getDuration();\n    currentTime += step;\n    currentTime = currentTime < 0 ? 0 : currentTime > duration ? duration : currentTime;\n    this.video.setCurrentTime(currentTime);\n    currentTime = this.video.getPlayedPercentage();\n    return this.videoSlider.trigger(\"position.change\", \"h\", currentTime);\n};\n\nfn.hideControls = function () {\n    dom.addClass(this.controlsPanel, HIDE_CLASS);\n    return this;\n};\n\nfn.showControls = function () {\n    //出错了则不显示控制条\n    if (!this.video.isError()) {\n        clearTimeout(hideControlsTimer);\n        dom.removeClass(this.controlsPanel, HIDE_CLASS);\n        if (dom.hasClass(this.volumePopup, HIDE_CLASS)) {\n            hideControlsTimer = setTimeout(() => this.hideControls(), 5000);\n        }\n    }\n    return this;\n};\n\nfn.enableControls = function () {\n    dom.removeClass(this.controlsPanel, \"rplayer-disabled\");\n    this.controlsDisabled = false;\n    return this;\n};\n\nfn.disableControls = function () {\n    dom.addClass(this.controlsPanel, \"rplayer-disabled\");\n    this.controlsDisabled = true;\n    return this;\n};\n\nfn.initControlEvent = function () {\n    //滑动改变进度/点击进度条改变进度\n    this.videoSlider.on(\"slider.move.done\", (evt, distance) => {\n        this.video.setCurrentTime(distance, true);\n        this.updateTime();\n    });\n    this.video\n        .on(VIDEO_PROGRESS, (evt, buffered, readyState) => this.buffer(buffered, readyState))\n        .on(VIDEO_LOADED_META, (evt, meta) => this.updateMetaInfo(meta))\n        .on(VIDEO_TIME_UPDATE, (evt, currentTime) => this.updateTime(currentTime))\n        .on(VIDEO_DBLCLICK, this.toggleFullScreen.bind(this))\n    dom.on(this.progressPanel, \"mouseover mousemove\", this.showPopupTimeInfo.bind(this))\n        .on(this.progressPanel, \"mouseout\", this.hidePopupTimeInfo.bind(this))\n        .on(this.container, \"keydown\", this.keyDown.bind(this))\n        .on(this.container, \"mousemove\", this.showControls.bind(this));\n    return this.initVolumeEvent()\n        .initFullScreenEvent();\n};\n\nfn.handleClick = function (evt) {\n    let tgt = evt.target;\n    switch (tgt) {\n        case this.showVolumePopBtn:\n            this.toggleVolumeSettingsPanel(evt);\n            break;\n        case this.muteBtn:\n            this.mute();\n            break;\n        case this.playBtn:\n        case this.video.el:\n            this.togglePlay();\n            break;\n        case this.fullScreenBtn:\n            this.toggleFullScreen();\n            break;\n        case this.error.msgEl:\n            this.refresh();\n            break;\n    }\n};\n\nfn.buffer = function (buffered, readyState) {\n    this.bufferedBar && dom.css(this.bufferedBar, \"width\",  buffered + \"%\");\n    if (readyState < 3) {\n        this.loading.show();\n    }\n};\n\nfn.updateTime = function (time = this.video.getCurrentTime(), total) {\n    let el = this.currentTime;\n    if (total) {\n        el = this.totalTime;\n    }\n    el.innerHTML = this.video.convertTime(time);\n    return this;\n};\n\nfn.updateMetaInfo = function (meta) {\n    if (this.video.isAutoPlay()) {\n        this.play();\n    }\n    this.updateTime(meta.duration, true)\n        .enableControls();\n};\n\nfn.playEnd = function () {\n    this.trigger(\"play.end\");\n    return this.video.isLoop() ? this.play() :\n        this.pause();\n};\n\nfn.hideError = function () {\n    this.controlsDisabled = false;\n    return this;\n};\n\nfn.handleError = function (error) {\n    this.controlsDisabled = true;\n    this.loading.hide();\n    this.error.show(error.message);\n    return this;\n};\n\nfn.refresh = function () {\n    this.video.reload();\n    this.error.hide();\n};\n\nfn.initEvent = function () {\n    dom.on(this.container, \"click\", this.handleClick.bind(this));\n    this.video\n        .on(VIDEO_LOAD_START, () => {\n            this.loading.show();\n            this.disableControls();\n        })\n        .on(VIDEO_SEEKING, () => this.loading.show())\n        .on(VIDEO_CAN_PLAY, () => this.loading.hide())\n        .on(VIDEO_ENDED, this.playEnd.bind(this))\n        .on(VIDEO_ERROR, (evt, error) => this.handleError(error));\n    return this;\n};\n\nfn.initElements = function () {\n    let context = this.container,\n        volumePanel = dom.selectElement(\".rplayer-audio-control\", context);\n    this.playBtn = dom.selectElement(\".rplayer-play-btn\", context);\n    this.progressPanel = dom.selectElement(\".rplayer-progress-panel\", context);\n    this.videoPopupTime = dom.selectElement(\".rplayer-popup-video-info\", context);\n    this.currentTime = dom.selectElement(\".rplayer-current-time\", context);\n    this.totalTime = dom.selectElement(\".rplayer-total-time\", context);\n    this.bufferedBar = dom.selectElement(\".rplayer-bufferd-bar\", context);\n    this.showVolumePopBtn = dom.selectElement(\".rplayer-audio-btn\", context);\n    this.volumePopupInfo = dom.selectElement(\".rplayer-popup-volume-info\", context);\n    this.fullScreenBtn = dom.selectElement(\".rplayer-fullscreen-btn\", context);\n    this.mark = dom.selectElement(\".rplayer-mark\", context);\n    this.volumeControl.init(volumePanel);\n    this.videoSlider = new Slider();\n    this.videoSlider.init(this.progressPanel);\n    return this;\n};\n\nfn.initControls = function () {\n    this.controlsPanel = dom.createElement(\"div\");\n    dom.addClass(this.controlsPanel, \"rplayer-controls\");\n    this.controlsPanel.innerHTML = controls;\n    this.container.appendChild(this.controlsPanel);\n    return this.initElements()\n        .initControlEvent();\n};\n\n\nfn.offEvent = function () {\n    dom.off(doc)\n        .off(this.volumePopup)\n        .off(this.container)\n        .off(this.video.el);\n    return this;\n};\n\nfn.destroy = function () {\n    if (this.container) {\n        this.videoSlider.destroy();\n        this.video.destroy();\n        removeProp(this);\n        this.offEvent();\n    }\n    return this;\n};\n\nfn.getSource = function () {\n    return this.video.getSource();\n};\n\nfn.updateSource = function (src) {\n    this.video.changeSource(src);\n};\n\nfn.initialize = function () {\n    if (!this.container) { //防止重复初始化\n        let container = dom.createElement(\"div\", {\n                tabIndex: 100 //使元素能够获取焦点\n            }),\n            height = parseInt(getComputedStyle(this.target).height);\n        this.isFullScreen = false;\n        container.innerHTML = tpl;\n        dom.css(container, \"height\", (height || DEFAULT_HEIGHT) + \"px\");\n        this.container = container;\n        this.video.init(container);\n        this.loading.init(container);\n        this.error.init(container);\n        dom.addClass(container, \"rplayer-container\");\n        //播放控制与原生控制二选一，如果设置了useNativeControls为true，则优先使用原生控制\n        if (this.controls && !this.useNativeControls) {\n            this.initControls();\n        } else if (this.useNativeControls) {\n            this.video.showControls();\n        }\n        this.target.appendChild(container);\n        this.initEvent();\n    }\n    return this;\n};\n\nRPlayer.init = function (selector, options) {\n    return new RPlayer(selector, options).initialize();\n};\n\nexport default RPlayer;"],"names":["DEFAULT_OPTIONS","ERROR_TYPE","TYPE","VOLUME_STEP","VIDEO_STEP","KEY_MAP","doc","document","isType","Object","prototype","toString","call","obj","type","isFunction","isObject","isString","isUndefined","isWindow","window","extend","target","source","arguments","length","key","copy","t","toArray","likeArr","start","Array","isArray","slice","removeProp","prop","e","dom","guid","hasClass","el","cls","classList","contains","className","indexOf","addClass","add","removeClass","reg","RegExp","remove","replace","trim","toggleClass","toggle","css","val","style","cssText","getComputedStyle","getPropertyValue","fullScreen","exit","fsApi","exitFullscreen","requestFullscreen","fullPage","selectElement","selector","context","ret","nodeName","test","getElementById","substring","querySelector","createElement","name","attrs","setAttribute","_on","callback","id","handler","defineProperty","handlers","push","addEventListener","on","off","i","split","_off","len","splice","removeEventListener","forEach","fn","once","cb","_this","args","apply","fullScreenApi","defApi","tmp","support","CEvent","data","timeStamp","Subscriber","TypeError","self","f","h","Date","now","concat","Slider","vertical","moveDis","pos","moving","proto","create","constructor","getPosition","parent","parentNode","rect","getBoundingClientRect","parseFloat","width","height","left","top","updateHPosition","scale","bar","updateVPosition","mouseDown","evt","button","x","clientX","y","clientY","mouseMove","getMoveCallback","bind","origLeft","origTop","maxX","maxY","mouseUp","moveVertical","distance","offsetY","moveHorizontal","offsetX","trigger","changePosition","dir","dis","clickTrack","track","eType","initEvent","destroy","init","class","slider","appendChild","append","tpl","controls","Loading","VideoError","msgEl","msg","setMessage","innerHTML","VideoControl","config","playedTime","VIDEO_LOADED_META","VIDEO_TIME_UPDATE","VIDEO_DBLCLICK","VIDEO_SEEKING","VIDEO_LOAD_START","VIDEO_PROGRESS","VIDEO_CAN_PLAY","VIDEO_ENDED","VIDEO_ERROR","volume","muted","Math","floor","mute","play","autoplay","pause","paused","err","error","code","isLoop","loop","poster","preload","time","duration","getDuration","currentTime","getCurrentTime","percent","buffered","end","readyState","changeLen","num","str","m","s","ceil","load","src","isPaused","initSource","currentSrc","frag","createDocumentFragment","sourceEl","isError","message","getBuffered","getReadyState","handleError","a","setCurrentTime","notify","preventDefault","video","text","createTextNode","autoPlay","setPoster","setPreload","VOLUME_UPDATE","VOLUME_MUTE","VOLUME_CLASS_NAME_CHANGE","VolumeControl","valueEl","muteBtn","sliderMove","updateStyle","step","updateVolume","hide","tgt","hideVolumePopTimer","hideControlsTimer","HIDE_CLASS","DEFAULT_HEIGHT","RPlayer","options","abs","parseInt","defaultVolume","Error","controlsDisabled","loading","volumeControl","useNativeControls","toggleFullScreen","isFullScreen","requestFullScreen","exitFullScreen","container","fullScreenBtn","initFullScreenEvent","fullscreenchange","fullscreenElement","fullscreenerror","toggleVolumePopupInfo","volumePopupInfo","setTimeout","keyDown","toLowerCase","regUpOrDown","regLeftOrRight","regEsc","regSpace","updateProgressByStep","updateVolumeByStep","togglePlay","toggleVolumeSettingsPanel","stopPropagation","hideVolumeSettingsPanel","volumePopup","initVolumeEvent","setVolume","cn","showVolumePopBtn","playBtn","showPopupTimeInfo","popup","videoPopupTime","mark","progressPanel","offsetWidth","convertTime","hidePopupTimeInfo","getPlayedPercentage","videoSlider","hideControls","controlsPanel","showControls","enableControls","disableControls","initControlEvent","updateTime","buffer","meta","updateMetaInfo","handleClick","refresh","bufferedBar","show","total","totalTime","isAutoPlay","playEnd","hideError","reload","initElements","volumePanel","initControls","offEvent","getSource","updateSource","changeSource","initialize"],"mappings":"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"}